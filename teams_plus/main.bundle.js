/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={"--colorNeutralForeground1":"#242424","--colorNeutralForeground1Hover":"#242424","--colorNeutralForeground1Pressed":"#242424","--colorNeutralForeground1Selected":"#242424","--colorNeutralForeground2":"#424242","--colorNeutralForeground2Hover":"#242424","--colorNeutralForeground2Pressed":"#242424","--colorNeutralForeground2Selected":"#242424","--colorNeutralForeground2BrandHover":"#5b5fc7","--colorNeutralForeground2BrandPressed":"#4f52b2","--colorNeutralForeground2BrandSelected":"#5b5fc7","--colorNeutralForeground3":"#616161","--colorNeutralForeground3Hover":"#424242","--colorNeutralForeground3Pressed":"#424242","--colorNeutralForeground3Selected":"#424242","--colorNeutralForeground3BrandHover":"#5b5fc7","--colorNeutralForeground3BrandPressed":"#4f52b2","--colorNeutralForeground3BrandSelected":"#5b5fc7","--colorNeutralForeground4":"#707070","--colorNeutralForegroundDisabled":"#bdbdbd","--colorNeutralForegroundInvertedDisabled":"rgba(255, 255, 255, 0.4)","--colorBrandForegroundLink":"#4f52b2","--colorBrandForegroundLinkHover":"#444791","--colorBrandForegroundLinkPressed":"#383966","--colorBrandForegroundLinkSelected":"#4f52b2","--colorNeutralForeground2Link":"#424242","--colorNeutralForeground2LinkHover":"#242424","--colorNeutralForeground2LinkPressed":"#242424","--colorNeutralForeground2LinkSelected":"#242424","--colorCompoundBrandForeground1":"#5b5fc7","--colorCompoundBrandForeground1Hover":"#4f52b2","--colorCompoundBrandForeground1Pressed":"#444791","--colorBrandForeground1":"#5b5fc7","--colorBrandForeground2":"#4f52b2","--colorBrandForeground2Hover":"#444791","--colorBrandForeground2Pressed":"#333357","--colorNeutralForeground1Static":"#242424","--colorNeutralForegroundStaticInverted":"#ffffff","--colorNeutralForegroundInverted":"#ffffff","--colorNeutralForegroundInvertedHover":"#ffffff","--colorNeutralForegroundInvertedPressed":"#ffffff","--colorNeutralForegroundInvertedSelected":"#ffffff","--colorNeutralForegroundInverted2":"#ffffff","--colorNeutralForegroundOnBrand":"#ffffff","--colorNeutralForegroundInvertedLink":"#ffffff","--colorNeutralForegroundInvertedLinkHover":"#ffffff","--colorNeutralForegroundInvertedLinkPressed":"#ffffff","--colorNeutralForegroundInvertedLinkSelected":"#ffffff","--colorBrandForegroundInverted":"#7f85f5","--colorBrandForegroundInvertedHover":"#9299f7","--colorBrandForegroundInvertedPressed":"#7f85f5","--colorBrandForegroundOnLight":"#5b5fc7","--colorBrandForegroundOnLightHover":"#4f52b2","--colorBrandForegroundOnLightPressed":"#3d3e78","--colorBrandForegroundOnLightSelected":"#444791","--colorNeutralBackground1":"#ffffff","--colorNeutralBackground1Hover":"#f5f5f5","--colorNeutralBackground1Pressed":"#e0e0e0","--colorNeutralBackground1Selected":"#ebebeb","--colorNeutralBackground2":"#fafafa","--colorNeutralBackground2Hover":"#f0f0f0","--colorNeutralBackground2Pressed":"#dbdbdb","--colorNeutralBackground2Selected":"#e6e6e6","--colorNeutralBackground3":"#f5f5f5","--colorNeutralBackground3Hover":"#ebebeb","--colorNeutralBackground3Pressed":"#d6d6d6","--colorNeutralBackground3Selected":"#e0e0e0","--colorNeutralBackground4":"#f0f0f0","--colorNeutralBackground4Hover":"#fafafa","--colorNeutralBackground4Pressed":"#f5f5f5","--colorNeutralBackground4Selected":"#ffffff","--colorNeutralBackground5":"#ebebeb","--colorNeutralBackground5Hover":"#f5f5f5","--colorNeutralBackground5Pressed":"#f0f0f0","--colorNeutralBackground5Selected":"#fafafa","--colorNeutralBackground6":"#e6e6e6","--colorNeutralBackgroundInverted":"#292929","--colorNeutralBackgroundStatic":"#333333","--colorNeutralBackgroundAlpha":"rgba(255,255,255,0.50)","--colorNeutralBackgroundAlpha2":"rgba(255,255,255,0.80)","--colorSubtleBackgroundHover":"#f5f5f5","--colorSubtleBackgroundPressed":"#e0e0e0","--colorSubtleBackgroundSelected":"#ebebeb","--colorSubtleBackgroundLightAlphaHover":"rgba(255, 255, 255, 0.7)","--colorSubtleBackgroundLightAlphaPressed":"rgba(255, 255, 255, 0.5)","--colorSubtleBackgroundInvertedHover":"rgba(0, 0, 0, 0.1)","--colorSubtleBackgroundInvertedPressed":"rgba(0, 0, 0, 0.3)","--colorSubtleBackgroundInvertedSelected":"rgba(0, 0, 0, 0.2)","--colorNeutralBackgroundDisabled":"#f0f0f0","--colorNeutralBackgroundInvertedDisabled":"rgba(255, 255, 255, 0.1)","--colorNeutralStencil1":"#e6e6e6","--colorNeutralStencil2":"#fafafa","--colorNeutralStencil1Alpha":"rgba(0, 0, 0, 0.1)","--colorNeutralStencil2Alpha":"rgba(0, 0, 0, 0.05)","--colorBackgroundOverlay":"rgba(0, 0, 0, 0.4)","--colorScrollbarOverlay":"rgba(0, 0, 0, 0.5)","--colorBrandBackground":"#5b5fc7","--colorBrandBackgroundHover":"#4f52b2","--colorBrandBackgroundPressed":"#383966","--colorBrandBackgroundSelected":"#444791","--colorCompoundBrandBackground":"#5b5fc7","--colorCompoundBrandBackgroundHover":"#4f52b2","--colorCompoundBrandBackgroundPressed":"#444791","--colorBrandBackgroundStatic":"#5b5fc7","--colorBrandBackground2":"#E8EBFA","--colorBrandBackground2Hover":"#dce0fa","--colorBrandBackground2Pressed":"#b6bcfa","--colorBrandBackground3Static":"#444791","--colorBrandBackground4Static":"#383966","--colorBrandBackgroundInverted":"#ffffff","--colorBrandBackgroundInvertedHover":"#e8ebfa","--colorBrandBackgroundInvertedPressed":"#c5cbfa","--colorBrandBackgroundInvertedSelected":"#dce0fa","--colorNeutralCardBackground":"#fafafa","--colorNeutralCardBackgroundHover":"#ffffff","--colorNeutralCardBackgroundPressed":"#f5f5f5","--colorNeutralCardBackgroundSelected":"#ebebeb","--colorNeutralCardBackgroundDisabled":"#f0f0f0","--colorNeutralStrokeAccessible":"#616161","--colorNeutralStrokeAccessibleHover":"#575757","--colorNeutralStrokeAccessiblePressed":"#4d4d4d","--colorNeutralStrokeAccessibleSelected":"#5b5fc7","--colorNeutralStroke1":"#d1d1d1","--colorNeutralStroke1Hover":"#c7c7c7","--colorNeutralStroke1Pressed":"#b3b3b3","--colorNeutralStroke1Selected":"#bdbdbd","--colorNeutralStroke2":"#e0e0e0","--colorNeutralStroke3":"#f0f0f0","--colorNeutralStrokeSubtle":"#e0e0e0","--colorNeutralStrokeOnBrand":"#ffffff","--colorNeutralStrokeOnBrand2":"#ffffff","--colorNeutralStrokeOnBrand2Hover":"#ffffff","--colorNeutralStrokeOnBrand2Pressed":"#ffffff","--colorNeutralStrokeOnBrand2Selected":"#ffffff","--colorBrandStroke1":"#5b5fc7","--colorBrandStroke2":"#c5cbfa","--colorBrandStroke2Hover":"#aab1fa","--colorBrandStroke2Pressed":"#5b5fc7","--colorBrandStroke2Contrast":"#c5cbfa","--colorCompoundBrandStroke":"#5b5fc7","--colorCompoundBrandStrokeHover":"#4f52b2","--colorCompoundBrandStrokePressed":"#444791","--colorNeutralStrokeDisabled":"#e0e0e0","--colorNeutralStrokeInvertedDisabled":"rgba(255, 255, 255, 0.4)","--colorNeutralStrokeAlpha":"rgba(0, 0, 0, 0.05)","--colorNeutralStrokeAlpha2":"rgba(255, 255, 255, 0.2)","--colorStrokeFocus1":"#ffffff","--colorStrokeFocus2":"#000000","--colorNeutralShadowAmbient":"rgba(0,0,0,0.12)","--colorNeutralShadowKey":"rgba(0,0,0,0.14)","--colorNeutralShadowAmbientLighter":"rgba(0,0,0,0.06)","--colorNeutralShadowKeyLighter":"rgba(0,0,0,0.07)","--colorNeutralShadowAmbientDarker":"rgba(0,0,0,0.20)","--colorNeutralShadowKeyDarker":"rgba(0,0,0,0.24)","--colorBrandShadowAmbient":"rgba(0,0,0,0.30)","--colorBrandShadowKey":"rgba(0,0,0,0.25)","--colorPaletteRedBackground1":"#fdf6f6","--colorPaletteRedBackground2":"#f1bbbc","--colorPaletteRedBackground3":"#d13438","--colorPaletteRedForeground1":"#bc2f32","--colorPaletteRedForeground2":"#751d1f","--colorPaletteRedForeground3":"#d13438","--colorPaletteRedBorderActive":"#d13438","--colorPaletteRedBorder1":"#f1bbbc","--colorPaletteRedBorder2":"#d13438","--colorPaletteGreenBackground1":"#f1faf1","--colorPaletteGreenBackground2":"#9fd89f","--colorPaletteGreenBackground3":"#107c10","--colorPaletteGreenForeground1":"#0e700e","--colorPaletteGreenForeground2":"#094509","--colorPaletteGreenForeground3":"#107c10","--colorPaletteGreenBorderActive":"#107c10","--colorPaletteGreenBorder1":"#9fd89f","--colorPaletteGreenBorder2":"#107c10","--colorPaletteDarkOrangeBackground1":"#fdf6f3","--colorPaletteDarkOrangeBackground2":"#f4bfab","--colorPaletteDarkOrangeBackground3":"#da3b01","--colorPaletteDarkOrangeForeground1":"#c43501","--colorPaletteDarkOrangeForeground2":"#7a2101","--colorPaletteDarkOrangeForeground3":"#da3b01","--colorPaletteDarkOrangeBorderActive":"#da3b01","--colorPaletteDarkOrangeBorder1":"#f4bfab","--colorPaletteDarkOrangeBorder2":"#da3b01","--colorPaletteYellowBackground1":"#fffef5","--colorPaletteYellowBackground2":"#fef7b2","--colorPaletteYellowBackground3":"#fde300","--colorPaletteYellowForeground1":"#817400","--colorPaletteYellowForeground2":"#817400","--colorPaletteYellowForeground3":"#fde300","--colorPaletteYellowBorderActive":"#fde300","--colorPaletteYellowBorder1":"#fef7b2","--colorPaletteYellowBorder2":"#fde300","--colorPaletteBerryBackground1":"#fdf5fc","--colorPaletteBerryBackground2":"#edbbe7","--colorPaletteBerryBackground3":"#c239b3","--colorPaletteBerryForeground1":"#af33a1","--colorPaletteBerryForeground2":"#6d2064","--colorPaletteBerryForeground3":"#c239b3","--colorPaletteBerryBorderActive":"#c239b3","--colorPaletteBerryBorder1":"#edbbe7","--colorPaletteBerryBorder2":"#c239b3","--colorPaletteLightGreenBackground1":"#f2fbf2","--colorPaletteLightGreenBackground2":"#a7e3a5","--colorPaletteLightGreenBackground3":"#13a10e","--colorPaletteLightGreenForeground1":"#11910d","--colorPaletteLightGreenForeground2":"#0b5a08","--colorPaletteLightGreenForeground3":"#13a10e","--colorPaletteLightGreenBorderActive":"#13a10e","--colorPaletteLightGreenBorder1":"#a7e3a5","--colorPaletteLightGreenBorder2":"#13a10e","--colorPaletteMarigoldBackground1":"#fefbf4","--colorPaletteMarigoldBackground2":"#f9e2ae","--colorPaletteMarigoldBackground3":"#eaa300","--colorPaletteMarigoldForeground1":"#d39300","--colorPaletteMarigoldForeground2":"#835b00","--colorPaletteMarigoldForeground3":"#eaa300","--colorPaletteMarigoldBorderActive":"#eaa300","--colorPaletteMarigoldBorder1":"#f9e2ae","--colorPaletteMarigoldBorder2":"#eaa300","--colorPaletteRedForegroundInverted":"#dc5e62","--colorPaletteGreenForegroundInverted":"#359b35","--colorPaletteYellowForegroundInverted":"#fef7b2","--colorPaletteDarkRedBackground2":"#d69ca5","--colorPaletteDarkRedForeground2":"#420610","--colorPaletteDarkRedBorderActive":"#750b1c","--colorPaletteCranberryBackground2":"#eeacb2","--colorPaletteCranberryForeground2":"#6e0811","--colorPaletteCranberryBorderActive":"#c50f1f","--colorPalettePumpkinBackground2":"#efc4ad","--colorPalettePumpkinForeground2":"#712d09","--colorPalettePumpkinBorderActive":"#ca5010","--colorPalettePeachBackground2":"#ffddb3","--colorPalettePeachForeground2":"#8f4e00","--colorPalettePeachBorderActive":"#ff8c00","--colorPaletteGoldBackground2":"#ecdfa5","--colorPaletteGoldForeground2":"#6c5700","--colorPaletteGoldBorderActive":"#c19c00","--colorPaletteBrassBackground2":"#e0cea2","--colorPaletteBrassForeground2":"#553e06","--colorPaletteBrassBorderActive":"#986f0b","--colorPaletteBrownBackground2":"#ddc3b0","--colorPaletteBrownForeground2":"#50301a","--colorPaletteBrownBorderActive":"#8e562e","--colorPaletteForestBackground2":"#bdd99b","--colorPaletteForestForeground2":"#294903","--colorPaletteForestBorderActive":"#498205","--colorPaletteSeafoamBackground2":"#a8f0cd","--colorPaletteSeafoamForeground2":"#00723b","--colorPaletteSeafoamBorderActive":"#00cc6a","--colorPaletteDarkGreenBackground2":"#9ad29a","--colorPaletteDarkGreenForeground2":"#063b06","--colorPaletteDarkGreenBorderActive":"#0b6a0b","--colorPaletteLightTealBackground2":"#a6e9ed","--colorPaletteLightTealForeground2":"#00666d","--colorPaletteLightTealBorderActive":"#00b7c3","--colorPaletteTealBackground2":"#9bd9db","--colorPaletteTealForeground2":"#02494c","--colorPaletteTealBorderActive":"#038387","--colorPaletteSteelBackground2":"#94c8d4","--colorPaletteSteelForeground2":"#00333f","--colorPaletteSteelBorderActive":"#005b70","--colorPaletteBlueBackground2":"#a9d3f2","--colorPaletteBlueForeground2":"#004377","--colorPaletteBlueBorderActive":"#0078d4","--colorPaletteRoyalBlueBackground2":"#9abfdc","--colorPaletteRoyalBlueForeground2":"#002c4e","--colorPaletteRoyalBlueBorderActive":"#004e8c","--colorPaletteCornflowerBackground2":"#c8d1fa","--colorPaletteCornflowerForeground2":"#2c3c85","--colorPaletteCornflowerBorderActive":"#4f6bed","--colorPaletteNavyBackground2":"#a3b2e8","--colorPaletteNavyForeground2":"#001665","--colorPaletteNavyBorderActive":"#0027b4","--colorPaletteLavenderBackground2":"#d2ccf8","--colorPaletteLavenderForeground2":"#3f3682","--colorPaletteLavenderBorderActive":"#7160e8","--colorPalettePurpleBackground2":"#c6b1de","--colorPalettePurpleForeground2":"#341a51","--colorPalettePurpleBorderActive":"#5c2e91","--colorPaletteGrapeBackground2":"#d9a7e0","--colorPaletteGrapeForeground2":"#4c0d55","--colorPaletteGrapeBorderActive":"#881798","--colorPaletteLilacBackground2":"#e6bfed","--colorPaletteLilacForeground2":"#63276d","--colorPaletteLilacBorderActive":"#b146c2","--colorPalettePinkBackground2":"#f7c0e3","--colorPalettePinkForeground2":"#80215d","--colorPalettePinkBorderActive":"#e43ba6","--colorPaletteMagentaBackground2":"#eca5d1","--colorPaletteMagentaForeground2":"#6b0043","--colorPaletteMagentaBorderActive":"#bf0077","--colorPalettePlumBackground2":"#d696c0","--colorPalettePlumForeground2":"#43002b","--colorPalettePlumBorderActive":"#77004d","--colorPaletteBeigeBackground2":"#d7d4d4","--colorPaletteBeigeForeground2":"#444241","--colorPaletteBeigeBorderActive":"#7a7574","--colorPaletteMinkBackground2":"#cecccb","--colorPaletteMinkForeground2":"#343231","--colorPaletteMinkBorderActive":"#5d5a58","--colorPalettePlatinumBackground2":"#cdd6d8","--colorPalettePlatinumForeground2":"#3b4447","--colorPalettePlatinumBorderActive":"#69797e","--colorPaletteAnchorBackground2":"#bcc3c7","--colorPaletteAnchorForeground2":"#202427","--colorPaletteAnchorBorderActive":"#394146","--colorStatusSuccessBackground1":"#f1faf1","--colorStatusSuccessBackground2":"#9fd89f","--colorStatusSuccessBackground3":"#107c10","--colorStatusSuccessForeground1":"#0e700e","--colorStatusSuccessForeground2":"#094509","--colorStatusSuccessForeground3":"#107c10","--colorStatusSuccessForegroundInverted":"#54b054","--colorStatusSuccessBorderActive":"#107c10","--colorStatusSuccessBorder1":"#9fd89f","--colorStatusSuccessBorder2":"#107c10","--colorStatusWarningBackground1":"#fff9f5","--colorStatusWarningBackground2":"#fdcfb4","--colorStatusWarningBackground3":"#f7630c","--colorStatusWarningForeground1":"#bc4b09","--colorStatusWarningForeground2":"#8a3707","--colorStatusWarningForeground3":"#bc4b09","--colorStatusWarningForegroundInverted":"#faa06b","--colorStatusWarningBorderActive":"#f7630c","--colorStatusWarningBorder1":"#fdcfb4","--colorStatusWarningBorder2":"#bc4b09","--colorStatusDangerBackground1":"#fdf3f4","--colorStatusDangerBackground2":"#eeacb2","--colorStatusDangerBackground3":"#c50f1f","--colorStatusDangerForeground1":"#b10e1c","--colorStatusDangerForeground2":"#6e0811","--colorStatusDangerForeground3":"#c50f1f","--colorStatusDangerForegroundInverted":"#dc626d","--colorStatusDangerBorderActive":"#c50f1f","--colorStatusDangerBorder1":"#eeacb2","--colorStatusDangerBorder2":"#c50f1f","--colorStatusDangerBackground3Hover":"#b10e1c","--colorStatusDangerBackground3Pressed":"#960b18","--backgroundCanvas":"#fff","--colorAvatar":"#5b5fc7","--colorAvatarBackground":"#c5cbfa","--colorDefaultBackground7":"#F5F5F5","--colorTeamsBrand1Hover":"#4f52b2","--colorTeamsBrand1Pressed":"#444791","--colorTeamsBrand1Selected":"#444791","--colorTeamsNeutralStrokeSubtleAlpha":"rgba(0,0,0,.95)","--colorPaletteRedForeground1HCBlack":"#bc2f32","--colorPaletteRedBackground3Hover":"#BC2E2E","--colorPaletteRedBackground3Pressed":"#9F282B","--colorTeamsButtonCompositeHoverShadow1":"rgba(93, 91, 212, 0.05)","--colorTeamsButtonCompositeHoverShadow2":"rgba(159, 162, 252, 0.08)","--colorTeamsButtonCompositeHoverShadow3":"rgba(251, 174, 164, 0.08)","--colorTeamsButtonCompositeHoverShadow4":"rgba(121, 207, 255, 0.08)","--colorTeamsButtonCompositeFocusShadow1":"rgba(93, 91, 212, 0.1)","--colorTeamsButtonCompositeFocusShadow2":"rgba(159, 162, 252, 0.15)","--colorTeamsButtonCompositeFocusShadow3":"rgba(251, 174, 164, 0.1)","--colorTeamsButtonCompositeFocusShadow4":"rgba(121, 207, 255, 0.1)","--colorTeamsCompositeHoverShadow1":"rgba(93, 91, 212, 0.1)","--colorTeamsCompositeHoverShadow2":"rgba(159, 162, 252, 0.06)","--colorTeamsCompositeHoverShadow3":"rgba(251, 174, 164, 0.1)","--colorTeamsCompositeHoverShadow4":"rgba(121, 207, 255, 0.05)","--colorTeamsCompositeActiveShadow1":"rgba(93, 91, 212, 0.2)","--colorTeamsCompositeActiveShadow2":"rgba(159, 162, 252, 0.12)","--colorTeamsCompositeActiveShadow3":"rgba(251, 174, 164, 0.2)","--colorTeamsCompositeActiveShadow4":"rgba(121, 207, 255, 0.2)"},e={"--borderRadiusNone":"0","--borderRadiusSmall":"2px","--borderRadiusMedium":"4px","--borderRadiusLarge":"6px","--borderRadiusXLarge":"8px","--borderRadiusCircular":"10000px","--fontSizeBase100":"10px","--fontSizeBase200":"12px","--fontSizeBase300":"14px","--fontSizeBase400":"16px","--fontSizeBase500":"20px","--fontSizeBase600":"24px","--fontSizeHero700":"28px","--fontSizeHero800":"32px","--fontSizeHero900":"40px","--fontSizeHero1000":"68px","--lineHeightBase100":"14px","--lineHeightBase200":"16px","--lineHeightBase300":"20px","--lineHeightBase400":"22px","--lineHeightBase500":"28px","--lineHeightBase600":"32px","--lineHeightHero700":"36px","--lineHeightHero800":"40px","--lineHeightHero900":"52px","--lineHeightHero1000":"92px","--fontWeightRegular":"400","--fontWeightMedium":"500","--fontWeightSemibold":"600","--fontWeightBold":"700","--strokeWidthThin":"1px","--strokeWidthThick":"2px","--strokeWidthThicker":"3px","--strokeWidthThickest":"4px","--spacingHorizontalNone":"0","--spacingHorizontalXXS":"2px","--spacingHorizontalXS":"4px","--spacingHorizontalSNudge":"6px","--spacingHorizontalS":"8px","--spacingHorizontalMNudge":"10px","--spacingHorizontalM":"12px","--spacingHorizontalL":"16px","--spacingHorizontalXL":"20px","--spacingHorizontalXXL":"24px","--spacingHorizontalXXXL":"32px","--spacingVerticalNone":"0","--spacingVerticalXXS":"2px","--spacingVerticalXS":"4px","--spacingVerticalSNudge":"6px","--spacingVerticalS":"8px","--spacingVerticalMNudge":"10px","--spacingVerticalM":"12px","--spacingVerticalL":"16px","--spacingVerticalXL":"20px","--spacingVerticalXXL":"24px","--spacingVerticalXXXL":"32px","--shadow2":"0 0 2px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.14)","--shadow4":"0 0 2px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.14)","--shadow8":"0 0 2px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.14)","--shadow16":"0 0 2px rgba(0,0,0,0.12), 0 8px 16px rgba(0,0,0,0.14)","--shadow28":"0 0 8px rgba(0,0,0,0.12), 0 14px 28px rgba(0,0,0,0.14)","--shadow64":"0 0 8px rgba(0,0,0,0.12), 0 32px 64px rgba(0,0,0,0.14)","--shadow2Brand":"0 0 2px rgba(0,0,0,0.30), 0 1px 2px rgba(0,0,0,0.25)","--shadow4Brand":"0 0 2px rgba(0,0,0,0.30), 0 2px 4px rgba(0,0,0,0.25)","--shadow8Brand":"0 0 2px rgba(0,0,0,0.30), 0 4px 8px rgba(0,0,0,0.25)","--shadow16Brand":"0 0 2px rgba(0,0,0,0.30), 0 8px 16px rgba(0,0,0,0.25)","--shadow28Brand":"0 0 8px rgba(0,0,0,0.30), 0 14px 28px rgba(0,0,0,0.25)","--shadow64Brand":"0 0 8px rgba(0,0,0,0.30), 0 32px 64px rgba(0,0,0,0.25)"},r={fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, "Apple Color Emoji", "Segoe UI Emoji", sans-serif',imports:""},n={ff:"rgb(36, 36, 36)",oh:"rgb(36, 36, 36)",jg:"rgb(250, 250, 250)","ui-toolbar__item":"rgb(36, 36, 36)",oi:"rgb(36, 36, 36)","fui-StyledText":"rgb(36, 36, 36)","ui-popup__content__content":"#F5F5F5","ui-list__item:hover":"rgb(245, 245, 245)"},o={ff:"color",oh:"color",jg:"background","ui-toolbar__item":"color",oi:"color","fui-StyledText":"color","ui-popup__content__content":"background","ui-list__item:hover":"background"},a={channelAndChatBackground:"none",fullBackgroundExperience:"false",backdropFilter:"",interfaceOpacity:"0.1"},i={"Default Teams Theme":'{"data":{"varColors":{},"classColors":{},"fonts":{"fontFamily":"-apple-system, BlinkMacSystemFont, \\"Segoe UI\\", system-ui, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", sans-serif","imports":""},"otherSettings":{},"twemojiSupport":false},"name":"Default Teams Theme","data_version":1}',"Cozy Dark Blue theme":'{"data":{"varColors":{"--colorNeutralForeground1":"#FFFFFF","--colorNeutralForeground2":"#FFFFFF","--colorNeutralForeground3":"#777AC6","--colorBrandForegroundLink":"#54D0FF","--colorBrandForegroundLinkHover":"#FFFFFF","--colorBrandForeground1":"#FFFFFF","--colorBrandForeground2":"#FFFFFF","--colorBrandForeground2Hover":"#FFFFFF","--colorNeutralForegroundInverted":"#FFFFFF","--colorNeutralBackground1":"#002457","--colorNeutralBackground2":"#000000","--colorNeutralBackground3":"#000E57","--colorNeutralBackground4":"#000000","--colorNeutralBackground5":"#001271","--colorBrandBackground":"#000000","--colorBrandBackgroundHover":"#828282","--colorBrandBackground2":"#00527C","--colorBrandBackgroundInverted":"#FFFFFF","--colorNeutralCardBackground":"#202020","--colorNeutralStrokeAccessibleSelected":"#FFFFFF","--colorNeutralStroke1":"#00000000","--colorNeutralStroke2":"#0756AE00","--colorNeutralStroke3":"#002B7C00","--colorNeutralStrokeSubtle":"#E0E0E000","--colorNeutralStrokeOnBrand":"#FFFFFF00","--colorNeutralStrokeOnBrand2":"#FFFFFF00","--backgroundCanvas":"#002985","--colorAvatar":"#FFFFFF","--colorAvatarBackground":"#C9CFFF","--colorDefaultBackground7":"#001D54","--colorTeamsBrand1Hover":"#FFFFFF"},"classColors":{"ff":"#FFFFFF","oh":"#FFFFFF","jg":"#00000000","ui-toolbar__item":"#FFFFFF","oi":"#FFFFFF","fui-StyledText":"#FFFFFF"},"fonts":{"fontFamily":"\\"Inter\\", courier","imports":"@import url(\'https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap\');"},"otherSettings":{"--borderRadiusMedium":"20px"},"twemojiSupport":true},"name":"Cozy Dark Blue theme","data_version":1}'};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),u=new j(n||[]);return o(i,"_invoke",{value:C(t,r,u)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",y="suspendedYield",v="executing",g="completed",m={};function b(){}function w(){}function k(){}var x={};d(x,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(T([])));E&&E!==r&&n.call(E,i)&&(x=E);var L=k.prototype=b.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,a,i,c){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==u(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=p;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=B(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function B(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,B(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=h(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=k,o(L,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,d(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},P(A.prototype),d(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new A(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(L),d(L,l,"Generator"),d(L,i,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function l(t,e,r){return(e=d(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}function f(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){f(a,n,o,i,u,"next",t)}function u(t){f(a,n,o,i,u,"throw",t)}i(void 0)}))}}function p(t){return y.apply(this,arguments)}function y(){return(y=h(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get([e]);case 2:if(t.t0=e,null!=(r=t.sent[t.t0])){t.next=7;break}return console.log("Nothing with basi ckey loaded"),t.abrupt("return");case 7:return console.log("loaded key"),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,e){for(var r in e)r in t==0&&(console.log("Missing property ".concat(r,". Setting to default.")),t[r]=e[r]);for(var n in t)n in e==0&&(console.log("Additional property ".concat(n,". Removing")),delete t[n]);return t}var g=function(){return o=function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),l(this,"currentColors",t),l(this,"currentClassesColors",n),l(this,"currentFonts",r),l(this,"currentPixelValues",e),l(this,"currentThemes",i),l(this,"currentBackgrounds",a),console.log("Created new DataManager instance")},u=[{key:"loadAll",value:(k=h(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadColors();case 2:return t.next=4,this.loadClassColors();case 4:return t.next=6,this.loadFonts();case 6:return t.next=8,this.loadPixelValues();case 8:return t.next=10,this.loadBackgrounds();case 10:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"loadColors",value:(w=h(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("colors");case 2:if(!(r=e.sent)){e.next=7;break}return n=v(r,t),this.currentColors=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"loadClassColors",value:(b=h(c().mark((function t(){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("classColors");case 2:if(!(e=t.sent)){t.next=7;break}return r=v(e,n),this.currentClassesColors=r,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"loadFonts",value:(m=h(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("fonts");case 2:if(!(e=t.sent)){t.next=6;break}return this.currentFonts=e,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"loadPixelValues",value:(g=h(c().mark((function t(){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("pixelValues");case 2:if(!(r=t.sent)){t.next=7;break}return n=v(r,e),this.currentPixelValues=n,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"loadThemes",value:(y=h(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("themes");case 2:if(null==(e=t.sent)){t.next=8;break}return console.log("themes loaded: ",e),this.currentThemes=e,this.saveThemes(),t.abrupt("return",e);case 8:return console.error("No themes loaded: ",e),t.abrupt("return");case 10:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"isTwemojiEnabled",value:(f=h(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["twemoji"]);case 2:return t.t0=t.sent.twemoji,t.abrupt("return",1==t.t0);case 4:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"loadBackgrounds",value:(d=h(c().mark((function t(){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("backgrounds");case 2:if(null==(e=t.sent)){t.next=7;break}return r=v(e,a),this.currentBackgrounds=r,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"u_onlyExportChanged",value:function(t,e){var r={},n=0;for(var o in console.log("Data: ",e),console.log("Current data: ",t),e){var a=t[o];a!=e[o]&&(r[o]=a,n++)}return console.log("Exporting ",n," attributes"),r}},{key:"saveThemes",value:function(){console.log("Save themes: ",this.currentThemes),chrome.storage.local.set({themes:this.currentThemes})}},{key:"saveColors",value:function(){chrome.storage.local.set({colors:this.currentColors})}},{key:"saveFonts",value:function(){chrome.storage.local.set({fonts:this.currentFonts})}},{key:"savePixelValues",value:function(){chrome.storage.local.set({pixelValues:this.currentPixelValues})}},{key:"saveClassColors",value:function(){console.log("Save: ",this.currentClassesColors),chrome.storage.local.set({classColors:this.currentClassesColors})}},{key:"saveBackgrounds",value:function(){console.log("Save: ",this.currentBackgrounds),chrome.storage.local.set({backgrounds:this.currentBackgrounds})}},{key:"saveAll",value:function(){this.saveColors(),this.saveClassColors(),this.savePixelValues(),this.saveFonts(),this.saveBackgrounds()}}],u&&s(o.prototype,u),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,u,d,f,y,g,m,b,w,k}();const m=function(){var t={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(t){var e="string"==typeof t?parseInt(t,16):t;return e<65536?u(e):u(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(c(this.alt,!1),this)},parse:function(e,r){return r&&"function"!=typeof r||(r={callback:r}),("string"==typeof e?h:f)(e,{callback:r.callback||s,attributes:"function"==typeof r.attributes?r.attributes:y,base:"string"==typeof r.base?r.base:t.base,ext:r.ext||t.ext,size:r.folder||(n=r.size||t.size,"number"==typeof n?n+"x"+n:n),className:r.className||t.className,onerror:r.onerror||t.onerror});var n},replace:v,test:function(t){r.lastIndex=0;var e=r.test(t);return r.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},r=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,n=/\uFE0F/g,o=String.fromCharCode(8205),a=/[&<>'"]/g,i=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,u=String.fromCharCode;return t;function c(t,e){return document.createTextNode(e?t.replace(n,""):t)}function s(t,e){return"".concat(e.base,e.size,"/",t,e.ext)}function l(t,e){for(var r,n,o=t.childNodes,a=o.length;a--;)3===(n=(r=o[a]).nodeType)?e.push(r):1!==n||"ownerSVGElement"in r||i.test(r.nodeName.toLowerCase())||l(r,e);return e}function d(t){return g(t.indexOf(o)<0?t.replace(n,""):t)}function f(t,e){for(var n,o,a,i,u,s,f,h,p,y,v,g,m,b=l(t,[]),w=b.length;w--;){for(a=!1,i=document.createDocumentFragment(),s=(u=b[w]).nodeValue,h=0;f=r.exec(s);){if((p=f.index)!==h&&i.appendChild(c(s.slice(h,p),!0)),g=d(v=f[0]),h=p+v.length,m=e.callback(g,e),g&&m){for(o in(y=new Image).onerror=e.onerror,y.setAttribute("draggable","false"),n=e.attributes(v,g))n.hasOwnProperty(o)&&0!==o.indexOf("on")&&!y.hasAttribute(o)&&y.setAttribute(o,n[o]);y.className=e.className,y.alt=v,y.src=m,a=!0,i.appendChild(y)}y||i.appendChild(c(v,!1)),y=null}a&&(h<s.length&&i.appendChild(c(s.slice(h),!0)),u.parentNode.replaceChild(i,u))}return t}function h(t,e){return v(t,(function(t){var r,n,o=t,i=d(t),u=e.callback(i,e);if(i&&u){for(n in o="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',t,'"',' src="',u,'"'),r=e.attributes(t,i))r.hasOwnProperty(n)&&0!==n.indexOf("on")&&-1===o.indexOf(" "+n+"=")&&(o=o.concat(" ",n,'="',r[n].replace(a,p),'"'));o=o.concat("/>")}return o}))}function p(t){return e[t]}function y(){return null}function v(t,e){return String(t).replace(r,e)}function g(t,e){for(var r=[],n=0,o=0,a=0;a<t.length;)n=t.charCodeAt(a++),o?(r.push((65536+(o-55296<<10)+(n-56320)).toString(16)),o=0):55296<=n&&n<=56319?o=n:r.push(n.toString(16));return r.join(e||"-")}}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function k(){k=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new j(n||[]);return o(i,"_invoke",{value:C(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function w(){}var x={};s(x,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(T([])));E&&E!==r&&n.call(E,i)&&(x=E);var L=w.prototype=g.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==b(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=B(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function B(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,B(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(b(e)+" is not iterable")}return m.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:m,configurable:!0}),m.displayName=s(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},P(A.prototype),s(A.prototype,u,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new A(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(L),s(L,c,"Generator"),s(L,i,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function x(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function E(t,e,r){return(e=L(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var P=function(t){if("true"!=t.getAttribute("twemoji-processed"))try{var e=t.parentElement;if(null==e)return;var r=e.parentNode;if(null==r)throw console.log(e),new Error("No original parent");var n=t.getAttribute("alt"),o=t.getBoundingClientRect();if(null==n)console.error("Unicode not found");else{null==t.querySelector(".fui-ChatMyMessage")?e.outerHTML="".concat(n):e.innerHTML="".concat(n);var a=m.parse(r,{base:"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/",folder:"svg",ext:".svg"});a.style.width="".concat(o.width,"px !important"),a.style.height="".concat(o.height,"px !important")}}catch(t){console.error("Failed to convert emoji img to chr",t)}finally{t.setAttribute("twemoji-processed","true")}},A=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,"nodeProcessQueueEmoji",[]),E(this,"nodeProcessQueueMessages",[]),this.dataManager=e},e=[{key:"p_dataManagerExists",value:function(){if(null==this.dataManager)throw new Error("Where is data manager")}},{key:"applyTwemoji",value:(r=k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.p_dataManagerExists(),t.next=3,this.dataManager.isTwemojiEnabled();case 3:if(0!=t.sent){t.next=7;break}return console.error("Twemoji is not enabled.Skipping Twemoji"),t.abrupt("return");case 7:this.detectNewMessages();case 8:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var a=r.apply(t,e);function i(t){x(a,n,o,i,u,"next",t)}function u(t){x(a,n,o,i,u,"throw",t)}i(void 0)}))},function(){return n.apply(this,arguments)})},{key:"processQueueEmojis",value:function(){var t=this;requestIdleCallback((function(){t.nodeProcessQueueEmoji.splice(0,50).forEach((function(t){return P(t)})),t.nodeProcessQueueEmoji.length>0&&t.processQueueEmojis()}),{timeout:500})}},{key:"processQueueMessages",value:function(){var t=this;requestIdleCallback((function(){t.nodeProcessQueueMessages.splice(0,50).forEach((function(t){return P(t)})),t.nodeProcessQueueMessages.length>0&&t.processQueueMessages()}),{timeout:500})}},{key:"emojiPrebatchProcess",value:function(t){t instanceof HTMLImageElement&&(t.removeAttribute("src"),t.style.display="none")}},{key:"detectNewMessages",value:function(){var t=this,e=document.body;new MutationObserver((function(e,r){var n,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return w(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;"childList"===a.type&&a.addedNodes.length>0&&a.addedNodes.forEach((function(e){(e instanceof HTMLElement||e instanceof DocumentFragment)&&(e instanceof HTMLElement&&"message-wrapper"===e.dataset.testid&&(t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"chat-pane-compose-message-footer"===e.dataset.tid&&(t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"http://schema.skype.com/Emoji"==e.getAttribute("itemtype")&&(t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"message-hover-reactions"===e.dataset.inp&&(t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"emoji-tab-category-grid"===e.dataset.tid&&(t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)),(e instanceof HTMLElement||e instanceof DocumentFragment)&&(e.querySelectorAll('[data-testid="message-wrapper"]').forEach((function(e,r){return t.nodeProcessQueueMessages.push(e)})),e.querySelectorAll('[itemtype="http://schema.skype.com/Emoji"]').forEach((function(e,r){t.emojiPrebatchProcess(e),t.nodeProcessQueueEmoji.push(e)})),e.querySelectorAll('[data-inp="message-hover-reactions"]').forEach((function(e,r){return t.nodeProcessQueueMessages.push(e)})),e.querySelectorAll('[data-tid="emoji-tab-category-grid"]').forEach((function(e,r){return t.nodeProcessQueueMessages.push(e)}))))}))}}catch(t){o.e(t)}finally{o.f()}t.nodeProcessQueueMessages.length>0&&t.processQueueMessages(),t.nodeProcessQueueEmoji.length>0&&t.processQueueEmojis()})).observe(e,{childList:!0,subtree:!0})}}],e&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function O(t,e,r){return(e=j(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var T=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"styleElement",null),O(this,"emojithis",null),O(this,"observer",null),O(this,"blurBackgroundObserver",null),O(this,"blurElementQueue",[]),this.dataManager=e},(e=[{key:"p_dataManagerExists",value:function(){if(null==this.dataManager)throw new Error("Where is data manager")}},{key:"p_emojiThisExists",value:function(){if(null==this.emojithis)throw new Error("where emojithis")}},{key:"p_addBackgroundImageToMessageBackground",value:function(t){if(null==this.dataManager)throw new Error("No data manager");var e=this.dataManager.currentBackgrounds.channelAndChatBackground;if(null==e)throw new Error("Data style failed to find");if("none"==e)return t.style.background="",void console.log("Backgrounds: none applied");t.style.background=e,console.log("Backgrounds: applied: ",e)}},{key:"p_getBackgroundRGBA",value:function(t){var e=window.getComputedStyle(t),r=e.backgroundColor.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);return r?{r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:void 0!==r[4]?Math.min(parseFloat(r[4]),parseFloat(e.opacity)):1}:null}},{key:"blurProcessElement",value:function(t){if(null==t.closest(".apps-menu")&&!(t instanceof HTMLButtonElement)&&null!=this.dataManager){var e=this.p_getBackgroundRGBA(t);if(null!=e){var r=Math.min(e.a,parseFloat(this.dataManager.currentBackgrounds.interfaceOpacity));""!=t.style.backgroundColor&&(t.style.backgroundColor="",console.log("Removing bg")),t.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(r,")"),r>0&&(t.style.backdropFilter=this.dataManager.currentBackgrounds.backdropFilter)}}}},{key:"p_applyFullBackground",value:function(){if(null!=this.dataManager){var t=this.dataManager.currentBackgrounds.channelAndChatBackground;if(null==t)throw new Error("Data style failed to find");var e=document.getElementById("app");if(null==e)throw new Error("App not found");e.style.background="none"==t?"":t}}},{key:"p_blurQueueProcess",value:function(){var t=this;this.blurElementQueue.forEach((function(e){return t.blurProcessElement(e)})),this.blurElementQueue.length=0}},{key:"p_createBlurMutationObserver",value:function(){var t=this;document.querySelector("#app").querySelectorAll("*").forEach((function(e){t.blurElementQueue.push(e)})),this.blurBackgroundObserver=new MutationObserver((function(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return B(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;"childList"==o.type&&o.addedNodes.forEach((function(e){if(e.nodeType==Node.ELEMENT_NODE){var r=e;t.blurElementQueue.push(r),r.querySelectorAll("*").forEach((function(e){t.blurElementQueue.push(e)}))}}))}}catch(t){n.e(t)}finally{n.f()}t.p_blurQueueProcess()})),this.blurBackgroundObserver.observe(document.querySelector("#app"),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]})}},{key:"p_createMutationObserver",value:function(){var t=this;this.observer=new MutationObserver((function(e){var r=document.querySelector('[data-tid="message-pane-layout"]');r&&t.p_addBackgroundImageToMessageBackground(r)})),this.observer.observe(document.body,{childList:!0,subtree:!0})}},{key:"getFui",value:function(){var t=".fui-FluentProviderr0";return"assignments.onenote.com"==window.location.hostname?(console.log("Detected assignments tab, set fluent provider to EDUASSIGN-r0"),t=".fui-FluentProviderEDUASSIGN-r0"):"outlook.office.com"==window.location.hostname?t=".fui-FluentProviderr0":console.log("Detected main Teams interface, set fluent provider to r0"),t}},{key:"applyColors",value:function(){this.p_dataManagerExists(),console.log("applying"),this.styleElement=document.createElement("style"),this.styleElement.type="text/css";var t="";for(var e in this.dataManager.currentColors)console.log("co: applying ",e),t+="".concat(e,": ").concat(this.dataManager.currentColors[e]," !important;\n");for(var r in this.dataManager.currentPixelValues)console.log("px: applying ",r),t+="".concat(r,": ").concat(this.dataManager.currentPixelValues[r]," !important; \n");var n="";for(var a in this.dataManager.currentClassesColors){var i=o[a];n+=".".concat(a,"{").concat(i,": ").concat(this.dataManager.currentClassesColors[a]," !important;}\n")}this.styleElement.innerHTML="".concat(this.getFui()," {\n").concat(t,"\n} ").concat(n,"\n").concat("\n        \n        .emoji{\n            width: 1em;\n            height: 1em;\n            margin-right: 2px;\n            vertical-align: middle;\n        }\n        "),console.log(this.styleElement.innerHTML),document.head.appendChild(this.styleElement)}},{key:"applyBackgrounds",value:function(){var t=this;if(null!=this.dataManager){this.p_applyFullBackground();var e="true"===this.dataManager.currentBackgrounds.fullBackgroundExperience;null==this.observer&&0==e&&(console.log("INITIALIZE MUTATION OBSERVER"),this.p_createMutationObserver(),document.querySelectorAll('[data-tid="message-pane-layout"]').forEach((function(e){t.p_addBackgroundImageToMessageBackground(e)}))),null==this.blurBackgroundObserver&&1==e&&(console.log("INITIALIZE BLUR MUTATION OBSERVER"),this.p_createBlurMutationObserver())}}},{key:"applyFonts",value:function(t){if(this.p_dataManagerExists(),this.emojithis=document.createElement("style"),this.emojithis.type="text/css",this.p_emojiThisExists(),null!=this.dataManager.currentFonts){this.emojithis=document.createElement("style"),this.emojithis.type="text/css";var e="--fontFamilyBase: ".concat(this.dataManager.currentFonts.fontFamily," !important;}"),r=this.dataManager.currentFonts.imports,n="".concat(this.getFui()," {\n").concat(e,"\n}"),o="* {\n".concat(e,"\n}");return this.emojithis.innerHTML="".concat(r,"\n").concat(o,"\n").concat(n),console.log(this.emojithis.innerHTML),null==t?(document.head.appendChild(this.emojithis),this.emojithis):(t.appendChild(this.emojithis),this.emojithis)}}},{key:"deleteFontsStyle",value:function(){null!=this.emojithis&&(this.emojithis.remove(),this.emojithis=null)}},{key:"deleteStyle",value:function(){null!=this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}}])&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function N(){N=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==M(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(M(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function G(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}var D=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stylesRuntime=r,this.dataManager=e},e=[{key:"detectChange",value:function(){var t=this;console.log("start change detect"),chrome.storage.onChanged.addListener(function(){var e,r=(e=N().mark((function e(r,n){var o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"!==n){e.next=36;break}e.t0=N().keys(r);case 2:if((e.t1=e.t0()).done){e.next=36;break}if(o=e.t1.value,!r.hasOwnProperty(o)){e.next=34;break}if("colors"!=o){e.next=11;break}return console.log("Change detected!"),e.next=9,t.dataManager.loadColors();case 9:t.stylesRuntime.deleteStyle(),t.stylesRuntime.applyColors();case 11:if("fonts"!=o){e.next=17;break}return console.log("Change detected fonts"),e.next=15,t.dataManager.loadFonts();case 15:t.stylesRuntime.deleteFontsStyle(),t.stylesRuntime.applyFonts(null);case 17:if("classColors"!=o){e.next=23;break}return console.log("Change detected classes"),e.next=21,t.dataManager.loadClassColors();case 21:t.stylesRuntime.deleteStyle(),t.stylesRuntime.applyColors();case 23:if("pixelValues"!=o){e.next=29;break}return console.log("Change detected pixel values"),e.next=27,t.dataManager.loadPixelValues();case 27:t.stylesRuntime.deleteStyle(),t.stylesRuntime.applyColors();case 29:if("backgrounds"!=o){e.next=34;break}return console.log("Change detected backgrounds"),e.next=33,t.dataManager.loadBackgrounds();case 33:t.stylesRuntime.applyBackgrounds();case 34:e.next=2;break;case 36:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(t){_(a,n,o,i,u,"next",t)}function u(t){_(a,n,o,i,u,"throw",t)}i(void 0)}))});return function(t,e){return r.apply(this,arguments)}}())}}],e&&I(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),q=new DOMParser;function R(t){return new Promise((function(e,r){var n=new MutationObserver((function(r){var o=document.querySelector(t);o&&(n.disconnect(),e(o))}));n.observe(document.body,{childList:!0,subtree:!0}),setTimeout((function(){n.disconnect(),r(new Error("Element not found within time limit"))}),2e4)}))}function U(t){return q.parseFromString(t,"text/html").body.firstElementChild}var Y="https://apiteamsplus.pythonanywhere.com";function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function V(){V=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==H(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(H(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function W(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function X(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){W(a,n,o,i,u,"next",t)}function u(t){W(a,n,o,i,u,"throw",t)}i(void 0)}))}}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function Q(t,e,r){return(e=J(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}var K=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,"themeShopUI",null),Q(this,"shopUiVisible",!1),this.parser=new DOMParser,this.authProvider=n,this.currentSearchQuery="",this.themeProvider=e,this.p_init(r)},e=[{key:"p_injectButton",value:(l=X(V().mark((function t(e){var r=this;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addAppAndGetButton("Browse Themes","https://www.svgrepo.com/show/148598/shop-cart.svg",'\n            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t viewBox="0 0 44.16 44.16" xml:space="preserve">\n<g>\n\t<path style="fill:var(--colorNeutralForeground3);" d="M44.16,6.6H11.592L10.66,1.179H2.408C1.076,1.179,0,2.257,0,3.588v2.408h6.602l4.248,24.709\n\t\tc0.094,0.544,0.617,0.985,1.17,0.985h28.527c1.332,0,2.41-1.077,2.41-2.411v-2.406H15.078l-0.587-3.414h22.042\n\t\tc2.66,0,5.172-2.128,5.611-4.75L44.16,6.6z"/>\n\t<circle style="fill:var(--colorNeutralForeground3);" cx="19.47" cy="38.817" r="4.165"/>\n\t<path style="fill:var(--colorNeutralForeground3);" d="M29.762,38.816c0,2.299,1.863,4.164,4.162,4.164c2.301,0,4.168-1.865,4.168-4.164\n\t\tc0-2.299-1.867-4.166-4.168-4.166C31.625,34.65,29.762,36.518,29.762,38.816z"/>\n</g>\n</svg>\n            ');case 2:t.sent.forEach((function(t){t.addEventListener("click",(function(){r.shopUiVisible?(r.shopUiVisible=!1,r.p_hideThemeShopUI()):(r.shopUiVisible=!0,r.p_showThemeShopUI())}))})),console.log("Injected button");case 5:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})},{key:"loaderState",value:function(t){if(null!=this.themeShopUI){var e=this.themeShopUI.querySelector("#listings-loader");null!=e&&(t?(e.style.display="block",e.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"})):(e.animate([{transform:"translateY(0px)",opacity:"1"},{transform:"translateY(-15px)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((function(){e.style.display="none"}),500)))}}},{key:"p_didIstarThis",value:function(t){var e=this;return new Promise((function(r,n){null!=e.authProvider.currentToken?fetch("".concat(Y,"/api/v1/themes/wait_did_i_star_this?name=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.authProvider.currentToken)}}).then((function(t){return console.log(t),t.json()})).then((function(t){if(null==t.success||0==t.success)throw new Error("Success field not found or unsuccessfull");if(null==t.message)throw new Error("No message field found");if(null==t.data)throw new Error("No data field found");r(t.data)})).catch((function(t){console.error("Error:",t),n(t)})):n("no token")}))}},{key:"star",value:(s=X(V().mark((function t(e){var r=this;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fetch,t.t1="".concat(Y,"/api/v1/themes/star"),t.t2={"Content-Type":"application/json"},t.t3=JSON,t.t4=e,t.next=7,this.authProvider.getToken();case 7:t.t5=t.sent,t.t6={name:t.t4,token:t.t5},t.t7=t.t3.stringify.call(t.t3,t.t6),t.t8={method:"POST",headers:t.t2,body:t.t7},(0,t.t0)(t.t1,t.t8).then((function(t){return console.log(t),t.json()})).then((function(t){if(null==t.success||0==t.success)throw new Error("Success field not found or unsuccessfull");if(null==t.message)throw new Error("No message field found");console.log("Liked!"),r.p_refreshListings(r.currentSearchQuery)})).catch((function(t){console.error("Error:",t)}));case 12:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"changeIconStroke",value:(c=X(V().mark((function t(e,r){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.p_didIstarThis(e);case 3:1==t.sent?(r.classList.add("starred"),console.log("Starred")):console.log("Not starred"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t,e){return c.apply(this,arguments)})},{key:"p_createCard",value:function(t,e,r,n,o){var a=this,i=U('\n<div class="listing-card">\n    <h3 class="theme-name">Theme</h3>\n    <p class="theme-description">This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look\n        very pretty!</p>\n    <div class="actions">\n        <button class="theme-install" id="theme-install">Install</button>\n        <button class="star" id="star-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none" class="star-icon">\n                <path d="M11.2691 4.41115C11.5006 3.89177 11.6164 3.63208 11.7776 3.55211C11.9176 3.48263 12.082 3.48263 12.222 3.55211C12.3832 3.63208 12.499 3.89177 12.7305 4.41115L14.5745 8.54808C14.643 8.70162 14.6772 8.77839 14.7302 8.83718C14.777 8.8892 14.8343 8.93081 14.8982 8.95929C14.9705 8.99149 15.0541 9.00031 15.2213 9.01795L19.7256 9.49336C20.2911 9.55304 20.5738 9.58288 20.6997 9.71147C20.809 9.82316 20.8598 9.97956 20.837 10.1342C20.8108 10.3122 20.5996 10.5025 20.1772 10.8832L16.8125 13.9154C16.6877 14.0279 16.6252 14.0842 16.5857 14.1527C16.5507 14.2134 16.5288 14.2807 16.5215 14.3503C16.5132 14.429 16.5306 14.5112 16.5655 14.6757L17.5053 19.1064C17.6233 19.6627 17.6823 19.9408 17.5989 20.1002C17.5264 20.2388 17.3934 20.3354 17.2393 20.3615C17.0619 20.3915 16.8156 20.2495 16.323 19.9654L12.3995 17.7024C12.2539 17.6184 12.1811 17.5765 12.1037 17.56C12.0352 17.5455 11.9644 17.5455 11.8959 17.56C11.8185 17.5765 11.7457 17.6184 11.6001 17.7024L7.67662 19.9654C7.18404 20.2495 6.93775 20.3915 6.76034 20.3615C6.60623 20.3354 6.47319 20.2388 6.40075 20.1002C6.31736 19.9408 6.37635 19.6627 6.49434 19.1064L7.4341 14.6757C7.46898 14.5112 7.48642 14.429 7.47814 14.3503C7.47081 14.2807 7.44894 14.2134 7.41394 14.1527C7.37439 14.0842 7.31195 14.0279 7.18708 13.9154L3.82246 10.8832C3.40005 10.5025 3.18884 10.3122 3.16258 10.1342C3.13978 9.97956 3.19059 9.82316 3.29993 9.71147C3.42581 9.58288 3.70856 9.55304 4.27406 9.49336L8.77835 9.01795C8.94553 9.00031 9.02911 8.99149 9.10139 8.95929C9.16534 8.93081 9.2226 8.8892 9.26946 8.83718C9.32241 8.77839 9.35663 8.70162 9.42508 8.54808L11.2691 4.41115Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                </svg>\n            <span>30k</span>\n        </button>\n    </div>\n</div>\n'),u=i.querySelector(".theme-name"),c=i.querySelector(".theme-description"),s=i.querySelector("span"),l=i.querySelector("#star-btn"),d=i.querySelector("#theme-install");if(null!=u&&null!=c&&null!=s&&null!=l&&null!=d){var f=l.querySelector("svg");if(null!=f)return u.textContent=t,c.textContent=e,s.textContent=o.toString(),this.changeIconStroke(t,f),l.addEventListener("click",X(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("The button got clicked!"),e.next=3,a.authProvider.getToken();case 3:if(e.sent){e.next=7;break}return alert("You must be logged in to do this"),e.abrupt("return");case 7:a.star(t);case 8:case"end":return e.stop()}}),e)})))),d.addEventListener("click",X(V().mark((function t(){var e,n,o,i;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.themeProvider.dataManager.loadThemes();case 3:if(a.themeProvider.p_syncInstanceWithDataManager(),e=a.themeProvider.p_isThemeValid(r)){for(n=1,o=e.name,i=o;a.themeProvider.currentThemes[i];)i="".concat(o," (").concat(n,")"),n++;a.themeProvider.addTheme(i,r),alert("Added theme")}else alert("Failed to parse theme");t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to add theme: ",t.t0),alert("Failed to add theme: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))),i}}},{key:"p_refreshListings",value:function(t){var e=this;if(null!=this.themeShopUI){var r=this.themeShopUI.querySelector(".listings");null!=r&&(r.innerHTML="",this.loaderState(!0),fetch("".concat(Y,"/api/v1/themes/get?search=").concat(t)).then((function(t){return t.json()})).then((function(t){for(var n in console.log("Data:",t.data),t.data){var o=t.data[n],a=e.p_createCard(o.name,o.desc,o.data,o.author,o.stars);a&&(a.style.opacity="0",a.style.transform="translateY(-15px)",r.appendChild(a),a.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}))}e.loaderState(!1)})).catch((function(t){e.loaderState(!1),console.error("Error:",t),alert("Error")})))}}},{key:"p_hideThemeShopUI",value:(u=X(V().mark((function t(){var e=this;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.themeShopUI&&(this.themeShopUI.animate([{transform:"translateY(-50%) translateX(-50%)",opacity:"1"},{transform:"translateY(-60%) translateX(-50%)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((function(){null!=e.themeShopUI&&(e.themeShopUI.style.display="none")}),500));case 1:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"p_hideThemeShopUIInstant",value:function(){null!=this.themeShopUI&&(this.themeShopUI.style.display="none")}},{key:"p_updateCoinCount",value:(i=X(V().mark((function t(){var e,r;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.themeShopUI){t.next=2;break}return t.abrupt("return");case 2:if(null!=(e=this.themeShopUI.querySelector("#coins"))){t.next=5;break}return t.abrupt("return");case 5:if(null!=this.authProvider.currentToken){t.next=8;break}return e.textContent="Logged out",t.abrupt("return");case 8:r=this.authProvider.currentToken,fetch("".concat(Y,"/api/v1/user/get_coins"),{headers:{Authorization:"Bearer ".concat(r)}}).then((function(t){if(200!=t.status)throw new Error("Failed to get coin count");return t.json()})).then((function(t){var r=t.data;e.textContent="".concat(r," coins")})).catch((function(t){console.error(t),alert("Failed to fetch number of coins: "+t)}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"p_showThemeShopUI",value:(a=X(V().mark((function t(){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.themeShopUI&&(this.themeShopUI.style.display="flex",this.themeShopUI.style.opacity="0",this.themeShopUI.animate([{transform:"translateY(-65%) translateX(-50%)",opacity:"0"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}),this.p_refreshListings(this.currentSearchQuery),this.p_updateCoinCount());case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"p_injectUi",value:(o=X(V().mark((function t(){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.themeShopUI=U('\n<div class="main-container">\n    <div class="top-navbar">\n        <input type="text" name="" id="container-search" class="container-search" placeholder="Search" autocomplete="off">\n        <button class="container-search-submit" id="search-submit">Search</button>\n        <p class="container-n-points" id="coins">0 coins</p>\n        <button class="shop-close-button" id="shopCloseButton">\n            <img src="https://www.svgrepo.com/show/12848/x-symbol.svg" alt="X">\n        </button>\n    </div>\n    <div class="listings">\n        <div class="listings-loader-parent" id="listings-loader">\n            <span class="listings-loader"></span>\n        </div>\n    </div>\n</div>\n'),document.body.appendChild(this.themeShopUI),this.p_hideThemeShopUIInstant();case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"p_searchBar",value:(n=X(V().mark((function t(){var e,r,n=this;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.themeShopUI){t.next=2;break}return t.abrupt("return");case 2:if(e=this.themeShopUI.querySelector("#container-search"),r=this.themeShopUI.querySelector("#search-submit"),null!=e&&null!=r){t.next=6;break}return t.abrupt("return");case 6:r.addEventListener("click",(function(){n.currentSearchQuery=e.value,n.p_refreshListings(n.currentSearchQuery)})),e.addEventListener("input",(function(){n.currentSearchQuery=e.value,n.p_refreshListings(n.currentSearchQuery)}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"p_closeButton",value:function(){var t=this;null!=this.themeShopUI&&this.themeShopUI.querySelector("#shopCloseButton").addEventListener("click",(function(){t.shopUiVisible=!1,t.p_hideThemeShopUI()}))}},{key:"p_init",value:(r=X(V().mark((function t(e){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.p_injectButton(e),this.p_injectUi(),this.p_searchBar(),this.p_closeButton();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}],e&&z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,a,i,u,c,s,l}(),Z=function(){return"y"===prompt("Confirm? Type 'y' or 'n'")};function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(){rt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==$(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError($(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function nt(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ot(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){nt(a,n,o,i,u,"next",t)}function u(t){nt(a,n,o,i,u,"throw",t)}i(void 0)}))}}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ut(n.key),n)}}function it(t,e,r){return(e=ut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}var ct=function(){return o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,"currentThemes",i),this.dataManager=e},u=[{key:"p_syncDataManager",value:function(){this.p_dataManagerExists(),this.dataManager.currentThemes=this.currentThemes}},{key:"p_syncInstanceWithDataManager",value:function(){this.p_dataManagerExists(),this.currentThemes=this.dataManager.currentThemes}},{key:"p_dataManagerExists",value:function(){if(null==this.dataManager)throw new Error("Where is data manager")}},{key:"p_isThemeValid",value:function(o){var i=JSON.parse(o);if(null!=i.data)return null==i.data.classColors&&(console.error("Field not found. Override with default."),i.data.classColors=n),null==i.data.varColors&&(console.error("Field not found. Override with default."),i.data.varColors=t),null==i.data.fonts&&(console.error("Field not found. Override with default."),i.data.fonts=r),null==i.data.otherSettings&&(console.error("Field not found. Override with default."),i.data.otherSettings=e),null==i.data.twemojiSupport&&(console.error("Field not found. Override with default."),i.data.twemojiSupport=!1),null==i.data.backgrounds&&(console.error("Backgrounds field not found. Overriding with default."),i.data.backgrounds=a),i;console.error("Data field not found; failed to load theme")}},{key:"addTheme",value:function(t,e){console.log(t,e),this.p_syncInstanceWithDataManager(),this.p_dataManagerExists(),console.log("Adding theme ",t," to current themes"),this.currentThemes[t]=e,this.p_syncDataManager(),this.dataManager.saveThemes(),this.dataManager.loadThemes(),this.p_syncDataManager(),console.log("Added theme")}},{key:"p_generateThemeData",value:(l=ot(rt().mark((function r(o){var i;return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("GENERATE DATA"),r.t0=this.dataManager.u_onlyExportChanged(this.dataManager.currentColors,t),r.t1=this.dataManager.u_onlyExportChanged(this.dataManager.currentClassesColors,n),r.t2=this.dataManager.currentFonts,r.t3=this.dataManager.u_onlyExportChanged(this.dataManager.currentPixelValues,e),r.t4=this.dataManager.u_onlyExportChanged(this.dataManager.currentBackgrounds,a),r.next=8,this.dataManager.isTwemojiEnabled();case 8:return r.t5=r.sent,r.t6={varColors:r.t0,classColors:r.t1,fonts:r.t2,otherSettings:r.t3,backgrounds:r.t4,twemojiSupport:r.t5},r.t7=o,r.t8=1,i={data:r.t6,name:r.t7,data_version:r.t8},console.log("EXPORT: ",i.data.backgrounds),r.abrupt("return",JSON.stringify(i));case 15:case"end":return r.stop()}}),r,this)}))),function(t){return l.apply(this,arguments)})},{key:"applyTheme",value:(s=ot(rt().mark((function t(e){var r,n,o,a,i,u,c,s;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.p_dataManagerExists(),console.log(this.currentThemes),r=this.currentThemes[e],console.log(r),null!=(n=this.p_isThemeValid(r))){t.next=7;break}throw Error("error");case 7:if(o=et({},this.dataManager.currentColors),a=et({},this.dataManager.currentClassesColors),i=et({},this.dataManager.currentPixelValues),u=et({},this.dataManager.currentFonts),c=et({},this.dataManager.currentBackgrounds),t.prev=12,this.dataManager.currentColors=n.data.varColors,this.dataManager.currentClassesColors=n.data.classColors,this.dataManager.currentFonts=n.data.fonts,this.dataManager.currentPixelValues=n.data.otherSettings,this.dataManager.currentBackgrounds=n.data.backgrounds,chrome.storage.local.set({twemoji:n.data.twemojiSupport}),!(s=document.querySelector("#twemojiSupport"))){t.next=25;break}return t.next=23,this.dataManager.isTwemojiEnabled();case 23:s.checked=t.sent,s.addEventListener("input",(function(){console.log("Save Twemoji state"),chrome.storage.local.set({twemoji:s.checked})}));case 25:this.dataManager.saveAll(),console.log("Successfully loaded theme."),t.next=39;break;case 29:t.prev=29,t.t0=t.catch(12),console.error("Failed to apply theme ",t.t0),console.error("Reverting to original state."),this.dataManager.currentColors=o,this.dataManager.currentFonts=u,this.dataManager.currentPixelValues=i,this.dataManager.currentClassesColors=a,this.dataManager.currentBackgrounds=c,console.log("Reverted to original state.");case 39:return t.prev=39,console.log("Successfully applied theme with no issues."),t.finish(39);case 42:case"end":return t.stop()}}),t,this,[[12,29,39,42]])}))),function(t){return s.apply(this,arguments)})},{key:"updateThemesList",value:(c=ot(rt().mark((function t(){var e,r,n,o,a=this;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.p_dataManagerExists(),console.log("Updating theme list"),null!=(e=document.querySelector("#availableThemes"))){t.next=6;break}return console.error("Failed to update available themes: element not found"),t.abrupt("return");case 6:return e.innerHTML="",t.next=9,this.dataManager.loadThemes();case 9:r=rt().mark((function t(r){var n,o,i,u,c;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=U('\n                <div class="theme">\n                    <h3 class="theme-title">Dark cozy blue</h3>\n                    <p class="theme-descripton">Color and fonts theme</p>\n                    <div class="actions">\n                        <button class="text-btn" id="apply-btn">Apply</button>\n                        <button class="text-btn" id="export-theme">\n                            Export\n                        </button>\n                        <button class="text-btn" id="delete-theme">\n                            Delete\n                        </button>\n                    </div>\n\n                </div>\n'),o=n.querySelector(".theme-title"),i=n.querySelector("#apply-btn"),u=n.querySelector("#export-theme"),c=n.querySelector("#delete-theme"),null!=o&&null!=u&&null!=i&&null!=c){t.next=7;break}return t.abrupt("return",{v:void 0});case 7:o.textContent="".concat(r),i.textContent="Load",c.textContent="Delete",u.textContent="Export",i.addEventListener("click",ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=Z()){t.next=3;break}return alert("User has not confirmed"),t.abrupt("return");case 3:return t.next=5,a.dataManager.loadThemes();case 5:return a.currentThemes=a.dataManager.currentThemes,t.next=8,a.applyTheme(r);case 8:alert("Successfully applied theme. Please close and reopen the popup to see changes in the advanced tab.");case 9:case"end":return t.stop()}}),t)})))),c.addEventListener("click",ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=Z()){t.next=3;break}return alert("User has not confirmed"),t.abrupt("return");case 3:t.prev=3,delete a.dataManager.currentThemes[r],a.dataManager.saveThemes(),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(3),console.error("Failed to delete: ",t.t0),alert("Failed to delete theme"),t.abrupt("return");case 13:return t.prev=13,t.next=16,a.updateThemesList();case 16:return alert("Successfully deleted the theme"),t.finish(13);case 18:case"end":return t.stop()}}),t,null,[[3,8,13,18]])})))),u.addEventListener("click",ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a.dataManager.currentThemes[r]){t.next=4;break}return console.error("Current theme not found"),alert("Current theme not found"),t.abrupt("return");case 4:return t.next=6,navigator.clipboard.writeText(a.dataManager.currentThemes[r]);case 6:alert("Theme copied to clipboard");case 7:case"end":return t.stop()}}),t)})))),e.appendChild(n);case 15:case"end":return t.stop()}}),t)})),t.t0=rt().keys(this.dataManager.currentThemes);case 11:if((t.t1=t.t0()).done){t.next=19;break}return o=t.t1.value,t.delegateYield(r(o),"t2",14);case 14:if(!(n=t.t2)){t.next=17;break}return t.abrupt("return",n.v);case 17:t.next=11;break;case 19:console.log("Done updating theme list");case 20:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})}],u&&at(o.prototype,u),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,u,c,s,l}(),st={};!function t(e,r,n,o){var a=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix,u=function(){if(!e.OffscreenCanvas)return!1;var t=new OffscreenCanvas(1,1),r=t.getContext("2d");r.fillRect(0,0,1,1);var n=t.transferToImageBitmap();try{r.createPattern(n,"no-repeat")}catch(t){return!1}return!0}();function c(){}function s(t){var n=r.exports.Promise,o=void 0!==n?n:e.Promise;return"function"==typeof o?new o(t):(t(c,c),null)}var l,d,f,h,p,y,v,g,m,b,w,k=(l=u,d=new Map,{transform:function(t){if(l)return t;if(d.has(t))return d.get(t);var e=new OffscreenCanvas(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),d.set(t,e),e},clear:function(){d.clear()}}),x=(p=Math.floor(1e3/60),y={},v=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(f=function(t){var e=Math.random();return y[e]=requestAnimationFrame((function r(n){v===n||v+p-1<n?(v=n,delete y[e],t()):y[e]=requestAnimationFrame(r)})),e},h=function(t){y[t]&&cancelAnimationFrame(y[t])}):(f=function(t){return setTimeout(t,p)},h=function(t){return clearTimeout(t)}),{frame:f,cancel:h}),S=(b={},function(){if(g)return g;if(!n&&a){var e=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{g=new Worker(URL.createObjectURL(new Blob([e])))}catch(t){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("🎊 Could not load worker",t),null}!function(t){function e(e,r){t.postMessage({options:e||{},callback:r})}t.init=function(e){var r=e.transferControlToOffscreen();t.postMessage({canvas:r},[r])},t.fire=function(r,n,o){if(m)return e(r,null),m;var a=Math.random().toString(36).slice(2);return m=s((function(n){function i(e){e.data.callback===a&&(delete b[a],t.removeEventListener("message",i),m=null,k.clear(),o(),n())}t.addEventListener("message",i),e(r,a),b[a]=i.bind(null,{data:{callback:a}})}))},t.reset=function(){for(var e in t.postMessage({reset:!0}),b)b[e](),delete b[e]}}(g)}return g}),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(t,e,r){return function(t,e){return e?e(t):t}(t&&null!=t[e]?t[e]:E[e],r)}function P(t){return t<0?0:Math.floor(t)}function A(t){return parseInt(t,16)}function C(t){return t.map(B)}function B(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:A(e.substring(0,2)),g:A(e.substring(2,4)),b:A(e.substring(4,6))}}function F(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function O(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function j(t,r){var u,c=!t,l=!!L(r||{},"resize"),d=!1,f=L(r,"disableForReducedMotion",Boolean),h=a&&L(r||{},"useWorker")?S():null,p=c?F:O,y=!(!t||!h||!t.__confetti_initialized),v="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function g(e,r,a){for(var c,l,d,f,h=L(e,"particleCount",P),y=L(e,"angle",Number),v=L(e,"spread",Number),g=L(e,"startVelocity",Number),m=L(e,"decay",Number),b=L(e,"gravity",Number),w=L(e,"drift",Number),S=L(e,"colors",C),E=L(e,"ticks",Number),A=L(e,"shapes"),B=L(e,"scalar"),F=!!L(e,"flat"),O=function(t){var e=L(t,"origin",Object);return e.x=L(e,"x",Number),e.y=L(e,"y",Number),e}(e),j=h,T=[],M=t.width*O.x,N=t.height*O.y;j--;)T.push((void 0,void 0,l=(c={x:M,y:N,angle:y,spread:v,startVelocity:g,color:S[j%S.length],shape:A[(f=A.length,Math.floor(Math.random()*(f-0))+0)],ticks:E,decay:m,gravity:b,drift:w,scalar:B,flat:F}).angle*(Math.PI/180),d=c.spread*(Math.PI/180),{x:c.x,y:c.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*c.startVelocity+Math.random()*c.startVelocity,angle2D:-l+(.5*d-Math.random()*d),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:c.color,shape:c.shape,tick:0,totalTicks:c.ticks,decay:c.decay,drift:c.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*c.gravity,ovalScalar:.6,scalar:c.scalar,flat:c.flat}));return u?u.addFettis(T):(u=function(t,e,r,a,u){var c,l,d=e.slice(),f=t.getContext("2d"),h=s((function(e){function s(){c=l=null,f.clearRect(0,0,a.width,a.height),k.clear(),u(),e()}c=x.frame((function e(){!n||a.width===o.width&&a.height===o.height||(a.width=t.width=o.width,a.height=t.height=o.height),a.width||a.height||(r(t),a.width=t.width,a.height=t.height),f.clearRect(0,0,a.width,a.height),(d=d.filter((function(t){return function(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,n=e.x+e.random*e.tiltCos,o=e.y+e.random*e.tiltSin,a=e.wobbleX+e.random*e.tiltCos,u=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",t.beginPath(),i&&"path"===e.shape.type&&"string"==typeof e.shape.path&&Array.isArray(e.shape.matrix))t.fill(function(t,e,r,n,o,a,i){var u=new Path2D(t),c=new Path2D;c.addPath(u,new DOMMatrix(e));var s=new Path2D;return s.addPath(c,new DOMMatrix([Math.cos(i)*o,Math.sin(i)*o,-Math.sin(i)*a,Math.cos(i)*a,r,n])),s}(e.shape.path,e.shape.matrix,e.x,e.y,.1*Math.abs(a-n),.1*Math.abs(u-o),Math.PI/10*e.wobble));else if("bitmap"===e.shape.type){var c=Math.PI/10*e.wobble,s=.1*Math.abs(a-n),l=.1*Math.abs(u-o),d=e.shape.bitmap.width*e.scalar,f=e.shape.bitmap.height*e.scalar,h=new DOMMatrix([Math.cos(c)*s,Math.sin(c)*s,-Math.sin(c)*l,Math.cos(c)*l,e.x,e.y]);h.multiplySelf(new DOMMatrix(e.shape.matrix));var p=t.createPattern(k.transform(e.shape.bitmap),"no-repeat");p.setTransform(h),t.globalAlpha=1-r,t.fillStyle=p,t.fillRect(e.x-d/2,e.y-f/2,d,f),t.globalAlpha=1}else if("circle"===e.shape)t.ellipse?t.ellipse(e.x,e.y,Math.abs(a-n)*e.ovalScalar,Math.abs(u-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):function(t,e,r,n,o,a,i,u){t.save(),t.translate(e,r),t.rotate(a),t.scale(n,o),t.arc(0,0,1,0,u,void 0),t.restore()}(t,e.x,e.y,Math.abs(a-n)*e.ovalScalar,Math.abs(u-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if("star"===e.shape)for(var y=Math.PI/2*3,v=4*e.scalar,g=8*e.scalar,m=e.x,b=e.y,w=5,x=Math.PI/w;w--;)m=e.x+Math.cos(y)*g,b=e.y+Math.sin(y)*g,t.lineTo(m,b),y+=x,m=e.x+Math.cos(y)*v,b=e.y+Math.sin(y)*v,t.lineTo(m,b),y+=x;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(o)),t.lineTo(Math.floor(a),Math.floor(u)),t.lineTo(Math.floor(n),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}(f,t)}))).length?c=x.frame(e):s()})),l=s}));return{addFettis:function(t){return d=d.concat(t),h},canvas:t,promise:h,reset:function(){c&&x.cancel(c),l&&l()}}}(t,T,p,r,a),u.promise)}function m(r){var n=f||L(r,"disableForReducedMotion",Boolean),o=L(r,"zIndex",Number);if(n&&v)return s((function(t){t()}));c&&u?t=u.canvas:c&&!t&&(t=function(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}(o),document.body.appendChild(t)),l&&!y&&p(t);var a={width:t.width,height:t.height};function i(){if(h){var e={getBoundingClientRect:function(){if(!c)return t.getBoundingClientRect()}};return p(e),void h.postMessage({resize:{width:e.width,height:e.height}})}a.width=a.height=null}function m(){u=null,l&&(d=!1,e.removeEventListener("resize",i)),c&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,y=!1)}return h&&!y&&h.init(t),y=!0,h&&(t.__confetti_initialized=!0),l&&!d&&(d=!0,e.addEventListener("resize",i,!1)),h?h.fire(r,a,m):g(r,a,m)}return m.reset=function(){h&&h.reset(),u&&u.reset()},m}function T(){return w||(w=j(null,{useWorker:!0,resize:!0})),w}r.exports=function(){return T().apply(this,arguments)},r.exports.reset=function(){T().reset()},r.exports.create=j,r.exports.shapeFromPath=function(t){if(!i)throw new Error("path confetti are not supported in this browser");var e,r;"string"==typeof t?e=t:(e=t.path,r=t.matrix);var n=new Path2D(e),o=document.createElement("canvas").getContext("2d");if(!r){for(var a,u,c=1e3,s=c,l=c,d=0,f=0,h=0;h<c;h+=2)for(var p=0;p<c;p+=2)o.isPointInPath(n,h,p,"nonzero")&&(s=Math.min(s,h),l=Math.min(l,p),d=Math.max(d,h),f=Math.max(f,p));a=d-s,u=f-l;var y=Math.min(10/a,10/u);r=[y,0,0,y,-Math.round(a/2+s)*y,-Math.round(u/2+l)*y]}return{type:"path",path:e,matrix:r}},r.exports.shapeFromText=function(t){var e,r=1,n="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof t?e=t:(e=t.text,r="scalar"in t?t.scalar:r,o="fontFamily"in t?t.fontFamily:o,n="color"in t?t.color:n);var a=10*r,i=a+"px "+o,u=new OffscreenCanvas(a,a),c=u.getContext("2d");c.font=i;var s=c.measureText(e),l=Math.ceil(s.actualBoundingBoxRight+s.actualBoundingBoxLeft),d=Math.ceil(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent),f=s.actualBoundingBoxLeft+2,h=s.actualBoundingBoxAscent+2;l+=4,d+=4,(c=(u=new OffscreenCanvas(l,d)).getContext("2d")).font=i,c.fillStyle=n,c.fillText(e,f,h);var p=1/r;return{type:"bitmap",bitmap:u.transferToImageBitmap(),matrix:[p,0,0,p,-l*p/2,-d*p/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),st,!1);const lt=st.exports;function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ft(){ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==dt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(dt(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ht(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yt(n.key),n)}}function yt(t){var e=function(t){if("object"!=dt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dt(e)?e:e+""}st.exports.create;var vt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioCtx=e},e=[{key:"loadSound",value:(r=ft().mark((function t(e){var r,n,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("No audio file path provided");case 3:if(r=chrome.runtime.getURL(e),console.log("Attempt to fetch at: ",r),"chrome-extension://invalid/"!=r){t.next=7;break}throw new Error("Chrome runtime returned INVALID url while trying to fetch ".concat(e));case 7:return t.next=9,fetch(r);case 9:if((n=t.sent).ok){t.next=12;break}throw new Error("Failed to fetch audio: ".concat(n.status," ").concat(n.statusText));case 12:return t.next=14,n.arrayBuffer();case 14:return o=t.sent,t.next=17,this.audioCtx.decodeAudioData(o);case 17:this.audioBuffer=t.sent,t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(0),console.error("Error loading sound:",t.t0),t.t0;case 24:case"end":return t.stop()}}),t,this,[[0,20]])})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var a=r.apply(t,e);function i(t){ht(a,n,o,i,u,"next",t)}function u(t){ht(a,n,o,i,u,"throw",t)}i(void 0)}))},function(t){return n.apply(this,arguments)})},{key:"playSound",value:function(t){if(null==this.audioBuffer)throw new Error("Audio buffer has not been defined yet");var e=this.audioCtx.createBufferSource();e.buffer=this.audioBuffer;var r=this.audioCtx.createGain();r.gain.value=t,e.connect(r),r.connect(this.audioCtx.destination),e.start()}}],e&&pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wt(){wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==gt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(gt(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function kt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return xt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function St(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){St(a,n,o,i,u,"next",t)}function u(t){St(a,n,o,i,u,"throw",t)}i(void 0)}))}}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}function Pt(t,e,r){return(e=At(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t){var e=function(t){if("object"!=gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}var Ct=["0","1","2","3","4","5","6","7","8","9"],Bt={0:"assets/digit0.png",1:"assets/digit1.png",2:"assets/digit2.png",3:"assets/digit3.png",4:"assets/digit4.png",5:"assets/digit5.png",6:"assets/digit6.png",7:"assets/digit7.png",8:"assets/digit8.png",9:"assets/digit9.png"},Ft=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pt(this,"audio",new vt(new AudioContext)),Pt(this,"placeAudio",new vt(new AudioContext)),Pt(this,"loseAudio",new vt(new AudioContext)),Pt(this,"winAudio",new vt(new AudioContext)),Pt(this,"rolling",!1),Pt(this,"windowVisible",!1),Pt(this,"noRewardPopupShown",!1),this.currentDigits={},this.authProvider=e,this.windowElement=U('\n        <div class="window">\n        <img class="window-background" src="assets/gamble_bg_normal.png">\n        <div class="counters">\n            <div class="counter-container" id="counter0">\n                <div id="counter" class="counter" data-counter-id="0">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n            <div class="counter-container "  id="counter1">\n                <div id="counter " class="counter " data-counter-id="1">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n            <div class="counter-container "  id="counter2">\n                <div id="counter " class="counter " data-counter-id="2">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n        </div>\n        <button id="roll">Roll</button>\n        <img src="assets/gamble_handle.png" alt="" class="handle-img">\n\n    </div>\n'),document.body.appendChild(this.windowElement),this.windowVisiblity(this.windowVisible),this.p_fixImages(),this.onLoad(),this.p_injectButton()},e=[{key:"p_fixImages",value:(u=Et(wt().mark((function t(){var e,r,n,o,a,i,u,c,s,l,d,f,h;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<10;e++){r='[data-number="'.concat(e,'"]'),n=this.windowElement.querySelectorAll(r),o=kt(n);try{for(o.s();!(a=o.n()).done;)(i=a.value)instanceof HTMLImageElement&&(u=chrome.runtime.getURL(Bt[e]),console.log("Fix url: ".concat(u)),i.src=u)}catch(t){o.e(t)}finally{o.f()}}c=this.windowElement.querySelectorAll(".counter"),s=kt(c);try{for(s.s();!(l=s.n()).done;)d=l.value,f=chrome.runtime.getURL("assets/digitBg.png"),console.log("Fix background on: ",d),d.style.backgroundImage="url(".concat(f,")")}catch(t){s.e(t)}finally{s.f()}h=this.windowElement.querySelector(".window-background"),this.windowElement.querySelector(".counters"),h.src=chrome.runtime.getURL("assets/gamble_bg_normal.png"),this.windowElement.querySelector(".handle-img").src=chrome.runtime.getURL("assets/gamble_handle.png");case 9:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"p_injectButton",value:(i=Et(wt().mark((function t(){var e=this;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.teamsPlusAppsManager.addAppAndGetButton("Fun Minigame","https://www.svgrepo.com/show/402695/slot-machine.svg");case 2:t.sent.forEach((function(t){t.addEventListener("click",(function(){1==e.windowVisible?(e.windowVisible=!1,e.windowVisiblity(!1)):0==e.windowVisible&&(e.windowVisible=!0,e.windowVisiblity(!0))}))})),console.log("Injected button");case 5:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"windowVisiblity",value:function(t){var e=this;if(1==t)this.windowElement.style.display="block",this.windowElement.style.opacity="0",this.windowElement.animate([{opacity:"0",filter:"blur(10px)"},{opacity:"1",filter:"blur(0px)"}],{duration:1e3,easing:"ease-out",iterations:1,fill:"forwards"});else{if(0!=t)throw new Error("Unknown window visibility state: ".concat(t));this.windowElement.animate([{opacity:"1",filter:"blur(0px)"},{opacity:"0",filter:"blur(10px)"}],{duration:1e3,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((function(){e.windowElement.style.display="none"}),1e3)}}},{key:"hideDigits",value:function(t){for(var e=0,r=Ct;e<r.length;e++){var n=r[e],o=t.querySelector('[data-number="'.concat(n,'"]'));o?o.style.display="none":console.error("Number ",n,"not found")}}},{key:"countUp",value:function(t,e,r,n){var o=this;return new Promise((function(a){o.currentDigits[e]+=1,o.currentDigits[e]>Ct.length-1&&(o.currentDigits[e]=0);var i=o.currentDigits[e]-1;0===o.currentDigits[e]&&(i=Ct.length-1),o.hideDigits(t);var u=t.querySelector('[data-number="'.concat(Ct[i],'"]')),c=t.querySelector('[data-number="'.concat(Ct[o.currentDigits[e]],'"]'));if(!c||!u)return console.error("Elements not found: ",Ct[i],Ct[o.currentDigits[e]]),console.error(i,o.currentDigits[e]),void a();c.style.zIndex="1",u.style.zIndex="0",c.style.display="flex",u.style.display="flex";var s="linear";0==n?(console.log("Set ease in"),s="ease-in"):1==n&&(console.log("Set ease out"),s="ease-out"),console.log("Easing style: ",s);var l=c.animate([{transform:"translateY(100%)"},{transform:"translateY(-50%)"}],{duration:r,fill:"forwards",easing:s}),d=u.animate([{transform:"translateY(-50%)"},{transform:"translateY(-150%)"}],{duration:r,fill:"forwards",easing:s});o.audio.playSound(.1),Promise.all([l.finished,d.finished]).then((function(){u.style.display="none",a()}))}))}},{key:"sharpEase",value:function(t){return Math.pow(Math.sin(t*Math.PI),.2)}},{key:"waitTimeCalc",value:function(t,e){return Math.max(1-this.sharpEase(e/t),.06)}},{key:"countBy",value:(a=Et(wt().mark((function t(e,r,n){var o,a,i,u;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=2e3,a=0;case 2:if(!(a<e)){t.next=13;break}return i=void 0,0==a&&(console.log("Ease in"),i=0),a==e-1&&(console.log("Ease out"),i=1),u=this.waitTimeCalc(e,a)*o,console.log("Animation time: ",u),t.next=10,this.countUp(n,r,u,i);case 10:a++,t.next=2;break;case 13:this.placeAudio.playSound(.5);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return a.apply(this,arguments)})},{key:"getRandomInt",value:function(t,e){return Math.floor(Math.random()*(e-t)+t)}},{key:"confettiFireworks",value:function(){var t=Date.now()+15e3,e={startVelocity:30,spread:360,ticks:60,zIndex:0};function r(t,e){return Math.random()*(e-t)+t}var n=setInterval((function(){var o=t-Date.now();if(o<=0)return clearInterval(n);var a=o/15e3*50;lt(bt(bt({},e),{},{particleCount:a,origin:{x:r(.1,.3),y:Math.random()-.2}})),lt(bt(bt({},e),{},{particleCount:a,origin:{x:r(.7,.9),y:Math.random()-.2}}))}),250)}},{key:"confettiSides",value:function(){var t=Date.now()+15e3,e=["#bb0000","#ffffff"];!function r(){lt({particleCount:2,angle:60,spread:55,origin:{x:0},colors:e}),lt({particleCount:2,angle:120,spread:55,origin:{x:1},colors:e}),Date.now()<t&&requestAnimationFrame(r)}()}},{key:"shuffleArray",value:function(t){for(var e=t.slice(),r=e.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),o=[e[n],e[r]];e[r]=o[0],e[n]=o[1]}return e}},{key:"generateRandomOrder",value:function(t){var e=Array.from({length:t+1},(function(t,e){return e}));return this.shuffleArray(e)}},{key:"randomizeFunction",value:function(){var t=this.generateRandomOrder(2);if(console.log(t),this.getRandomInt(1,100)<=50){if(this.getRandomInt(1,100)<=70){console.log("Trick");var e,r=[],n=this.getRandomInt(1,Ct.length),o=kt(t);try{for(o.s();!(e=o.n()).done;){var a=e.value,i=this.currentDigits[a]+1,u=Ct.length-(i-n);if(Number.isNaN(u))throw console.error(this.currentDigits),new Error("Amount to add is NaN: \n                        i: ".concat(a,",\n                        currentDigit: ").concat(i,",\n                        target: ").concat(n,"\n                            "));if(console.log("Amount to add: ",u),console.log("For: ",a),2==a){var c=this.getRandomInt(1,3);1==c?r.push(u+1):(2==c||console.error("Randomizer chose: ",c),r.push(u+-1))}else r.push(u)}}catch(t){o.e(t)}finally{o.f()}return{values:r,order:t}}console.log("All three should be the same");var s,l=[],d=this.getRandomInt(1,Ct.length),f=kt(t);try{for(f.s();!(s=f.n()).done;){var h=s.value,p=this.currentDigits[h]+1,y=Ct.length-(p-d);console.log("Amount to add: ",y),l.push(y)}}catch(t){f.e(t)}finally{f.f()}return{values:l,order:t}}for(var v=[],g=0;g<3;g++)v.push(this.getRandomInt(1,Ct.length));return{values:v,order:t}}},{key:"countTo",value:(o=Et(wt().mark((function t(e,r){var n,o,a,i,u,c,s,l;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],o=70,a=r?10:1,i=0;case 4:if(!(i<e.length)){t.next=16;break}return u=2*e[i][1]*a,2==e[i][1]&&(u=4*e[i][1]*a),c=(e[i][0]-(this.currentDigits[i]+(u+o)))%10,s=u+o+c,l=this.countBy(s,i,this.windowElement.querySelector('[data-counter-id="'.concat(i,'"]'))),n.push(l),t.next=13,new Promise((function(t){return setTimeout(t,1e3)}));case 13:i++,t.next=4;break;case 16:return t.next=18,Promise.all(n);case 18:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"shuffle",value:(n=Et(wt().mark((function t(){var e,r,n,o,a,i,u,c,s;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=this.rolling){t.next=2;break}return t.abrupt("return");case 2:return null==(e=this.authProvider.currentToken)&&0==this.noRewardPopupShown&&(alert("Note: You will not receive any reward from winning when you are not logged in. This message will not show again in this session."),this.noRewardPopupShown=!0),this.windowElement.querySelector(".window-background").src=chrome.runtime.getURL("assets/gamble_bg_normal.png"),r={},e&&(r.Authorization="Bearer ".concat(e)),t.next=10,fetch("".concat(Y,"/api/v1/fun_minigame/game_next"),{method:"GET",headers:r}).then((function(t){if(200!=t.status)throw new Error("Response not successfull");return t.json()}));case 10:if(n=t.sent,o=n.data){t.next=14;break}throw new Error("Bad response");case 14:if(a=o.digits,i=o.winToken,u=o.isTricked,a&&null!=u&&null!=i){t.next=19;break}throw new Error("Bad response");case 19:return t.next=21,this.countTo(a,u);case 21:console.log("All digits finished counting."),a[0][0]!=a[1][0]||a[1][0]!=a[2][0]?(this.loseAudio.playSound(.2),console.log("LOSE")):(console.log("WIN!"),this.windowElement.querySelector(".window-background").src=chrome.runtime.getURL("assets/gamble_bg_win.png"),this.winAudio.playSound(1),lt(),this.confettiSides(),this.confettiFireworks(),""!=i&&(c=U('\n    <div class="gamblingReward">\n        <h3>You got money</h3>\n        <p>Click below to get your $$$</p>\n        <button type="button" class="gamblingClaimReward">Claim reward</button>\n    </div>\n'),document.body.appendChild(c),(s=c.querySelector("button"))&&s.addEventListener("click",Et(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("".concat(Y,"/api/v1/fun_minigame/redeem_token"),{method:"POST",body:JSON.stringify({rewardToken:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){if(200!=t.status)throw new Error("Failed to redeem token");alert("Successfully redeemed token!")})).catch((function(t){alert("Failed to redeem token: ".concat(t))})).finally((function(){c.remove()}));case 1:case"end":return t.stop()}}),t)})))))),this.rolling=!1;case 24:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"init",value:function(){this.audio.loadSound("sounds/gamble/beep.wav"),this.placeAudio.loadSound("sounds/gamble/boom.mp3"),this.loseAudio.loadSound("sounds/gamble/lost.mp3"),this.winAudio.loadSound("sounds/gamble/win.mp3");for(var t=0;t<3;t++)this.currentDigits[t]=0}},{key:"onLoad",value:(r=Et(wt().mark((function t(){var e,r=this;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),!(e=this.windowElement.querySelector("#roll"))){t.next=6;break}e.addEventListener("click",(function(){try{r.shuffle()}catch(t){console.error(t),alert("An error occured while trying to connect to the server: ".concat(t))}})),t.next=7;break;case 6:throw new Error("Roll button is null");case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&Lt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,a,i,u}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function jt(t){return function(t){if(Array.isArray(t))return Tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Tt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Mt(){Mt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ot(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ot(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_t(n.key),n)}}function _t(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}function It(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){It(a,n,o,i,u,"next",t)}function u(t){It(a,n,o,i,u,"throw",t)}i(void 0)}))}}function Dt(t){return qt.apply(this,arguments)}function qt(){return qt=Gt(Mt().mark((function t(e){var r,n,o,a,i,u,c=arguments;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="public"===(r=c.length>1&&void 0!==c[1]?c[1]:"public")?"spki":"pkcs8",o="public"===r?"PUBLIC KEY":"PRIVATE KEY",t.next=5,window.crypto.subtle.exportKey(n,e);case 5:return a=t.sent,i=btoa(String.fromCharCode.apply(String,jt(new Uint8Array(a)))),u=["-----BEGIN ".concat(o,"-----")].concat(jt(i.match(/.{1,64}/g)),["-----END ".concat(o,"-----")]).join("\n"),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t)}))),qt.apply(this,arguments)}function Rt(t){for(var e=atob(t),r=e.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=e.charCodeAt(o);return n}var Ut=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.asyncInit()},e=[{key:"waitForKey",value:(u=Gt(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.aesKey&&null!=this.aesKey){t.next=5;break}return t.next=3,new Promise((function(t){return setTimeout(t,100)}));case 3:t.next=0;break;case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"asyncInit",value:(i=Gt(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createRSAKeypair();case 2:return t.next=4,this.getSharedAESKey();case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createRSAKeypair",value:(a=Gt(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Creating RSA keypair"),t.next=3,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);case 3:this.keypair=t.sent,console.log("Keypair OK");case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getSharedAESKey",value:(o=Gt(Mt().mark((function t(){var e,r,n;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Attempt to establish safe-tunnel connection"),t.t0=fetch,t.t1="".concat(Y,"/api/v1/safe_tunnel/handshake"),t.t2=JSON,t.next=6,Dt(this.keypair.publicKey,"public");case 6:return t.t3=t.sent,t.t4={publicKey:t.t3},t.t5=t.t2.stringify.call(t.t2,t.t4),t.t6={"Content-Type":"application/json"},t.t7={method:"POST",body:t.t5,headers:t.t6},t.next=13,(0,t.t0)(t.t1,t.t7);case 13:return e=t.sent,t.next=16,e.json();case 16:if(null!=(r=t.sent).message){t.next=19;break}throw new Error("Invalid server response");case 19:if(0!=r.success){t.next=21;break}throw new Error("Failed to establish secure connection: ".concat(r.message));case 21:if(null!=r.data){t.next=23;break}throw new Error("Server returned an invalid response");case 23:return this.aesKeyString=r.data.ks,console.log(this.aesKeyString),t.next=27,window.crypto.subtle.decrypt({name:"RSA-OAEP"},this.keypair.privateKey,Rt(r.data.k));case 27:return n=t.sent,t.next=30,window.crypto.subtle.importKey("raw",n,{name:"AES-GCM"},!1,["encrypt","decrypt"]);case 30:this.aesKey=t.sent,console.log("Successfully established safe-tunnel connection");case 32:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"safeTunnelEncrypt",value:(n=Gt(Mt().mark((function t(e){var r,n,o,a,i;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Wait for AES finish creation"),t.next=4,this.waitForKey();case 4:return console.log("AES Creation is done"),console.log("AES key:",this.aesKey),r=crypto.getRandomValues(new Uint8Array(12)),n=(new TextEncoder).encode(e),t.next=10,crypto.subtle.encrypt({name:"AES-GCM",iv:r},this.aesKey,n);case 10:return o=t.sent,a=btoa(String.fromCharCode.apply(String,jt(new Uint8Array(o)))),i=btoa(String.fromCharCode.apply(String,jt(new Uint8Array(r)))),t.abrupt("return",{iv:i,ct:a,k:this.aesKeyString});case 16:throw t.prev=16,t.t0=t.catch(0),alert("Safe-tunnel encryption failed. Please refresh and try again."),new Error("Safe-tunnel encryption failed: ".concat(t.t0));case 20:case"end":return t.stop()}}),t,this,[[0,16]])}))),function(t){return n.apply(this,arguments)})},{key:"safeTunnelDecrypt",value:(r=Gt(Mt().mark((function t(e,r){var n,o,a,i;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={name:"AES-GCM",iv:Rt(r)},t.next=4,window.crypto.subtle.decrypt(n,this.aesKey,Rt(e));case 4:return o=t.sent,a=new TextDecoder,i=a.decode(o),t.abrupt("return",JSON.parse(i));case 10:throw t.prev=10,t.t0=t.catch(0),alert("Safe-tunnel decryption failed. Please refresh and try again."),new Error("Safe-tunnel decryption failed: ".concat(t.t0));case 14:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t,e){return r.apply(this,arguments)})}],e&&Nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,a,i,u}();function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Ht(){Ht=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Yt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Yt(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Vt(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Wt(){return Xt.apply(this,arguments)}function Xt(){var t;return t=Ht().mark((function t(){var e,r,n;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=U('\n    <div class="password-popup" id="pwd-popup">\n        <h3>Enter password</h3>\n        <p>Enter password to encryption key</p>\n\n        <input type="text" name="popup-pwd" id="popup-pwd-input" class="popup-pwd" autocomplete="off">\n\n        <button type="button" id="ok-btn">OK</button>\n    </div>'),document.body.appendChild(e),r=e.querySelector("input.popup-pwd"),n=e.querySelector("button"),r.focus(),t.abrupt("return",new Promise((function(t){var o=function(){t(r.value),n.removeEventListener("click",o),r.removeEventListener("keyup",a),e.parentNode&&e.parentNode.removeChild(e)},a=function(t){"Enter"===t.key&&o()};n.addEventListener("click",o),r.addEventListener("keyup",a)})));case 6:case"end":return t.stop()}}),t)})),Xt=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Vt(a,n,o,i,u,"next",t)}function u(t){Vt(a,n,o,i,u,"throw",t)}i(void 0)}))},Xt.apply(this,arguments)}function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Qt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Kt(){Kt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==zt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(zt(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Zt(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function $t(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Zt(a,n,o,i,u,"next",t)}function u(t){Zt(a,n,o,i,u,"throw",t)}i(void 0)}))}}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,re(n.key),n)}}function ee(t,e,r){return(e=re(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function re(t){var e=function(t){if("object"!=zt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zt(e)?e:e+""}var ne=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,"visible",!1),ee(this,"currentSearch",""),ee(this,"currentSelected",null),this.win=this.createWindow(),this.hideWindowInstant(),this.authProvider=e,this.injectTab(),this.refreshAccounts(),this.searchEvents(),this.encryptEvent(),this.messageObserver(),this.closeButtonEvent()},e=[{key:"termsOfServiceAgree",value:function(){return null!=localStorage.getItem("tos_agree")||!!confirm("By using TeamsPlus encryption services, you agree to our terms of service, which can be found on our website at https://apiteamsplus.pythonanywhere.com/terms_of_service. Confirm below if you agree.")&&(localStorage.setItem("tos_agree","yes"),!0)}},{key:"hideWindow",value:function(){var t=this;this.win.animate([{transform:"translateY(-50%) translateX(-50%)",opacity:"1"},{transform:"translateY(-60%) translateX(-50%)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((function(){t.win&&(t.win.style.display="none")}),500)}},{key:"hideWindowInstant",value:function(){this.win.style.display="none"}},{key:"showWindow",value:function(){this.win.style.opacity="0",this.win.style.display="block",this.win.animate([{transform:"translateY(-60%) translateX(-50%)",opacity:"0"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"});var t=this.win.querySelector("#encrypt-message");if(null!=t){t.value="",this.currentSelected=null,this.currentSearch="";var e=this.win.querySelector("#selected");null!=e&&(e.innerHTML="Selected: <strong>No account selected. Please select an account to encrypt.</strong>");var r=this.win.querySelector("#encrypt-search");null!=r&&(r.value=""),this.refreshAccounts()}}},{key:"injectTab",value:function(){var t=$t(Kt().mark((function t(){var e=this;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.teamsPlusAppsManager.addAppAndGetButton("Encryption","https://www.svgrepo.com/show/501247/lock.svg",'\n            <svg fill="var(--colorNeutralForeground3)" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1016.588 1242.353v338.823h-112.94v-338.823h112.94ZM960.118 112.94c217.976 0 395.294 177.318 395.294 395.294V903.53H564.824V508.235c0-217.976 177.317-395.294 395.294-395.294Zm508.235 790.588V508.235C1468.353 228.028 1240.325 0 960.118 0S451.882 228.028 451.882 508.235V903.53H226v790.589C226 1818.692 327.308 1920 451.882 1920h1016.47c124.575 0 225.883-101.308 225.883-225.882V903.529h-225.882Z" fill-rule="evenodd"/>\n</svg>');case 2:t.sent.forEach((function(t){t.addEventListener("click",(function(){e.visible=!e.visible,e.visible?e.showWindow():e.hideWindow()}))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"createWindow",value:function(){var t=U('\n<div class="encryption-ui-window">\n    <div class="title-container">\n        <div class="title-sub-container">\n            <img src="https://www.svgrepo.com/show/513833/lock.svg" alt="" class="lock-icon-title">\n            <h2 class="encryption-title">Encryption</h2>\n\n        </div>\n        <button id="encryptionCloseButton" class="encryption-close-button">\n            <img src="https://www.svgrepo.com/show/12848/x-symbol.svg" alt="X">\n        </button>   \n        \n    </div>\n    \n    <input type="text" name="search" id="encrypt-search" class="encryption-ui-search" placeholder="Search for accounts..." autocomplete="off">\n    <div class="encryption-ui-people">\n\n\n    </div>\n    <p id="selected">Selected: null</p>\n    <div class="center">\n        <textarea name="encrypt-message" id="encrypt-message" rows="5" placeholder="Type your message here"></textarea>\n    </div>\n\n    <div class="center">\n        <button type="button" id="encrypt-btn">\n            <div class="btn-with-icon">\n                <img src="https://www.svgrepo.com/show/513833/lock.svg" alt="" class="btn-icon">\n                <span>Encrypt</span>\n            </div>\n        </button>\n    </div>\n    \n    <div class="center">\n        <textarea name="" id="encrypt-output" placeholder="Output will appear here" rows="2"></textarea>\n    </div>\n    \n</div>\n');return document.body.appendChild(t),t}},{key:"refreshAccounts",value:function(){var t=this,e=this.win.querySelector(".encryption-ui-people");if(null==e)throw new Error("List not found");var r=this.win.querySelector("#selected");null!=r&&(e.innerHTML="",fetch("".concat(Y,"/api/v1/auth/search?search=").concat(this.currentSearch),{method:"GET"}).then((function(t){return t.json()})).then((function(n){if(!n.message||1!=n.success||!n.data)throw new Error(n.message);var o=n.data,a=function(n){var a=o[n],i=U('\n<div class="person">\n    <p id="account-info">Bob</p>\n    <span id="account-id">ID: 17</span>\n    <div class="center">\n        <button type="button" id="select">Select</button>\n    </div>\n</div>\n'),u=i.querySelector("#account-info"),c=i.querySelector("#account-id");if(null==u||null==c)throw new Error("Account info not found!");u.textContent="".concat(n),c.textContent="ID: ".concat(a);var s=i.querySelector("#select");if(null==s)throw new Error("select btn");s.addEventListener("click",(function(){t.currentSelected=a,r.textContent="Selected: ".concat(n,"/").concat(a)})),e.appendChild(i),i.style.opacity="0",i.style.transform="translateY(-15px)",i.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}),console.log("Added: ".concat(n))};for(var i in o)a(i)})).catch((function(t){console.error("Error:",t),t instanceof Error?alert("Error: ".concat(t.message)):alert("Error")})))}},{key:"searchEvents",value:function(){var t=this,e=this.win.querySelector("#encrypt-search");null!=e&&e.addEventListener("input",(function(){t.currentSearch=e.value,t.refreshAccounts()}))}},{key:"encryptEvent",value:function(){var t=this,e=this.win.querySelector("#encrypt-btn");if(null!=e){var r=this.win.querySelector("#encrypt-message");null!=r&&e.addEventListener("click",$t(Kt().mark((function e(){var n,o,a;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.currentSelected){e.next=3;break}return alert("Please select an account before encrypting!"),e.abrupt("return");case 3:return t.termsOfServiceAgree(),n=new Ut,e.t0=JSON,e.t1=[t.currentSelected],e.t2=r.value,e.next=10,Wt();case 10:return e.t3=e.sent,e.t4={destination:e.t1,body:e.t2,pwd:e.t3},o=e.t0.stringify.call(e.t0,e.t4),e.next=15,n.safeTunnelEncrypt(o);case 15:return a=e.sent,e.t5=fetch,e.t6="".concat(Y,"/api/v1/encryption/encrypt"),e.t7=JSON.stringify(a),e.t8="Bearer ",e.next=22,t.authProvider.getToken();case 22:e.t9=e.sent,e.t10=e.t8.concat.call(e.t8,e.t9),e.t11={Authorization:e.t10,"Content-Type":"application/json"},e.t12={method:"POST",body:e.t7,headers:e.t11},(0,e.t5)(e.t6,e.t12).then((function(t){return t.json()})).then((function(e){if(!e.message||1!=e.success||!e.data)throw new Error(e.message);e.note&&alert("Note: ".concat(e.note));var r="[Encrypted Message]\\\\\\\\".concat(JSON.stringify(e.data),"\\\\\\\\[END]"),n=t.win.querySelector("#encrypt-output");n&&(n.value=r),navigator.clipboard.writeText(r),alert("Copied to clipboard")})).catch((function(t){console.error("Error:",t),t instanceof Error?alert("Error: ".concat(t.message)):alert("Error")}));case 27:case"end":return e.stop()}}),e)}))))}}},{key:"isValidEncrypted",value:function(t){var e=t.split("\\\\\\\\");if(3!=e.length)return!1;var r=e[1];try{JSON.parse(r)}catch(t){return!1}finally{return!0}}},{key:"attemptDecrypt",value:(r=$t(Kt().mark((function t(e){var r,n;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.termsOfServiceAgree(),r=new Ut,t.t0=JSON,t.t1=e.body,t.t2=e.keys,t.t3=e.iv,t.t4=e.signature,t.next=9,Wt();case 9:return t.t5=t.sent,t.t6=e.author,t.t7={body:t.t1,key:t.t2,iv:t.t3,signature:t.t4,pwd:t.t5,author:t.t6},n=t.t0.stringify.call(t.t0,t.t7),t.t8=fetch,t.t9="".concat(Y,"/api/v1/encryption/decrypt"),t.t10=JSON,t.next=18,r.safeTunnelEncrypt(n);case 18:return t.t11=t.sent,t.t12=t.t10.stringify.call(t.t10,t.t11),t.t13="Bearer ",t.next=23,this.authProvider.getToken();case 23:t.t14=t.sent,t.t15=t.t13.concat.call(t.t13,t.t14),t.t16={Authorization:t.t15,"Content-Type":"application/json"},t.t17={method:"POST",body:t.t12,headers:t.t16},(0,t.t8)(t.t9,t.t17).then((function(t){return t.json()})).then(function(){var t=$t(Kt().mark((function t(e){var n;return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.safeTunnelDecrypt(e.ct,e.iv);case 2:if(!(n=t.sent).message||1!=n.success||!n.data){t.next=7;break}alert("Message was: ".concat(n.data)),t.next=8;break;case 7:throw new Error(n.message);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error("Error:",t),t instanceof Error?alert("Error: ".concat(t.message)):alert("Error")}));case 28:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"onMessage",value:function(t){var e=this,r=t.querySelector('[id^="content-"]');if(null!=r){console.log(r.ariaLabel);var n=r.ariaLabel||"";if(this.isValidEncrypted(r.ariaLabel||"")&&null==r.querySelector("#decrypt-btn")){var o=U('\n<button type="button" id="decrypt-btn">Decrypt</button>\n');r.appendChild(o),o.addEventListener("click",(function(){try{var t=n.split("\\\\\\\\")[1];e.attemptDecrypt(JSON.parse(t))}catch(t){alert("Failed: ".concat(t))}}))}}else console.log("Mut observer warn: content- element not found under message")}},{key:"messageObserver",value:function(){var t=this,e=new MutationObserver((function(e){var r,n=Qt(e);try{for(n.s();!(r=n.n()).done;){var o,a=Qt(r.value.addedNodes);try{for(a.s();!(o=a.n()).done;){var i=o.value;i instanceof HTMLElement&&"chat-pane-message"===i.dataset.tid&&(console.log("New chat message detected:",i),t.onMessage(i)),(i instanceof HTMLElement||i instanceof DocumentFragment)&&i.querySelectorAll('[data-tid="chat-pane-message"]').forEach((function(e,r){return t.onMessage(e)}))}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}}));console.log("Starting Mutation observer on Body!"),e.observe(document.body,{childList:!0,subtree:!0})}},{key:"closeButtonEvent",value:function(){var t=this,e=this.win.querySelector("#encryptionCloseButton");null!=e&&e.addEventListener("click",(function(){t.hideWindow(),t.visible=!1}))}}],e&&te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ae(){ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==oe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(oe(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ie(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ue(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ie(a,n,o,i,u,"next",t)}function u(t){ie(a,n,o,i,u,"throw",t)}i(void 0)}))}}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,le(n.key),n)}}function se(t,e,r){return(e=le(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function le(t){var e=function(t){if("object"!=oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oe(e)?e:e+""}var de=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),se(this,"currentToken",null),se(this,"success",null),se(this,"loginContainer",null),se(this,"awaitAuth",!1),this.p_createLoginContainer(),this.p_initButtons(),this.p_asyncInit()},e=[{key:"p_asyncInit",value:(o=ue(ae().mark((function t(){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.p_loadToken();case 2:this.currentToken=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"p_loadToken",value:(n=ue(ae().mark((function t(){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["teamsplusToken"]);case 2:return t.abrupt("return",t.sent.teamsPlusToken);case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"p_saveToken",value:function(){chrome.storage.local.set({teamsplusToken:this.currentToken})}},{key:"p_createLoginContainer",value:function(){null==this.loginContainer?(this.loginContainer=U('\n<div class="main-login-container">\n    <div class="rel">\n        <div class="loader-container" id="loader" style="display: none;">\n            <div class="rel">\n                <span class="loader login-loader"></span>\n            </div>\n\n        </div>\n        <form action="">\n            <h3 class="login-title">Login</h3>\n            <p class="login-title">An action requires you to login to your account.</p>\n            <div class="login-align-center">\n                <input type="text" name="username" id="loginUsername" autocomplete="username" placeholder="Username" required>\n                <input type="password" name="password" id="loginPassword" placeholder="Password" required>\n                <button type="submit" class="login-btn-submit normal-button" id="submitBtn">Submit</button>\n                <a href="https://apiteamsplus.pythonanywhere.com/" target="_blank">Visit website to register</a>\n            </div>\n        </form>\n    </div>\n\n</div>\n'),this.loginContainer.style.display="none",document.body.appendChild(this.loginContainer)):console.error("Login container already exists!")}},{key:"p_showLoginContainer",value:function(){this.loginContainer?(this.loginContainer.style.opacity="0",this.loginContainer.style.display="block",this.loginContainer.animate([{transform:"translateY(-65%) translateX(-50%)",opacity:"0",filter:"blur(10px)"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1",filter:"blur(0px)"}],{duration:1e3,easing:"ease-out",iterations:1,fill:"forwards"})):console.error("Login container not found!")}},{key:"p_hideLoginContainer",value:function(){var t=this;this.loginContainer?(this.loginContainer.animate([{opacity:"1",filter:"blur(0px)",transform:"translateY(-50%) translateX(-50%)"},{opacity:"0",filter:"blur(10px)",transform:"translateY(-65%) translateX(-50%)"}],{duration:1e3,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((function(){null!=t.loginContainer&&(t.loginContainer.style.display="none")}),1e3)):console.error("Login container not found!")}},{key:"p_showLoader",value:function(){if(null!=this.loginContainer){var t=this.loginContainer.querySelector("#loader");t&&(t.style.display="block")}}},{key:"p_hideLoader",value:function(){if(null!=this.loginContainer){var t=this.loginContainer.querySelector("#loader");t&&(t.style.display="none")}}},{key:"p_initButtons",value:function(){var t=this;if(null!=this.loginContainer){var e=this.loginContainer.querySelector("#submitBtn");e?e.addEventListener("click",function(){var e=ue(ae().mark((function e(r){var n,o,a,i,u;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("The button has been clicked!"),r.preventDefault(),null!=t.loginContainer){e.next=5;break}return console.error("no login container"),e.abrupt("return");case 5:if(0!=t.awaitAuth){e.next=9;break}return console.error("not awaiting auth"),e.abrupt("return");case 9:if(t.success=null,t.currentToken=null,n=t.loginContainer.querySelector("#loginUsername"),o=t.loginContainer.querySelector("#loginPassword"),null!=n&&null!=o){e.next=17;break}return console.error("Username / password element not found"),e.abrupt("return");case 17:return t.p_showLoader(),a=new Ut,i=JSON.stringify({username:n.value,password:o.value,transfer:!0}),e.next=23,a.safeTunnelEncrypt(i);case 23:u=e.sent,fetch("".concat(Y,"/api/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(t){return t.json()})).then((function(e){if(!e.message||1!=e.success||!e.data)throw t.p_hideLoader(),new Error("not OK");t.currentToken=e.data,t.p_saveToken(),t.p_hideLoader()})).catch((function(e){t.p_hideLoader(),console.error("Error:",e),e instanceof Error?alert("Error: ".concat(e.message)):alert("Error")}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.error("Oneor many elements null")}}},{key:"waitUntilToken",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this.awaitAuth=!0,new Promise((function(r){var n=setInterval((function(){(null!=t.currentToken||t.success)&&(clearInterval(n),t.success=null,t.awaitAuth=!1,r(t.currentToken))}),e)}))}},{key:"getToken",value:(r=ue(ae().mark((function t(){var e;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.currentToken){t.next=3;break}return console.log("Found token! returning"),t.abrupt("return",this.currentToken);case 3:if(console.log("No token! creating new login container"),this.p_createLoginContainer(),this.p_showLoginContainer(),null!=this.loginContainer){t.next=8;break}return t.abrupt("return");case 8:return this.loginContainer.style.display="block",t.next=11,this.waitUntilToken();case 11:return this.p_hideLoginContainer(),null==(e=this.currentToken)&&console.error("Still no token"),t.abrupt("return",e);case 15:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}(),fe=40,he=40,pe=10;function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function ge(t){var e=function(t){if("object"!=ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ye(e)?e:e+""}var me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=r}return e=t,(r=[{key:"multiply",value:function(e){return new t(this.x*e.x,this.y*e.y)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"multiplyScalar",value:function(e){return new t(this.x*e,this.y*e)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y}}])&&ve(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function we(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ee(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function xe(t,e,r){return(e=Se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Se(t){var e=function(t){if("object"!=be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:e+""}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Le=new Image;Le.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACUUlEQVRYhe2Zv2/TQBSAv4TIJQhBMyBAQgLGLPyaCkJqxNQRWMkfwIBEYMUDg/emEgPsFiN0zNggBFkogaUrlZAoQihUoJqE0qAXOcGxHN/VuSYe8klWdI59/vLsO997yXS7XVSU7U4FuAecBXL+4bvAJvDEdayqspOExAqW7Y4INYBTiu63gAXXsTYnJujLbQB5zb48oGhaMhfzXSMol5+DxSt73Cr97bVfrh2ivp7Faw+Oz/vnnDYpGBlB/5lb7rdPFLo4d3cjO7Cf5vjWygR3PTD5TGbuPGrHjhKJXPXhn6F9O7/3eLW+0/s8cjhLrVEIRjKObaAJrMrmOtansQWXrv6/rX2Wn3/n3YY3aJ85WaD1c17LMEQdqLiO1Rx1QFbVQ1hOCMoJn7+2ksgJi8D7st2plu1O5C9UCk6I+8BalKRSUEZrmOK5uaE9cosNcDFKMtEgEWpvfiUZJDp8AEquY/1AJ4JyYZlKwixdO8rtG8d4/XHepBx+JB/3G8oI9tGYqE1zWUZ33JtkCBGpvc32tgkhk31JO4JT4nxapplR3JwJjsmltAseT7tgat7FI5kJjsl22gWbaRdcnQmOQV2SKu3VzBSWW5L66q0H95kXm2DFdayeoDKCErmwXDAvvn7hQJb8gxW1UlBua5hnL1qhvDiD106UF0fJDfIRUpAXx8ppCU6IlSg5LcEDzovrfnJUiZJjCnnx/otHqS+/xVRYvwRLv5oT9ZbrWEYLmHHTzEKwBKyRF3v+OUYZeTW/1lz0C+Qq5Bjj9Wkh3X9DAP8AE6su5f4dqmsAAAAASUVORK5CYII=";var Pe=new Image;Pe.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACeUlEQVRYhe2ZP2/TQBiHfwnBxQhESlUBE6xZoJQlQpXaMWxlBX8ABiTSGQ8MnqFIDHwAz9CxU5VKqO1S/i0doRISRR1iECLUSmP0lnM4p2ffOTm3V4lHymD7nHt8vntz75tSFEUoCscNmwAeArgKoMK66QLYBvDC96xFWdeFCDpuSEIbAC5Lmu4AqPuetX1kgkxuC4CteEsHQC1NsiI6OSIbvJw9BsxO93B3bv/g+HXrFFbfltHZ63dis3uuiLrVOoJszj2LjyfHI3gPusK27ssKdtsl/tSCaE4qCTpueA3APPtMAbggu8cei9CoB/j1u4ezZ8po3D53qE3z6Wl+JIVkCjpuSDL0VLPSpxhg/HyAL9/a/ZO3ajYW7k0kGtHrXl4vZ36PcA46blgF8ATAo7xiMbwcsbnVwW7QxWT1X5c0L3MLMrkWgBvDyqXBy6mS0Ncpd2kiOU3pFQ9Cr1hG/5F0j9x+7yKcO6XMRULhRlmQzTltr5VW55uP1cwwI1vBiFcxW63vdMnxKARqJcHWMKHkKCjdf7xHQfiTiXJgq3jeAI9UToTglAEeqZRVfviPE3mk/C+YzYkQ/G6ARyok+N5QtwNIcMkAj1TMF/Q96zNtzQxwERLvB5tGb7fwd0e9OEqSJCJnXiyEj4O0o/6gS47y4pnrAV6t/MDy2s9D10mcRldGIi/WmZfoyosTV33PCgDM6RjJtLyYJ56XyoIDks9HlRxk5Lw4hiR9z6KVfXPYEKQrLy6weAQ06u1ii0d5ObbyWx4cN/zKl34VA/WO71nCAmYRFdY6XwImEQolGeGkw+4Ron3DymrNNVYgl0FtUuvThNl/QwD4AwphHynh/q+DAAAAAElFTkSuQmCC";var Ae=new Image;Ae.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVRYhe2YPU/bQBjH/3mRSxBSiSoEkSqFjpnCy1J14G3qmFadkD8AAxJhrTxk8A5IDHwAz20/QRUmmHhbWJBopqYDFUEqBCuQ6nHvUsexY/suxq2Uv2QlFz/3f34+393jONFutyEiVTOnAZTYMQPgucOmAeAEwBc6DF35JpInNKCqmQSzDWAxZK59AGVDV04iAVQ1cxxABcBGSDCndsjH0JXrgQEyuCqAoiQc1ymApSCQyRjgwLyqzLuv+gJGBBcK0m8EKxHBcRVZDk95zkG2Wo8jhLNr1mt19xvB7cixAuRyHUG2CV9GTeXQK7fN3GsES09J1i/nfws4Ey1L8JxegM7C/xRyzelbSeLWEFBWQ0BZ9QCqmlmOC8Ytd6fUqZqZB3AIYCoOOJvqAF4bulLrADK4cwCZmOG47gAUCDLNfji0w2WeAankT/y4aljtl5NZNM1x3N0PJnsA/wxjyqUuWh/pvn/gZyaybazMX+PgrNGJvvnVxPtl4OpmBLfNhBRcCP+xT18fGrRI1u1Xpq+1cNt87DGu1U3rHMWISsB/nQDzvLU496fj6Ejv7pOfUrpiRCTgn6dIPg/xbunB+lyYG8V84e96oe9v34x1xYhIwD+ddstDV7i5+kIYxE9h/GkEW7zxuZry7RAkRqavI6ZFgDXe2j/yr3xBYmT6OmJq1NrlLdqHtD3Xu26JzsnshQL+u7ySfLeXOFrqtJr4hKVhpysb5EYdwL9u6Eruny911g1nhbnACnXcqnM4uP1xZ488WzFBbhq60vWWwevNgth7YUkZutJT6IeP/LIaAkoJwG/mlAbwfxLuDwAAAABJRU5ErkJggg==";var Ce=new Image;function Be(t,e,r){return t+(e-t)*r}Ce.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVRYhe2YP0/bQBiHf4HowHQgqKoKUqV0zYbowkY+QrsWfwAGBjLjoYM700gMXbp5h7EjLIgFVKasRKpEKoaAWtXEonX1mjtzjXPmcraxkPJIGe5P3veJc3fvJZUwDDGM7QTJzkfAc1llOMtUGSLjMBHMytMTtJ1gqxyV0bnjXWw7QR3AMYDFMuQkegBWPZd1Y0Eu1wFglSwn8AE0SLLKO45lOWsGWFv5i3fNP1F772Aah6dT8Af5ZNeIb3Gnpcr69oC+9x0x8mIhhLtxOzKw87mKy37iLB2LMeO3aJNsyp9M9WaCxmiOKQbxN0mwLlr02B9CZ44Kg/h1EhTrMF4TaejMUWEQv1pVTfz45RKd87tV+6ZhofX+ubFYlvj0BONFQbuJ+Hr0K34zcdLxoz55jgkG8W9JsCtatNWJ3zfJtdLtBf/NMcEgfpdau6JF5xBt9bnZpER9kUVjWc5Cg/i7opJcyCXOmgkxy67x/Uc/ar96uYCboJbjQa0Vv+e5bElsklW51PmDCvxBDc/matFg/2c+YgKN+D53urvN8MLc4IW6bHqiDkO+zQj4lWenJMmW57JPcsfkR1NWJoJZmQhmRSV4XYLLyJwqwW/FuujnVAnuF+uin/NpCnouO6erWeFK9xzynAnSdvFj/gWizKUU9FxGi7ZdmNI9bZ5rJA+dgx8AnBUod8ZzKEkV9Fx2BaBZkCTFbPIcZoIoTlJLDrqlTpLMY022deWgurCmYTvBMgC69a6NKUbH1lbahshFUGA7wWsAb/mLpOeHplBtJRk6gPdV51wqAP4Bq4oVsts6YbQAAAAASUVORK5CYII=";var Fe=function(){return t=function t(e,r,n,o,a,i,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xe(this,"frameCounter",0),xe(this,"pendingTurns",[]),xe(this,"snakePoints",[]),xe(this,"previousPoints",[]),xe(this,"foods",[]),xe(this,"otherPoints",[]),xe(this,"useWSADControls",!1),xe(this,"gameStarted",!1),xe(this,"lastTurningCell",new me(1100,100)),xe(this,"index",0),this.position=e,this.direction=r,this.foodCallback=i,this.lostCallback=u,this.numX=o,this.numY=a,this.index=c,this.keyEvents(),this.generateSnake(n)},e=[{key:"setUseWSAD",value:function(t){this.useWSADControls=t}},{key:"setGameStarted",value:function(t){this.gameStarted=t}},{key:"generateSnake",value:function(t){this.frameCounter=400;for(var e=0;e<40;e++)this.snakePoints.push(this.position.sub(new me(0,e)));for(var r=0;r<400;r++)this.previousPoints.push({p:this.position.sub(new me(r/10)),c:r})}},{key:"updateSegments",value:function(){var t=this,e=this.previousPoints.length-1;this.snakePoints.forEach((function(r,n){var o=Math.round(e-1*n),a=Math.max(0,Math.min(o,e)),i=t.previousPoints[a];r.x=i.p.x,r.y=i.p.y}))}},{key:"snakeUpdate",value:function(t){this.frameCounter+=1,this.gameStarted&&(this.position=this.position.add(this.direction.multiplyScalar(6).multiplyScalar(t))),this.updateSegments(),this.previousPoints.push({p:this.position,c:this.frameCounter}),this.previousPoints.length>1*this.snakePoints.length+3&&this.previousPoints.splice(0,1)}},{key:"getFood",value:function(){var t,e=0,r=we(this.foods);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Math.max(Math.abs(n.x-this.position.x),Math.abs(n.y-this.position.y))<.2){for(var o=0;o<pe;o++)this.snakePoints.push(new me(-10,-10));this.foods.splice(e,1),this.foodCallback(n)}e++}}catch(t){r.e(t)}finally{r.f()}}},{key:"drawSnake",value:function(t){var e=[91,123,249],r=[57,99,255];t.beginPath(),this.snakePoints.length;var n,o=0,a=we(this.snakePoints);try{for(a.s();!(n=a.n()).done;){var i=n.value,u=i.x*fe+20,c=15*(1-o/this.snakePoints.length*.15),s=i.y*he+20;t.moveTo(u+c+4,s+4),t.arc(u+4,s+4,c,0,2*Math.PI),this.snakePoints.length,o++}}catch(t){a.e(t)}finally{a.f()}t.fillStyle="rgba(0, 0, 0, 0.35)",t.fill(),o=0;var l,d="hahahaihiah",f=we(this.snakePoints);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=o/(this.snakePoints.length-1),y=Math.round(Be(e[0],r[0],p)),v=Math.round(Be(e[1],r[1],p)),g=Math.round(Be(e[2],r[2],p)),m="rgb(".concat(y,", ").concat(v,", ").concat(g,")");m!=d&&(t.fill(),t.beginPath(),t.fillStyle=m);var b=h.x*fe+20,w=15*(1-o/this.snakePoints.length*.15),k=h.y*he+20;t.moveTo(b+w,k),t.arc(b,k,w,0,2*Math.PI),t.fillStyle=t.filter="hue-rotate(".concat(45*this.index+90*this.index,"deg)"),d=m,o++}}catch(t){f.e(t)}finally{f.f()}t.fill(),t.shadowColor="transparent";var x=this.position.x*fe,S=this.position.y*he;this.direction.equals(new me(-1,0))&&t.drawImage(Pe,x,S),this.direction.equals(new me(1,0))&&t.drawImage(Le,x,S),this.direction.equals(new me(0,-1))&&t.drawImage(Ae,x,S),this.direction.equals(new me(0,1))&&t.drawImage(Ce,x,S),t.filter="none"}},{key:"isWithinBorders",value:function(){return!(this.position.x<0||this.position.y<0||this.position.x>this.numX-1||this.position.y>this.numY-1)}},{key:"ensureTurningOnCell",value:function(){var t=Math.round(this.position.x+0*this.direction.x),e=Math.round(this.position.y+0*this.direction.y);if(Math.max(Math.abs(t-this.position.x),Math.abs(e-this.position.y))>.2)return!1;var r=new me(t,e);if(this.lastTurningCell.equals(r))return!1;this.position.sub(r);for(var n=1/0,o=this.previousPoints[this.previousPoints.length-1],a=-1,i=this.previousPoints.length-1;i>=this.previousPoints.length-10;i--){var u=this.previousPoints[i];if(!u)break;if(!o)throw Error("No closest point");var c=u.p.x-r.x,s=u.p.y-r.y,l=Math.sqrt(c*c+s*s);l<n&&(o=u,n=l,a=i)}if(this.frameCounter>o.c){this.previousPoints.splice(a+1),this.updateSegments();var d=this.frameCounter-o.c;console.log("Backtracked by ",d," segments"),this.frameCounter-=d}return this.position=r,console.log("Allowing turning"),!0}},{key:"verifyTurn",value:function(t){var e,r={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},n=r[t];return e=this.pendingTurns.length>0?r[this.pendingTurns[Math.max(0,this.pendingTurns.length-1)]]:this.direction,!(n.x==e.x&&n.y==e.y||n.x===-e.x&&n.y===-e.y)}},{key:"keyEvents",value:function(){var t=this;document.addEventListener("keydown",(function(e){var r=null;t.useWSADControls?"w"===e.key||"W"===e.key?r="up":"s"===e.key||"S"===e.key?r="down":"a"===e.key||"A"===e.key?r="left":"d"!==e.key&&"D"!==e.key||(r="right"):"ArrowUp"===e.key?r="up":"ArrowDown"===e.key?r="down":"ArrowLeft"===e.key?r="left":"ArrowRight"===e.key&&(r="right"),r&&t.verifyTurn(r)&&t.pendingTurns.length<2&&t.pendingTurns.push(r)}))}},{key:"updatePendingTurn",value:function(){var t=this.pendingTurns[0];if(t&&0!=this.ensureTurningOnCell()){switch(t){case"up":if(0!=this.direction.y)break;this.direction=new me(0,-1);break;case"down":if(0!=this.direction.y)break;this.direction=new me(0,1);break;case"left":if(0!=this.direction.x)break;this.direction=new me(-1,0);break;case"right":if(0!=this.direction.x)break;this.direction=new me(1,0);break;default:console.warn("Unknown value: ",t)}console.log("Processed pending turn: ",t),this.lastTurningCell=this.position,this.pendingTurns.splice(0,1)}}},{key:"reset",value:function(){this.pendingTurns=[],this.snakePoints.length=0,this.previousPoints.length=0,this.position=new me(Math.round(this.numX/2),Math.round(this.numY/2))}},{key:"rebuild",value:function(){this.generateSnake(4)}},{key:"hasCollidedWithSelf",value:function(){var t,e=we(this.snakePoints);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=this.position.add(this.direction.multiplyScalar(.5)),o=Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2);if(o<Math.pow(.1,2))return console.log("Collided with: ",r," distance squared of: ",o),!0}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"hasCollidedWithOthers",value:function(){var t,e=we(this.otherPoints);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=this.position.add(this.direction.multiplyScalar(.5)),o=Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2);if(o<Math.pow(.1,2))return console.log("Collided with: ",r," distance squared of: ",o),!0}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"update",value:function(t){this.updatePendingTurn(),this.snakeUpdate(t),this.getFood(),0==this.isWithinBorders()&&this.lostCallback(this.snakePoints.length/pe),1==this.hasCollidedWithSelf()&&this.lostCallback(this.snakePoints.length/pe),1==this.hasCollidedWithOthers()&&this.lostCallback(this.snakePoints.length/pe)}},{key:"getPoints",value:function(){return this.snakePoints}},{key:"updateFoodPositions",value:function(t){this.foods=t}},{key:"updateOtherPoints",value:function(t){this.otherPoints=t}},{key:"render",value:function(t){this.drawSnake(t)}}],e&&ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function je(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Te(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_e(n.key),n)}}function Ne(t,e,r){return(e=_e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _e(t){var e=function(t){if("object"!=Oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oe(e)?e:e+""}var Ie=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,"doubleSnakes",!1),Ne(this,"foods",[]),Ne(this,"snakes",[]),Ne(this,"nextGameDoubleSnakes",!1),Ne(this,"numberOfFoods",1),Ne(this,"gameStarted",!1),Ne(this,"isVisible",!1),Ne(this,"lastTime",Date.now()),Ne(this,"deltaTime",1/60),Ne(this,"canvas",document.querySelector("#game")),Ne(this,"areaX",this.canvas.width/fe),Ne(this,"areaY",this.canvas.height/he),Ne(this,"ctx",this.canvas.getContext("2d")),Ne(this,"FoodImage",new Image),Ne(this,"renderLoop",(function(){e.deltaTime=(Date.now()-e.lastTime)/1e3,e.isVisible&&e.update(e.deltaTime),e.lastTime=Date.now(),requestAnimationFrame(e.renderLoop)})),this.canvas.width=innerWidth,this.canvas.height=innerHeight,this.FoodImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACKklEQVRYhe2YMU/bQBTH/25JhbrYDIwII+SZILp0ilkSMgGfAPINInWP+AiBLwD5AKhsljzB2qVEYiIgLMGCYLhMlQqVqysPYUzsO/vuRFTlLznDvcu7X967e/ccK45jjLM+jDXdBFCDjAJ2GvZRp2FXVXwYA+w0bB/AOoCfnYa9kbY7oVt1QtcR+ZkyBcgZ3gyE7jYAnx4uYXRNAj4vPtz7NoO90I0AzCfsq6weMZETk4Au/7if/XgG4HvKtsvq0bGME5OH5B/gj6/Ty6nxPqtHbVknShEcNB0O8byvaklbBcCvihVfeJ8+J4Z3AewUWaMUIIHxhbay5jwAuFqsWLXLB6zcPOLL9eOhd/en6wVMuO+SKnwXD5oOLxkHAOysObcxEMYxfMvCnPXKNATQ9gJ2YARw0HR4OvdF834DuI6BRStzSksWUhqQIpc+jSra9AJ2pAWQ9txpXlpLiKe76gUsyvuqbJnZ0QwH8ic80cIIUvSudJKltJAXRZkIbpsiI+UWbRlAX2KOinL9ywDWJOaoaEkV8F01FoCDppOZ5rEA9AKW2Xr9Fyk+MczQzzPKAJ7qYxmp3M5aBrBrjk3sXwhI11BPK9KLejqbhaFGMJA/YbMgBUi/Uved3BZFD0XKDDWXLWWsJ0l31IXqIDltKaR7WAQOZQo1Oa+WODg96qCl4VDmrS4pambb1DKN6kr6VOe6MvttpDigzud8zfZ1+pv8R62qCaCSAPwF+ckaGyeX8ZQAAAAASUVORK5CYII=",this.foodCallback=this.foodCallback.bind(this),this.lostCallback=this.lostCallback.bind(this);var r=function(){document.activeElement!=e.canvas&&e.canvas.focus()};this.canvas.addEventListener("blur",(function(){0!=e.gameStarted&&setTimeout(r,0)})),this.initialize(),this.gameStartedEvent(),this.resetGame(),this.showWindow(),window.onresize=function(){e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight,e.areaX=e.canvas.width/fe,e.areaY=e.canvas.height/he}},(e=[{key:"nextGameDoubleSnakesSet",value:function(t){this.nextGameDoubleSnakes=t}},{key:"createFood",value:function(){for(var t=this;this.foods.length<this.numberOfFoods;)for(var e,r=!1,n=0,o=function(){console.log("Attempt to place food...");var e=new me(Math.floor(Math.random()*(t.areaX-2))+1,Math.floor(Math.random()*(t.areaY-2))+1);if(console.log("Placed at: ",e),t.foods.some((function(t){return t.equals(e)})))return 0;if(t.foods.push(e),r=!0,(n+=1)>100){console.warn("Too many attempts exhausted; giving up");var o,a=je(t.snakes);try{for(a.s();!(o=a.n()).done;)o.value.updateFoodPositions(t.foods)}catch(t){a.e(t)}finally{a.f()}return{v:void 0}}};!r;)if(0!==(e=o())&&e)return e.v;var a,i=je(this.snakes);try{for(i.s();!(a=i.n()).done;)a.value.updateFoodPositions(this.foods)}catch(t){i.e(t)}finally{i.f()}}},{key:"gameStartedEvent",value:function(){var t=this;document.addEventListener("keydown",(function(){var e=document.querySelector("#info");if(e&&"none"==e.style.display){t.gameStarted=!0;var r,n=je(t.snakes);try{for(n.s();!(r=n.n()).done;)r.value.setGameStarted(!0)}catch(t){n.e(t)}finally{n.f()}}}))}},{key:"updateScore",value:function(){var t,e=0,r=je(this.snakes);try{for(r.s();!(t=r.n()).done;)e+=t.value.getPoints().length/pe}catch(t){r.e(t)}finally{r.f()}var n=document.querySelector("#score");n&&(n.textContent="Score: ".concat(e))}},{key:"drawGrid",value:function(){for(var t=0;t<this.areaX;t++)for(var e=0;e<this.areaY;e++)e%2==0?t%2==0?(this.ctx.fillStyle="#E7E7E8",this.ctx.fillRect(t*fe,e*he,fe,he)):(this.ctx.fillStyle="#D4D4D4",this.ctx.fillRect(t*fe,e*he,fe,he)):t%2==1?(this.ctx.fillStyle="#E7E7E8",this.ctx.fillRect(t*fe,e*he,fe,he)):(this.ctx.fillStyle="#D4D4D4",this.ctx.fillRect(t*fe,e*he,fe,he))}},{key:"createSnakes",value:function(){this.doubleSnakes=this.nextGameDoubleSnakes,this.doubleSnakes?(this.snakes=[new Fe(new me(Math.round(this.areaX/2),Math.round(this.areaY/2)),new me(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback),new Fe(new me(Math.round(this.areaX/3),Math.round(this.areaY/3)),new me(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback,1)],this.snakes[1].setUseWSAD(!0),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints()))):this.snakes=[new Fe(new me(Math.round(this.areaX/2),Math.round(this.areaY/2)),new me(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback)];var t,e=je(this.snakes);try{for(e.s();!(t=e.n()).done;)t.value.updateFoodPositions(this.foods)}catch(t){e.e(t)}finally{e.f()}}},{key:"foodCallback",value:function(t){console.warn("GOT THE FOOD!!!");var e=this.foods.findIndex((function(e){return e.equals(t)}));-1!==e&&this.foods.splice(e,1),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints())),this.createFood(),this.updateScore()}},{key:"lostCallback",value:function(t){console.warn("Lost with length: ",t);var e,r=0,n=je(this.snakes);try{for(n.s();!(e=n.n()).done;)r+=e.value.getPoints().length/pe}catch(t){n.e(t)}finally{n.f()}alert("(Temporary UI) Total score of: "+r.toString()),this.lostFunction()}},{key:"lostFunction",value:function(){this.snakes.length=0,this.resetGame(),this.showWindow()}},{key:"drawFood",value:function(){var t=this;this.foods.forEach((function(e,r){var n=e.x*fe,o=e.y*he;t.ctx.drawImage(t.FoodImage,n,o)}))}},{key:"render",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(),this.drawFood();var t,e=je(this.snakes);try{for(e.s();!(t=e.n()).done;)t.value.render(this.ctx)}catch(t){e.e(t)}finally{e.f()}}},{key:"update",value:function(t){this.render();var e,r=je(this.snakes);try{for(r.s();!(e=r.n()).done;)e.value.update(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"updateCanvas",value:function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.areaX=this.canvas.width/fe,this.areaY=this.canvas.height/he}},{key:"resetGame",value:function(){this.gameStarted=!1,this.createSnakes(),this.foods.length=0,this.createFood(),this.updateScore()}},{key:"showWindow",value:function(){var t=document.querySelector("#info");t&&(t.style.display="block")}},{key:"windowHandler",value:function(){var t=this,e=document.querySelector("#info");if(e){var r=document.querySelector("#small"),n=document.querySelector("#medium"),o=document.querySelector("#large"),a=document.querySelector("#largest");r.addEventListener("click",(function(){t.canvas.style.width="240px",t.canvas.style.height="240px",t.updateCanvas(),t.resetGame()})),n.addEventListener("click",(function(){t.canvas.style.width="480px",t.canvas.style.height="480px",t.updateCanvas(),t.resetGame()})),o.addEventListener("click",(function(){t.canvas.style.width="800px",t.canvas.style.height="800px",t.updateCanvas(),t.resetGame()})),a.addEventListener("click",(function(){t.canvas.style.width="1600px",t.canvas.style.height="800px",t.updateCanvas(),t.resetGame()}));var i=document.querySelector("#double-snakes");i.addEventListener("input",(function(){t.nextGameDoubleSnakesSet(i.checked),t.resetGame()}));var u=document.querySelector("#apples");u.addEventListener("input",(function(){t.numberOfFoods=parseInt(u.value),t.resetGame()})),document.querySelector("#begin").addEventListener("click",(function(){e.style.display="none",t.gameStartedEvent()}))}}},{key:"setVisibility",value:function(t){this.isVisible=t}},{key:"initialize",value:function(){this.windowHandler(),this.createSnakes(),this.createFood(),this.updateScore(),this.renderLoop()}}])&&Me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function De(){De=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ge(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ge(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function qe(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Re(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){qe(a,n,o,i,u,"next",t)}function u(t){qe(a,n,o,i,u,"throw",t)}i(void 0)}))}}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ye(n.key),n)}}function Ye(t){var e=function(t){if("object"!=Ge(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ge(e)?e:e+""}var He=function(){return t=function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=!1,(r=Ye(r="isVisible"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,this.window=U('\n    <div class="snake">\n        <button type="button">Close</button>\n        <div class="containement">\n        <canvas id="game"></canvas>\n    <div class="information" id="info">\n        <h1>TeamsPlus <s style="color:rgba(255,255, 255,0.3);font-size: small;">gambling</s> snake game - Temporary\n            settings menu</h1>\n        <p>Game size</p><button id="small">SMall</button> <button id="medium">Medium</button> <button\n            id="large">Large</button> <button id="largest">Largest</button>\n        <p>Impossible difficulty (double snakes)</p>\n        <p>Control one with arrow keys, control the other with WSAD.</p><input type="checkbox" name=""\n            id="double-snakes"><br>\n        <p>Number of apples</p><input type="range" name="" id="apples" min="1" max="10" value="1"><br><button\n            id="begin">Begin</button>\n    </div>\n    <div class="score"><span id="score">Score: 0</span></div>\n        </div>\n    </div>\n'),this.window.style.display="none",document.body.appendChild(this.window);var o=document.createElement("script");o.src=void 0,document.body.appendChild(o),this.asyncInit()},e=[{key:"asyncInit",value:(r=Re(De().mark((function t(){var e=this;return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re(De().mark((function t(){return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.querySelector("#game")){t.next=5;break}return t.next=3,new Promise((function(t){return setTimeout(t,50)}));case 3:t.next=0;break;case 5:return t.abrupt("return",document.querySelector("#game"));case 6:case"end":return t.stop()}}),t)})))();case 3:t.sent,this.snakeGame=new Ie,this.snakeGame.setVisibility(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to create an instance of SnakeGame: ",t.t0);case 11:return t.next=13,window.teamsPlusAppsManager.addAppAndGetButton("Snake","https://www.svgrepo.com/show/296787/snake.svg");case 13:t.sent.forEach((function(t){t.addEventListener("click",(function(){e.isVisible=!e.isVisible,e.isVisible?(e.window.style.display="block",e.snakeGame.setVisibility(!0),e.window.querySelector("iframe").src=chrome.runtime.getURL("pages/snake/index.html")):(e.window.style.display="none",e.snakeGame.setVisibility(!1))}))}));case 15:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return r.apply(this,arguments)})}],e&&Ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function Xe(t,e,r){return(e=ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ze(t){var e=function(t){if("object"!=Ve(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ve(e)?e:e+""}var Qe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Xe(this,"textMutationObserver",null),Xe(this,"textSlideInElement",null),Xe(this,"updateAvailableText",""),Xe(this,"currentVersion","")},(e=[{key:"checkForUpdates",value:function(){var t=this;this.currentVersion="v"+chrome.runtime.getManifest().version,fetch("https://api.github.com/repos/CariLT01/teamsplus-extension/releases/latest").then((function(t){return t.json()})).then((function(e){var r=e.tag_name;r&&r!=t.currentVersion?(t.updateAvailableText="Update available: "+t.currentVersion+" → "+r,t.setTextContent()):r==t.currentVersion&&(t.updateAvailableText="<p style='font-weight: normal; font-size: 12px'>Up to date</p>",t.setTextContent())})).catch((function(t){console.error("Failed to check for updates: ",t)}))}},{key:"setTextContent",value:function(){if(this.textSlideInElement){var t=chrome.runtime.getManifest().version;this.textSlideInElement.innerHTML="Loading Microsoft Teams...<br><br><p style='font-weight: normal; font-size: 16px;'>TeamsPlus v"+t+"</p>"+this.updateAvailableText}}},{key:"startMutationObserver",value:function(){var t=this;this.checkForUpdates(),this.textMutationObserver=new MutationObserver((function(e){var r=document.querySelector(".text-slide-in");r&&(t.textSlideInElement=r,t.setTextContent(),t.textMutationObserver&&t.textMutationObserver.disconnect())})),this.textMutationObserver.observe(document.body,{subtree:!0,childList:!0})}}])&&We(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Ke(){Ke=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Je(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Je(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ze(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function $e(t,e){return tr.apply(this,arguments)}function tr(){var t;return t=Ke().mark((function t(e,r){var n,o,a,i,u,c;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R('[role="navigation"]');case 2:if(n=t.sent,o=U('\n\n\n<div>\n    <div class="injected-parent-div">\n        <button type="button" class="injected-parent-button">\n            <span class="injected-tab-upper-span">\n              <div class=".injected-tab-div2">\n                <div class="injected-tab-upper-div"></div>\n                <span class="injected-tab-span">Delayed Send</span>\n              </div>\n            </span>\n        </button>\n    </div>\n</div>\n'),a=o.querySelector(".injected-tab-span"),i=o.querySelector(".injected-tab-upper-div"),u=o.querySelector("button"),null!=a&&null!=u&&null!=i){t.next=9;break}throw new Error("Span or img or btn not found in injected tab");case 9:return(c=U(r)).classList.add("injected-tab-img"),i.prepend(c),a.textContent=e,n.appendChild(o),t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)})),tr=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Ze(a,n,o,i,u,"next",t)}function u(t){Ze(a,n,o,i,u,"throw",t)}i(void 0)}))},tr.apply(this,arguments)}function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function rr(){rr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==er(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(er(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function nr(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function or(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){nr(a,n,o,i,u,"next",t)}function u(t){nr(a,n,o,i,u,"throw",t)}i(void 0)}))}}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ir(n.key),n)}}function ir(t){var e=function(t){if("object"!=er(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==er(e)?e:e+""}var ur=function(){return t=function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=!1,(r=ir(r="appMenuCreated"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,this.initializeAppMenu(),window.teamsPlusAppsManager=this},e=[{key:"initializeAppMenu",value:(a=or(rr().mark((function t(){return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createAppMenu();case 2:this.createButtonListeners(),this.appMenuCreated=!0;case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"isApplicationPinned",value:(o=or(rr().mark((function t(e){var r;return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["pinnedApplications"]);case 2:if((r=t.sent).pinnedApplications){t.next=5;break}return t.abrupt("return",!1);case 5:if(r.pinnedApplications[e]){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"createAppMenu",value:(n=or(rr().mark((function t(){return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appMenuElement=U('\n<span class="apps-menu" id="appsMenu">\n    <span class="apps-menu-header">\n        <h3 class="apps-menu-title">TeamsPlus apps</h3>\n    </span>\n    <span class="apps-list" id="appList">\n\n\n    </span>\n</span>\n'),t.next=3,$e("TeamsPlus",'\n<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\n<svg width="800px" height="800px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>apps</title>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="icon" fill="var(--colorNeutralForeground3)" transform="translate(64.000000, 64.000000)">\n            <path d="M64,32 C64,49.664 49.664,64 32,64 C14.336,64 -4.26325641e-14,49.664 -4.26325641e-14,32 C-4.26325641e-14,14.336 14.336,-4.26325641e-14 32,-4.26325641e-14 C49.664,-4.26325641e-14 64,14.336 64,32 Z M224,32 C224,49.664 209.664,64 192,64 C174.336,64 160,49.664 160,32 C160,14.336 174.336,-4.26325641e-14 192,-4.26325641e-14 C209.664,-4.26325641e-14 224,14.336 224,32 Z M64,352 C64,369.664 49.664,384 32,384 C14.336,384 -4.26325641e-14,369.664 -4.26325641e-14,352 C-4.26325641e-14,334.336 14.336,320 32,320 C49.664,320 64,334.336 64,352 Z M224,352 C224,369.664 209.664,384 192,384 C174.336,384 160,369.664 160,352 C160,334.336 174.336,320 192,320 C209.664,320 224,334.336 224,352 Z M64,192 C64,209.664 49.664,224 32,224 C14.336,224 -4.26325641e-14,209.664 -4.26325641e-14,192 C-4.26325641e-14,174.336 14.336,160 32,160 C49.664,160 64,174.336 64,192 Z M224,192 C224,209.664 209.664,224 192,224 C174.336,224 160,209.664 160,192 C160,174.336 174.336,160 192,160 C209.664,160 224,174.336 224,192 Z M384,32 C384,49.664 369.664,64 352,64 C334.336,64 320,49.664 320,32 C320,14.336 334.336,-4.26325641e-14 352,-4.26325641e-14 C369.664,-4.26325641e-14 384,14.336 384,32 Z M384,352 C384,369.664 369.664,384 352,384 C334.336,384 320,369.664 320,352 C320,334.336 334.336,320 352,320 C369.664,320 384,334.336 384,352 Z M384,192 C384,209.664 369.664,224 352,224 C334.336,224 320,209.664 320,192 C320,174.336 334.336,160 352,160 C369.664,160 384,174.336 384,192 Z" id="Combined-Shape">\n\n</path>\n        </g>\n    </g>\n</svg>\n');case 3:if(this.appMenuButton=t.sent,null!=this.appMenuButton){t.next=6;break}throw new Error("Failed to inject app menu tab");case 6:document.body.appendChild(this.appMenuElement);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"animateVisibility",value:function(t){t?this.appMenuElement.animate([{transform:"translateY(-5%)",opacity:0},{transform:"translateY(0%)",opacity:1}],{duration:250,easing:"ease-out",iterations:1,fill:"forwards"}):this.appMenuElement.animate([{transform:"translateY(0%)",opacity:1},{transform:"translateY(-5%)",opacity:0}],{duration:250,easing:"ease-in",iterations:1,fill:"forwards"})}},{key:"toggleVisibility",value:function(){this.appMenuElement.classList.contains("active")?this.setVisiblity(!1):this.setVisiblity(!0)}},{key:"setVisiblity",value:function(t){var e=this;if(0==t&&1==this.appMenuElement.classList.contains("active"))this.animateVisibility(!1),setTimeout((function(){e.appMenuElement.classList.remove("active")}),250);else if(0==this.appMenuElement.classList.contains("active")&&1==t){this.appMenuElement.classList.add("active");var r=this.appMenuButton.clientLeft+this.appMenuButton.clientWidth,n=this.appMenuButton.clientTop+this.appMenuButton.clientHeight;this.appMenuElement.style.left="".concat(r,"px"),this.appMenuElement.style.top="".concat(n,"px"),this.animateVisibility(!0)}}},{key:"createButtonListeners",value:function(){var t=this;this.appMenuButton.addEventListener("click",(function(e){t.toggleVisibility(),e.target!==e.currentTarget&&t.appMenuElement.contains(e.target)||e.stopPropagation()})),document.addEventListener("click",(function(e){return t.handleDocumentClick(e)})),this.appMenuElement.addEventListener("click",(function(t){t.stopPropagation()}))}},{key:"handleDocumentClick",value:function(t){0!=this.appMenuButton.classList.contains("active")&&(this.appMenuElement.contains(t.target)||this.appMenuButton.contains(t.target)||this.setVisiblity(!1))}},{key:"addAppAndGetButton",value:(r=or(rr().mark((function t(e,r,n){var o,a,i,u,c,s,l=this;return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var e=function(){return l.appMenuCreated?t(void 0):setTimeout(e,50)};e()}));case 2:if(0!=this.appMenuCreated){t.next=4;break}throw new Error("Attempt to create and add app before app menu initialization!");case 4:return o=[],a=U('\n<span class="apps-list-app">\n    <span class="apps-list-app-card" id="appListCard">\n        <img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" alt="App Icon" class="app-icon" id="appIcon">\n        <span class="apps-list-filler"></span>\n        <span class="app-name" id="appName">Bob app that is really really cool</span>\n    </span>\n    <span type="button" class="app-pin-button" id="pinApp">\n        <img src="https://www.svgrepo.com/show/501306/pin.svg" alt="" class="pin-icon">\n    </span>\n</span>\n'),i=a.querySelector("#appIcon"),a.querySelector("#appName").textContent=e,i.src=r,this.appMenuElement.querySelector("#appList").appendChild(a),console.log("Successfully added app in app menu"),(u=a.querySelector("#appListCard")).addEventListener("click",(function(){l.setVisiblity(!1)})),c=a.querySelector("#pinApp"),t.next=18,this.isApplicationPinned(e);case 18:if(!t.sent){t.next=20;break}c.style.backgroundColor="#655bffff";case 20:return c.addEventListener("click",or(rr().mark((function t(){var r,n;return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["pinnedApplications"]);case 2:r=t.sent,(n=r.pinnedApplications||{})[e]=!n[e],1==n[e]?c.style.backgroundColor="#655bffff":c.style.backgroundColor="transparent",chrome.storage.local.set({pinnedApplications:n});case 7:case"end":return t.stop()}}),t)})))),o.push(u),t.next=24,this.isApplicationPinned(e);case 24:if(!t.sent){t.next=29;break}return t.next=27,$e(e,n||'<img src="'.concat(r,'" alt="Icon">'));case 27:s=t.sent,o.push(s);case 29:return t.abrupt("return",o);case 30:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})}],e&&ar(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,a}();function cr(t){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(t)}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dr(n.key),n)}}function dr(t){var e=function(t){if("object"!=cr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cr(e)?e:e+""}var fr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"handleNewImage",value:function(t){t.loading="lazy",t.decoding="async"}},{key:"createMutationObserver",value:function(){var t=this;new MutationObserver((function(e,r){var n,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return sr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;"childList"==a.type&&a.addedNodes.length>0&&a.addedNodes.forEach((function(e){e instanceof Element&&"IMG"==e.tagName&&t.handleNewImage(e)}))}}catch(t){o.e(t)}finally{o.f()}})).observe(document.body,{childList:!0,subtree:!0})}},{key:"processCurrentImages",value:function(){var t=this;document.querySelectorAll("img").forEach((function(e){t.handleNewImage(e)}))}},{key:"onLoad",value:function(){console.log("Begin optimizing image loading"),this.processCurrentImages(),this.createMutationObserver()}}])&&lr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function pr(){pr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),u=new F(n||[]);return o(i,"_invoke",{value:P(t,r,u)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,u){var c=d(t[o],t,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==hr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?y:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(hr(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(L.prototype),s(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function yr(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var vr=new ur,gr=new g,mr=new A(gr),br=new T(gr),wr=new D(gr,br),kr=new Qe,xr=new fr,Sr=new de;function Er(){var t;return t=pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("window loaded, wait for main"),xr.onLoad(),kr.startMutationObserver(),window.self===window.top){t.next=5;break}throw new Error("Reject loading in iframe, feature not stable");case 5:if(window.self!==window.top){t.next=10;break}return t.next=8,R('[data-tid="app-layout-area--main"]');case 8:t.next=11;break;case 10:console.log("Skip wait in iframe");case 11:return console.log("window found main"),t.next=14,gr.loadColors();case 14:return t.next=16,gr.loadClassColors();case 16:return t.next=18,gr.loadFonts();case 18:return t.next=20,gr.loadPixelValues();case 20:return t.next=22,gr.loadBackgrounds();case 22:br.applyFonts(null),console.log("Apply colors on win load"),wr.detectChange(),mr.applyTwemoji(),br.applyColors(),br.applyBackgrounds();case 28:case"end":return t.stop()}}),t)})),Er=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){yr(a,n,o,i,u,"next",t)}function u(t){yr(a,n,o,i,u,"throw",t)}i(void 0)}))},Er.apply(this,arguments)}window.self===window.top&&(new K(new ct(gr),vr,Sr),new Ft(Sr),new ne(Sr),new He),window.onload=function(){return Er.apply(this,arguments)},console.log("Hello")})();