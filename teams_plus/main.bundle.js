(()=>{"use strict";const e={"--colorNeutralForeground1":"#242424","--colorNeutralForeground1Hover":"#242424","--colorNeutralForeground1Pressed":"#242424","--colorNeutralForeground1Selected":"#242424","--colorNeutralForeground2":"#424242","--colorNeutralForeground2Hover":"#242424","--colorNeutralForeground2Pressed":"#242424","--colorNeutralForeground2Selected":"#242424","--colorNeutralForeground2BrandHover":"#5b5fc7","--colorNeutralForeground2BrandPressed":"#4f52b2","--colorNeutralForeground2BrandSelected":"#5b5fc7","--colorNeutralForeground3":"#616161","--colorNeutralForeground3Hover":"#424242","--colorNeutralForeground3Pressed":"#424242","--colorNeutralForeground3Selected":"#424242","--colorNeutralForeground3BrandHover":"#5b5fc7","--colorNeutralForeground3BrandPressed":"#4f52b2","--colorNeutralForeground3BrandSelected":"#5b5fc7","--colorNeutralForeground4":"#707070","--colorNeutralForegroundDisabled":"#bdbdbd","--colorNeutralForegroundInvertedDisabled":"rgba(255, 255, 255, 0.4)","--colorBrandForegroundLink":"#4f52b2","--colorBrandForegroundLinkHover":"#444791","--colorBrandForegroundLinkPressed":"#383966","--colorBrandForegroundLinkSelected":"#4f52b2","--colorNeutralForeground2Link":"#424242","--colorNeutralForeground2LinkHover":"#242424","--colorNeutralForeground2LinkPressed":"#242424","--colorNeutralForeground2LinkSelected":"#242424","--colorCompoundBrandForeground1":"#5b5fc7","--colorCompoundBrandForeground1Hover":"#4f52b2","--colorCompoundBrandForeground1Pressed":"#444791","--colorBrandForeground1":"#5b5fc7","--colorBrandForeground2":"#4f52b2","--colorBrandForeground2Hover":"#444791","--colorBrandForeground2Pressed":"#333357","--colorNeutralForeground1Static":"#242424","--colorNeutralForegroundStaticInverted":"#ffffff","--colorNeutralForegroundInverted":"#ffffff","--colorNeutralForegroundInvertedHover":"#ffffff","--colorNeutralForegroundInvertedPressed":"#ffffff","--colorNeutralForegroundInvertedSelected":"#ffffff","--colorNeutralForegroundInverted2":"#ffffff","--colorNeutralForegroundOnBrand":"#ffffff","--colorNeutralForegroundInvertedLink":"#ffffff","--colorNeutralForegroundInvertedLinkHover":"#ffffff","--colorNeutralForegroundInvertedLinkPressed":"#ffffff","--colorNeutralForegroundInvertedLinkSelected":"#ffffff","--colorBrandForegroundInverted":"#7f85f5","--colorBrandForegroundInvertedHover":"#9299f7","--colorBrandForegroundInvertedPressed":"#7f85f5","--colorBrandForegroundOnLight":"#5b5fc7","--colorBrandForegroundOnLightHover":"#4f52b2","--colorBrandForegroundOnLightPressed":"#3d3e78","--colorBrandForegroundOnLightSelected":"#444791","--colorNeutralBackground1":"#ffffff","--colorNeutralBackground1Hover":"#f5f5f5","--colorNeutralBackground1Pressed":"#e0e0e0","--colorNeutralBackground1Selected":"#ebebeb","--colorNeutralBackground2":"#fafafa","--colorNeutralBackground2Hover":"#f0f0f0","--colorNeutralBackground2Pressed":"#dbdbdb","--colorNeutralBackground2Selected":"#e6e6e6","--colorNeutralBackground3":"#f5f5f5","--colorNeutralBackground3Hover":"#ebebeb","--colorNeutralBackground3Pressed":"#d6d6d6","--colorNeutralBackground3Selected":"#e0e0e0","--colorNeutralBackground4":"#f0f0f0","--colorNeutralBackground4Hover":"#fafafa","--colorNeutralBackground4Pressed":"#f5f5f5","--colorNeutralBackground4Selected":"#ffffff","--colorNeutralBackground5":"#ebebeb","--colorNeutralBackground5Hover":"#f5f5f5","--colorNeutralBackground5Pressed":"#f0f0f0","--colorNeutralBackground5Selected":"#fafafa","--colorNeutralBackground6":"#e6e6e6","--colorNeutralBackgroundInverted":"#292929","--colorNeutralBackgroundStatic":"#333333","--colorNeutralBackgroundAlpha":"rgba(255,255,255,0.50)","--colorNeutralBackgroundAlpha2":"rgba(255,255,255,0.80)","--colorSubtleBackgroundHover":"#f5f5f5","--colorSubtleBackgroundPressed":"#e0e0e0","--colorSubtleBackgroundSelected":"#ebebeb","--colorSubtleBackgroundLightAlphaHover":"rgba(255, 255, 255, 0.7)","--colorSubtleBackgroundLightAlphaPressed":"rgba(255, 255, 255, 0.5)","--colorSubtleBackgroundInvertedHover":"rgba(0, 0, 0, 0.1)","--colorSubtleBackgroundInvertedPressed":"rgba(0, 0, 0, 0.3)","--colorSubtleBackgroundInvertedSelected":"rgba(0, 0, 0, 0.2)","--colorNeutralBackgroundDisabled":"#f0f0f0","--colorNeutralBackgroundInvertedDisabled":"rgba(255, 255, 255, 0.1)","--colorNeutralStencil1":"#e6e6e6","--colorNeutralStencil2":"#fafafa","--colorNeutralStencil1Alpha":"rgba(0, 0, 0, 0.1)","--colorNeutralStencil2Alpha":"rgba(0, 0, 0, 0.05)","--colorBackgroundOverlay":"rgba(0, 0, 0, 0.4)","--colorScrollbarOverlay":"rgba(0, 0, 0, 0.5)","--colorBrandBackground":"#5b5fc7","--colorBrandBackgroundHover":"#4f52b2","--colorBrandBackgroundPressed":"#383966","--colorBrandBackgroundSelected":"#444791","--colorCompoundBrandBackground":"#5b5fc7","--colorCompoundBrandBackgroundHover":"#4f52b2","--colorCompoundBrandBackgroundPressed":"#444791","--colorBrandBackgroundStatic":"#5b5fc7","--colorBrandBackground2":"#E8EBFA","--colorBrandBackground2Hover":"#dce0fa","--colorBrandBackground2Pressed":"#b6bcfa","--colorBrandBackground3Static":"#444791","--colorBrandBackground4Static":"#383966","--colorBrandBackgroundInverted":"#ffffff","--colorBrandBackgroundInvertedHover":"#e8ebfa","--colorBrandBackgroundInvertedPressed":"#c5cbfa","--colorBrandBackgroundInvertedSelected":"#dce0fa","--colorNeutralCardBackground":"#fafafa","--colorNeutralCardBackgroundHover":"#ffffff","--colorNeutralCardBackgroundPressed":"#f5f5f5","--colorNeutralCardBackgroundSelected":"#ebebeb","--colorNeutralCardBackgroundDisabled":"#f0f0f0","--colorNeutralStrokeAccessible":"#616161","--colorNeutralStrokeAccessibleHover":"#575757","--colorNeutralStrokeAccessiblePressed":"#4d4d4d","--colorNeutralStrokeAccessibleSelected":"#5b5fc7","--colorNeutralStroke1":"#d1d1d1","--colorNeutralStroke1Hover":"#c7c7c7","--colorNeutralStroke1Pressed":"#b3b3b3","--colorNeutralStroke1Selected":"#bdbdbd","--colorNeutralStroke2":"#e0e0e0","--colorNeutralStroke3":"#f0f0f0","--colorNeutralStrokeSubtle":"#e0e0e0","--colorNeutralStrokeOnBrand":"#ffffff","--colorNeutralStrokeOnBrand2":"#ffffff","--colorNeutralStrokeOnBrand2Hover":"#ffffff","--colorNeutralStrokeOnBrand2Pressed":"#ffffff","--colorNeutralStrokeOnBrand2Selected":"#ffffff","--colorBrandStroke1":"#5b5fc7","--colorBrandStroke2":"#c5cbfa","--colorBrandStroke2Hover":"#aab1fa","--colorBrandStroke2Pressed":"#5b5fc7","--colorBrandStroke2Contrast":"#c5cbfa","--colorCompoundBrandStroke":"#5b5fc7","--colorCompoundBrandStrokeHover":"#4f52b2","--colorCompoundBrandStrokePressed":"#444791","--colorNeutralStrokeDisabled":"#e0e0e0","--colorNeutralStrokeInvertedDisabled":"rgba(255, 255, 255, 0.4)","--colorNeutralStrokeAlpha":"rgba(0, 0, 0, 0.05)","--colorNeutralStrokeAlpha2":"rgba(255, 255, 255, 0.2)","--colorStrokeFocus1":"#ffffff","--colorStrokeFocus2":"#000000","--colorNeutralShadowAmbient":"rgba(0,0,0,0.12)","--colorNeutralShadowKey":"rgba(0,0,0,0.14)","--colorNeutralShadowAmbientLighter":"rgba(0,0,0,0.06)","--colorNeutralShadowKeyLighter":"rgba(0,0,0,0.07)","--colorNeutralShadowAmbientDarker":"rgba(0,0,0,0.20)","--colorNeutralShadowKeyDarker":"rgba(0,0,0,0.24)","--colorBrandShadowAmbient":"rgba(0,0,0,0.30)","--colorBrandShadowKey":"rgba(0,0,0,0.25)","--colorPaletteRedBackground1":"#fdf6f6","--colorPaletteRedBackground2":"#f1bbbc","--colorPaletteRedBackground3":"#d13438","--colorPaletteRedForeground1":"#bc2f32","--colorPaletteRedForeground2":"#751d1f","--colorPaletteRedForeground3":"#d13438","--colorPaletteRedBorderActive":"#d13438","--colorPaletteRedBorder1":"#f1bbbc","--colorPaletteRedBorder2":"#d13438","--colorPaletteGreenBackground1":"#f1faf1","--colorPaletteGreenBackground2":"#9fd89f","--colorPaletteGreenBackground3":"#107c10","--colorPaletteGreenForeground1":"#0e700e","--colorPaletteGreenForeground2":"#094509","--colorPaletteGreenForeground3":"#107c10","--colorPaletteGreenBorderActive":"#107c10","--colorPaletteGreenBorder1":"#9fd89f","--colorPaletteGreenBorder2":"#107c10","--colorPaletteDarkOrangeBackground1":"#fdf6f3","--colorPaletteDarkOrangeBackground2":"#f4bfab","--colorPaletteDarkOrangeBackground3":"#da3b01","--colorPaletteDarkOrangeForeground1":"#c43501","--colorPaletteDarkOrangeForeground2":"#7a2101","--colorPaletteDarkOrangeForeground3":"#da3b01","--colorPaletteDarkOrangeBorderActive":"#da3b01","--colorPaletteDarkOrangeBorder1":"#f4bfab","--colorPaletteDarkOrangeBorder2":"#da3b01","--colorPaletteYellowBackground1":"#fffef5","--colorPaletteYellowBackground2":"#fef7b2","--colorPaletteYellowBackground3":"#fde300","--colorPaletteYellowForeground1":"#817400","--colorPaletteYellowForeground2":"#817400","--colorPaletteYellowForeground3":"#fde300","--colorPaletteYellowBorderActive":"#fde300","--colorPaletteYellowBorder1":"#fef7b2","--colorPaletteYellowBorder2":"#fde300","--colorPaletteBerryBackground1":"#fdf5fc","--colorPaletteBerryBackground2":"#edbbe7","--colorPaletteBerryBackground3":"#c239b3","--colorPaletteBerryForeground1":"#af33a1","--colorPaletteBerryForeground2":"#6d2064","--colorPaletteBerryForeground3":"#c239b3","--colorPaletteBerryBorderActive":"#c239b3","--colorPaletteBerryBorder1":"#edbbe7","--colorPaletteBerryBorder2":"#c239b3","--colorPaletteLightGreenBackground1":"#f2fbf2","--colorPaletteLightGreenBackground2":"#a7e3a5","--colorPaletteLightGreenBackground3":"#13a10e","--colorPaletteLightGreenForeground1":"#11910d","--colorPaletteLightGreenForeground2":"#0b5a08","--colorPaletteLightGreenForeground3":"#13a10e","--colorPaletteLightGreenBorderActive":"#13a10e","--colorPaletteLightGreenBorder1":"#a7e3a5","--colorPaletteLightGreenBorder2":"#13a10e","--colorPaletteMarigoldBackground1":"#fefbf4","--colorPaletteMarigoldBackground2":"#f9e2ae","--colorPaletteMarigoldBackground3":"#eaa300","--colorPaletteMarigoldForeground1":"#d39300","--colorPaletteMarigoldForeground2":"#835b00","--colorPaletteMarigoldForeground3":"#eaa300","--colorPaletteMarigoldBorderActive":"#eaa300","--colorPaletteMarigoldBorder1":"#f9e2ae","--colorPaletteMarigoldBorder2":"#eaa300","--colorPaletteRedForegroundInverted":"#dc5e62","--colorPaletteGreenForegroundInverted":"#359b35","--colorPaletteYellowForegroundInverted":"#fef7b2","--colorPaletteDarkRedBackground2":"#d69ca5","--colorPaletteDarkRedForeground2":"#420610","--colorPaletteDarkRedBorderActive":"#750b1c","--colorPaletteCranberryBackground2":"#eeacb2","--colorPaletteCranberryForeground2":"#6e0811","--colorPaletteCranberryBorderActive":"#c50f1f","--colorPalettePumpkinBackground2":"#efc4ad","--colorPalettePumpkinForeground2":"#712d09","--colorPalettePumpkinBorderActive":"#ca5010","--colorPalettePeachBackground2":"#ffddb3","--colorPalettePeachForeground2":"#8f4e00","--colorPalettePeachBorderActive":"#ff8c00","--colorPaletteGoldBackground2":"#ecdfa5","--colorPaletteGoldForeground2":"#6c5700","--colorPaletteGoldBorderActive":"#c19c00","--colorPaletteBrassBackground2":"#e0cea2","--colorPaletteBrassForeground2":"#553e06","--colorPaletteBrassBorderActive":"#986f0b","--colorPaletteBrownBackground2":"#ddc3b0","--colorPaletteBrownForeground2":"#50301a","--colorPaletteBrownBorderActive":"#8e562e","--colorPaletteForestBackground2":"#bdd99b","--colorPaletteForestForeground2":"#294903","--colorPaletteForestBorderActive":"#498205","--colorPaletteSeafoamBackground2":"#a8f0cd","--colorPaletteSeafoamForeground2":"#00723b","--colorPaletteSeafoamBorderActive":"#00cc6a","--colorPaletteDarkGreenBackground2":"#9ad29a","--colorPaletteDarkGreenForeground2":"#063b06","--colorPaletteDarkGreenBorderActive":"#0b6a0b","--colorPaletteLightTealBackground2":"#a6e9ed","--colorPaletteLightTealForeground2":"#00666d","--colorPaletteLightTealBorderActive":"#00b7c3","--colorPaletteTealBackground2":"#9bd9db","--colorPaletteTealForeground2":"#02494c","--colorPaletteTealBorderActive":"#038387","--colorPaletteSteelBackground2":"#94c8d4","--colorPaletteSteelForeground2":"#00333f","--colorPaletteSteelBorderActive":"#005b70","--colorPaletteBlueBackground2":"#a9d3f2","--colorPaletteBlueForeground2":"#004377","--colorPaletteBlueBorderActive":"#0078d4","--colorPaletteRoyalBlueBackground2":"#9abfdc","--colorPaletteRoyalBlueForeground2":"#002c4e","--colorPaletteRoyalBlueBorderActive":"#004e8c","--colorPaletteCornflowerBackground2":"#c8d1fa","--colorPaletteCornflowerForeground2":"#2c3c85","--colorPaletteCornflowerBorderActive":"#4f6bed","--colorPaletteNavyBackground2":"#a3b2e8","--colorPaletteNavyForeground2":"#001665","--colorPaletteNavyBorderActive":"#0027b4","--colorPaletteLavenderBackground2":"#d2ccf8","--colorPaletteLavenderForeground2":"#3f3682","--colorPaletteLavenderBorderActive":"#7160e8","--colorPalettePurpleBackground2":"#c6b1de","--colorPalettePurpleForeground2":"#341a51","--colorPalettePurpleBorderActive":"#5c2e91","--colorPaletteGrapeBackground2":"#d9a7e0","--colorPaletteGrapeForeground2":"#4c0d55","--colorPaletteGrapeBorderActive":"#881798","--colorPaletteLilacBackground2":"#e6bfed","--colorPaletteLilacForeground2":"#63276d","--colorPaletteLilacBorderActive":"#b146c2","--colorPalettePinkBackground2":"#f7c0e3","--colorPalettePinkForeground2":"#80215d","--colorPalettePinkBorderActive":"#e43ba6","--colorPaletteMagentaBackground2":"#eca5d1","--colorPaletteMagentaForeground2":"#6b0043","--colorPaletteMagentaBorderActive":"#bf0077","--colorPalettePlumBackground2":"#d696c0","--colorPalettePlumForeground2":"#43002b","--colorPalettePlumBorderActive":"#77004d","--colorPaletteBeigeBackground2":"#d7d4d4","--colorPaletteBeigeForeground2":"#444241","--colorPaletteBeigeBorderActive":"#7a7574","--colorPaletteMinkBackground2":"#cecccb","--colorPaletteMinkForeground2":"#343231","--colorPaletteMinkBorderActive":"#5d5a58","--colorPalettePlatinumBackground2":"#cdd6d8","--colorPalettePlatinumForeground2":"#3b4447","--colorPalettePlatinumBorderActive":"#69797e","--colorPaletteAnchorBackground2":"#bcc3c7","--colorPaletteAnchorForeground2":"#202427","--colorPaletteAnchorBorderActive":"#394146","--colorStatusSuccessBackground1":"#f1faf1","--colorStatusSuccessBackground2":"#9fd89f","--colorStatusSuccessBackground3":"#107c10","--colorStatusSuccessForeground1":"#0e700e","--colorStatusSuccessForeground2":"#094509","--colorStatusSuccessForeground3":"#107c10","--colorStatusSuccessForegroundInverted":"#54b054","--colorStatusSuccessBorderActive":"#107c10","--colorStatusSuccessBorder1":"#9fd89f","--colorStatusSuccessBorder2":"#107c10","--colorStatusWarningBackground1":"#fff9f5","--colorStatusWarningBackground2":"#fdcfb4","--colorStatusWarningBackground3":"#f7630c","--colorStatusWarningForeground1":"#bc4b09","--colorStatusWarningForeground2":"#8a3707","--colorStatusWarningForeground3":"#bc4b09","--colorStatusWarningForegroundInverted":"#faa06b","--colorStatusWarningBorderActive":"#f7630c","--colorStatusWarningBorder1":"#fdcfb4","--colorStatusWarningBorder2":"#bc4b09","--colorStatusDangerBackground1":"#fdf3f4","--colorStatusDangerBackground2":"#eeacb2","--colorStatusDangerBackground3":"#c50f1f","--colorStatusDangerForeground1":"#b10e1c","--colorStatusDangerForeground2":"#6e0811","--colorStatusDangerForeground3":"#c50f1f","--colorStatusDangerForegroundInverted":"#dc626d","--colorStatusDangerBorderActive":"#c50f1f","--colorStatusDangerBorder1":"#eeacb2","--colorStatusDangerBorder2":"#c50f1f","--colorStatusDangerBackground3Hover":"#b10e1c","--colorStatusDangerBackground3Pressed":"#960b18","--backgroundCanvas":"#fff","--colorAvatar":"#5b5fc7","--colorAvatarBackground":"#c5cbfa","--colorDefaultBackground7":"#F5F5F5","--colorTeamsBrand1Hover":"#4f52b2","--colorTeamsBrand1Pressed":"#444791","--colorTeamsBrand1Selected":"#444791","--colorTeamsNeutralStrokeSubtleAlpha":"rgba(0,0,0,.95)","--colorPaletteRedForeground1HCBlack":"#bc2f32","--colorPaletteRedBackground3Hover":"#BC2E2E","--colorPaletteRedBackground3Pressed":"#9F282B","--colorTeamsButtonCompositeHoverShadow1":"rgba(93, 91, 212, 0.05)","--colorTeamsButtonCompositeHoverShadow2":"rgba(159, 162, 252, 0.08)","--colorTeamsButtonCompositeHoverShadow3":"rgba(251, 174, 164, 0.08)","--colorTeamsButtonCompositeHoverShadow4":"rgba(121, 207, 255, 0.08)","--colorTeamsButtonCompositeFocusShadow1":"rgba(93, 91, 212, 0.1)","--colorTeamsButtonCompositeFocusShadow2":"rgba(159, 162, 252, 0.15)","--colorTeamsButtonCompositeFocusShadow3":"rgba(251, 174, 164, 0.1)","--colorTeamsButtonCompositeFocusShadow4":"rgba(121, 207, 255, 0.1)","--colorTeamsCompositeHoverShadow1":"rgba(93, 91, 212, 0.1)","--colorTeamsCompositeHoverShadow2":"rgba(159, 162, 252, 0.06)","--colorTeamsCompositeHoverShadow3":"rgba(251, 174, 164, 0.1)","--colorTeamsCompositeHoverShadow4":"rgba(121, 207, 255, 0.05)","--colorTeamsCompositeActiveShadow1":"rgba(93, 91, 212, 0.2)","--colorTeamsCompositeActiveShadow2":"rgba(159, 162, 252, 0.12)","--colorTeamsCompositeActiveShadow3":"rgba(251, 174, 164, 0.2)","--colorTeamsCompositeActiveShadow4":"rgba(121, 207, 255, 0.2)"},t={"--borderRadiusNone":"0","--borderRadiusSmall":"2px","--borderRadiusMedium":"4px","--borderRadiusLarge":"6px","--borderRadiusXLarge":"8px","--borderRadiusCircular":"10000px","--fontSizeBase100":"10px","--fontSizeBase200":"12px","--fontSizeBase300":"14px","--fontSizeBase400":"16px","--fontSizeBase500":"20px","--fontSizeBase600":"24px","--fontSizeHero700":"28px","--fontSizeHero800":"32px","--fontSizeHero900":"40px","--fontSizeHero1000":"68px","--lineHeightBase100":"14px","--lineHeightBase200":"16px","--lineHeightBase300":"20px","--lineHeightBase400":"22px","--lineHeightBase500":"28px","--lineHeightBase600":"32px","--lineHeightHero700":"36px","--lineHeightHero800":"40px","--lineHeightHero900":"52px","--lineHeightHero1000":"92px","--fontWeightRegular":"400","--fontWeightMedium":"500","--fontWeightSemibold":"600","--fontWeightBold":"700","--strokeWidthThin":"1px","--strokeWidthThick":"2px","--strokeWidthThicker":"3px","--strokeWidthThickest":"4px","--spacingHorizontalNone":"0","--spacingHorizontalXXS":"2px","--spacingHorizontalXS":"4px","--spacingHorizontalSNudge":"6px","--spacingHorizontalS":"8px","--spacingHorizontalMNudge":"10px","--spacingHorizontalM":"12px","--spacingHorizontalL":"16px","--spacingHorizontalXL":"20px","--spacingHorizontalXXL":"24px","--spacingHorizontalXXXL":"32px","--spacingVerticalNone":"0","--spacingVerticalXXS":"2px","--spacingVerticalXS":"4px","--spacingVerticalSNudge":"6px","--spacingVerticalS":"8px","--spacingVerticalMNudge":"10px","--spacingVerticalM":"12px","--spacingVerticalL":"16px","--spacingVerticalXL":"20px","--spacingVerticalXXL":"24px","--spacingVerticalXXXL":"32px","--shadow2":"0 0 2px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.14)","--shadow4":"0 0 2px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.14)","--shadow8":"0 0 2px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.14)","--shadow16":"0 0 2px rgba(0,0,0,0.12), 0 8px 16px rgba(0,0,0,0.14)","--shadow28":"0 0 8px rgba(0,0,0,0.12), 0 14px 28px rgba(0,0,0,0.14)","--shadow64":"0 0 8px rgba(0,0,0,0.12), 0 32px 64px rgba(0,0,0,0.14)","--shadow2Brand":"0 0 2px rgba(0,0,0,0.30), 0 1px 2px rgba(0,0,0,0.25)","--shadow4Brand":"0 0 2px rgba(0,0,0,0.30), 0 2px 4px rgba(0,0,0,0.25)","--shadow8Brand":"0 0 2px rgba(0,0,0,0.30), 0 4px 8px rgba(0,0,0,0.25)","--shadow16Brand":"0 0 2px rgba(0,0,0,0.30), 0 8px 16px rgba(0,0,0,0.25)","--shadow28Brand":"0 0 8px rgba(0,0,0,0.30), 0 14px 28px rgba(0,0,0,0.25)","--shadow64Brand":"0 0 8px rgba(0,0,0,0.30), 0 32px 64px rgba(0,0,0,0.25)"},o={fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, "Apple Color Emoji", "Segoe UI Emoji", sans-serif',imports:""},n={ff:"rgb(36, 36, 36)",oh:"rgb(36, 36, 36)",jg:"rgb(250, 250, 250)","ui-toolbar__item":"rgb(36, 36, 36)",oi:"rgb(36, 36, 36)","fui-StyledText":"rgb(36, 36, 36)","ui-popup__content__content":"#F5F5F5","ui-list__item:hover":"rgb(245, 245, 245)"},r={ff:"color",oh:"color",jg:"background","ui-toolbar__item":"color",oi:"color","fui-StyledText":"color","ui-popup__content__content":"background","ui-list__item:hover":"background"},d={channelAndChatBackground:"none",fullBackgroundExperience:"false",backdropFilter:"",interfaceOpacity:"0.1"},a={set:"default"},s={"Default Teams Theme":'{"data":{"varColors":{},"classColors":{},"fonts":{"fontFamily":"-apple-system, BlinkMacSystemFont, \\"Segoe UI\\", system-ui, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", sans-serif","imports":""},"otherSettings":{},"twemojiSupport":false},"name":"Default Teams Theme","data_version":1}',"Cozy Dark Blue theme":'{"data":{"varColors":{"--colorNeutralForeground1":"#FFFFFF","--colorNeutralForeground2":"#FFFFFF","--colorNeutralForeground3":"#777AC6","--colorBrandForegroundLink":"#54D0FF","--colorBrandForegroundLinkHover":"#FFFFFF","--colorBrandForeground1":"#FFFFFF","--colorBrandForeground2":"#FFFFFF","--colorBrandForeground2Hover":"#FFFFFF","--colorNeutralForegroundInverted":"#FFFFFF","--colorNeutralBackground1":"#002457","--colorNeutralBackground2":"#000000","--colorNeutralBackground3":"#000E57","--colorNeutralBackground4":"#000000","--colorNeutralBackground5":"#001271","--colorBrandBackground":"#000000","--colorBrandBackgroundHover":"#828282","--colorBrandBackground2":"#00527C","--colorBrandBackgroundInverted":"#FFFFFF","--colorNeutralCardBackground":"#202020","--colorNeutralStrokeAccessibleSelected":"#FFFFFF","--colorNeutralStroke1":"#00000000","--colorNeutralStroke2":"#0756AE00","--colorNeutralStroke3":"#002B7C00","--colorNeutralStrokeSubtle":"#E0E0E000","--colorNeutralStrokeOnBrand":"#FFFFFF00","--colorNeutralStrokeOnBrand2":"#FFFFFF00","--backgroundCanvas":"#002985","--colorAvatar":"#FFFFFF","--colorAvatarBackground":"#C9CFFF","--colorDefaultBackground7":"#001D54","--colorTeamsBrand1Hover":"#FFFFFF"},"classColors":{"ff":"#FFFFFF","oh":"#FFFFFF","jg":"#00000000","ui-toolbar__item":"#FFFFFF","oi":"#FFFFFF","fui-StyledText":"#FFFFFF"},"fonts":{"fontFamily":"\\"Inter\\", courier","imports":"@import url(\'https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap\');"},"otherSettings":{"--borderRadiusMedium":"20px"},"twemojiSupport":true},"name":"Cozy Dark Blue theme","data_version":1}'};function u(e,t){if(null==e)return console.warn("Data is undefined. Returning defaults"),t;if(null==e)return console.warn("Data is undefined. Returning defaults"),t;if(null==(e=JSON.parse(JSON.stringify(e))))return console.warn("Data is undefined. Returning defaults"),t;if(null==e)return console.warn("Data is undefined. Returning defaults"),t;console.log("List: ",e),console.log("Defaults: ",t);const o={...t};for(const n in t)void 0!==e[n]?o[n]=e[n]:console.log("Property ",n," is missing");return o}const i=["colors","classColors","fonts","pixelValues","backgrounds","emojis"],c={colors:e,classColors:n,fonts:o,pixelValues:t,backgrounds:d,emojis:a};const l=function(){var e={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;return t<65536?s(t):s(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:b},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(t,o){return o&&"function"!=typeof o||(o={callback:o}),("string"==typeof t?h:f)(t,{callback:o.callback||i,attributes:"function"==typeof o.attributes?o.attributes:p,base:"string"==typeof o.base?o.base:e.base,ext:o.ext||e.ext,size:o.folder||(n=o.size||e.size,"number"==typeof n?n+"x"+n:n),className:o.className||e.className,onerror:o.onerror||e.onerror});var n},replace:m,test:function(e){o.lastIndex=0;var t=o.test(e);return o.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},o=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,n=/\uFE0F/g,r=String.fromCharCode(8205),d=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,s=String.fromCharCode;return e;function u(e,t){return document.createTextNode(t?e.replace(n,""):e)}function i(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function c(e,t){for(var o,n,r=e.childNodes,d=r.length;d--;)3===(n=(o=r[d]).nodeType)?t.push(o):1!==n||"ownerSVGElement"in o||a.test(o.nodeName.toLowerCase())||c(o,t);return t}function l(e){return b(e.indexOf(r)<0?e.replace(n,""):e)}function f(e,t){for(var n,r,d,a,s,i,f,h,g,p,m,b,y,w=c(e,[]),v=w.length;v--;){for(d=!1,a=document.createDocumentFragment(),i=(s=w[v]).nodeValue,h=0;f=o.exec(i);){if((g=f.index)!==h&&a.appendChild(u(i.slice(h,g),!0)),b=l(m=f[0]),h=g+m.length,y=t.callback(b,t),b&&y){for(r in(p=new Image).onerror=t.onerror,p.setAttribute("draggable","false"),n=t.attributes(m,b))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&!p.hasAttribute(r)&&p.setAttribute(r,n[r]);p.className=t.className,p.alt=m,p.src=y,d=!0,a.appendChild(p)}p||a.appendChild(u(m,!1)),p=null}d&&(h<i.length&&a.appendChild(u(i.slice(h),!0)),s.parentNode.replaceChild(a,s))}return e}function h(e,t){return m(e,(function(e){var o,n,r=e,a=l(e),s=t.callback(a,t);if(a&&s){for(n in r="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',s,'"'),o=t.attributes(e,a))o.hasOwnProperty(n)&&0!==n.indexOf("on")&&-1===r.indexOf(" "+n+"=")&&(r=r.concat(" ",n,'="',o[n].replace(d,g),'"'));r=r.concat("/>")}return r}))}function g(e){return t[e]}function p(){return null}function m(e,t){return String(e).replace(o,t)}function b(e,t){for(var o=[],n=0,r=0,d=0;d<e.length;)n=e.charCodeAt(d++),r?(o.push((65536+(r-55296<<10)+(n-56320)).toString(16)),r=0):55296<=n&&n<=56319?r=n:o.push(n.toString(16));return o.join(t||"-")}}(),f=e=>{if("true"!=e.getAttribute("twemoji-processed"))try{const t=e.parentElement;if(null==t)return;const o=t.parentNode;if(null==o)throw console.log(t),new Error("No original parent");const n=e.getAttribute("alt"),r=e.getBoundingClientRect();if(null==n)console.error("Unicode not found");else{null==e.querySelector(".fui-ChatMyMessage")?t.outerHTML=`${n}`:t.innerHTML=`${n}`;const d=l.parse(o,{base:"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/",folder:"svg",ext:".svg"});d.style.width=`${r.width}px !important`,d.style.height=`${r.height}px !important`}}catch(e){console.error("Failed to convert emoji img to chr",e)}finally{e.setAttribute("twemoji-processed","true")}},h=new DOMParser;function g(e){return new Promise(((t,o)=>{const n=new MutationObserver((o=>{const r=document.querySelector(e);r&&(n.disconnect(),t(r))}));n.observe(document.body,{childList:!0,subtree:!0}),setTimeout((()=>{n.disconnect(),o(new Error("Element not found within time limit"))}),2e4)}))}function p(e){return h.parseFromString(e,"text/html").body.firstElementChild}const m="https://apiteamsplus.pythonanywhere.com";class b{parser;themeShopUI=null;shopUiVisible=!1;authProvider;currentSearchQuery;themeProvider;constructor(e,t,o){this.parser=new DOMParser,this.authProvider=o,this.currentSearchQuery="",this.themeProvider=e,this.p_init(t)}async p_injectButton(e){(await e.addAppAndGetButton("Browse Themes","https://www.svgrepo.com/show/148598/shop-cart.svg",'\n            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t viewBox="0 0 44.16 44.16" xml:space="preserve">\n<g>\n\t<path style="fill:var(--colorNeutralForeground3);" d="M44.16,6.6H11.592L10.66,1.179H2.408C1.076,1.179,0,2.257,0,3.588v2.408h6.602l4.248,24.709\n\t\tc0.094,0.544,0.617,0.985,1.17,0.985h28.527c1.332,0,2.41-1.077,2.41-2.411v-2.406H15.078l-0.587-3.414h22.042\n\t\tc2.66,0,5.172-2.128,5.611-4.75L44.16,6.6z"/>\n\t<circle style="fill:var(--colorNeutralForeground3);" cx="19.47" cy="38.817" r="4.165"/>\n\t<path style="fill:var(--colorNeutralForeground3);" d="M29.762,38.816c0,2.299,1.863,4.164,4.162,4.164c2.301,0,4.168-1.865,4.168-4.164\n\t\tc0-2.299-1.867-4.166-4.168-4.166C31.625,34.65,29.762,36.518,29.762,38.816z"/>\n</g>\n</svg>\n            ')).forEach((e=>{e.addEventListener("click",(()=>{this.shopUiVisible?(this.shopUiVisible=!1,this.p_hideThemeShopUI()):(this.shopUiVisible=!0,this.p_showThemeShopUI())}))})),console.log("Injected button")}loaderState(e){if(null==this.themeShopUI)return;const t=this.themeShopUI.querySelector("#listings-loader");null!=t&&(e?(t.style.display="block",t.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"})):(t.animate([{transform:"translateY(0px)",opacity:"1"},{transform:"translateY(-15px)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((()=>{t.style.display="none"}),500)))}p_didIstarThis(e){return new Promise(((t,o)=>{null!=this.authProvider.currentToken?fetch(`${m}/api/v1/themes/wait_did_i_star_this?name=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.authProvider.currentToken}`}}).then((e=>(console.log(e),e.json()))).then((e=>{if(null==e.success||0==e.success)throw new Error("Success field not found or unsuccessfull");if(null==e.message)throw new Error("No message field found");if(null==e.data)throw new Error("No data field found");t(e.data)})).catch((e=>{console.error("Error:",e),o(e)})):o("no token")}))}async star(e){fetch(`${m}/api/v1/themes/star`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,token:await this.authProvider.getToken()})}).then((e=>(console.log(e),e.json()))).then((e=>{if(null==e.success||0==e.success)throw new Error("Success field not found or unsuccessfull");if(null==e.message)throw new Error("No message field found");console.log("Liked!"),this.p_refreshListings(this.currentSearchQuery)})).catch((e=>{console.error("Error:",e)}))}async changeIconStroke(e,t){try{1==await this.p_didIstarThis(e)?(t.classList.add("starred"),console.log("Starred")):console.log("Not starred")}catch(e){console.error("Failed",e)}}p_createCard(e,t,o,n,r){const d=p('\n<div class="listing-card">\n    <h3 class="theme-name">Theme</h3>\n    <p class="theme-description">This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look\n        very pretty!</p>\n    <div class="actions">\n        <button class="theme-install" id="theme-install">Install</button>\n        <button class="star" id="star-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none" class="star-icon">\n                <path d="M11.2691 4.41115C11.5006 3.89177 11.6164 3.63208 11.7776 3.55211C11.9176 3.48263 12.082 3.48263 12.222 3.55211C12.3832 3.63208 12.499 3.89177 12.7305 4.41115L14.5745 8.54808C14.643 8.70162 14.6772 8.77839 14.7302 8.83718C14.777 8.8892 14.8343 8.93081 14.8982 8.95929C14.9705 8.99149 15.0541 9.00031 15.2213 9.01795L19.7256 9.49336C20.2911 9.55304 20.5738 9.58288 20.6997 9.71147C20.809 9.82316 20.8598 9.97956 20.837 10.1342C20.8108 10.3122 20.5996 10.5025 20.1772 10.8832L16.8125 13.9154C16.6877 14.0279 16.6252 14.0842 16.5857 14.1527C16.5507 14.2134 16.5288 14.2807 16.5215 14.3503C16.5132 14.429 16.5306 14.5112 16.5655 14.6757L17.5053 19.1064C17.6233 19.6627 17.6823 19.9408 17.5989 20.1002C17.5264 20.2388 17.3934 20.3354 17.2393 20.3615C17.0619 20.3915 16.8156 20.2495 16.323 19.9654L12.3995 17.7024C12.2539 17.6184 12.1811 17.5765 12.1037 17.56C12.0352 17.5455 11.9644 17.5455 11.8959 17.56C11.8185 17.5765 11.7457 17.6184 11.6001 17.7024L7.67662 19.9654C7.18404 20.2495 6.93775 20.3915 6.76034 20.3615C6.60623 20.3354 6.47319 20.2388 6.40075 20.1002C6.31736 19.9408 6.37635 19.6627 6.49434 19.1064L7.4341 14.6757C7.46898 14.5112 7.48642 14.429 7.47814 14.3503C7.47081 14.2807 7.44894 14.2134 7.41394 14.1527C7.37439 14.0842 7.31195 14.0279 7.18708 13.9154L3.82246 10.8832C3.40005 10.5025 3.18884 10.3122 3.16258 10.1342C3.13978 9.97956 3.19059 9.82316 3.29993 9.71147C3.42581 9.58288 3.70856 9.55304 4.27406 9.49336L8.77835 9.01795C8.94553 9.00031 9.02911 8.99149 9.10139 8.95929C9.16534 8.93081 9.2226 8.8892 9.26946 8.83718C9.32241 8.77839 9.35663 8.70162 9.42508 8.54808L11.2691 4.41115Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                </svg>\n            <span>30k</span>\n        </button>\n    </div>\n</div>\n'),a=d.querySelector(".theme-name"),s=d.querySelector(".theme-description"),u=d.querySelector("span"),i=d.querySelector("#star-btn"),c=d.querySelector("#theme-install");if(null==a||null==s||null==u||null==i||null==c)return;const l=i.querySelector("svg");return null!=l?(a.textContent=e,s.textContent=t,u.textContent=r.toString(),this.changeIconStroke(e,l),i.addEventListener("click",(async()=>{console.log("The button got clicked!"),await this.authProvider.getToken()?this.star(e):alert("You must be logged in to do this")})),c.addEventListener("click",(async()=>{try{await this.themeProvider.dataManager.loadThemes(),this.themeProvider.p_syncInstanceWithDataManager();const e=this.themeProvider.p_isThemeValid(o);if(e){let t=1;const n=e.name;let r=n;for(;this.themeProvider.dataManager.currentThemes[r];)r=`${n} (${t})`,t++;this.themeProvider.addTheme(r,o),alert("Added theme")}else alert("Failed to parse theme")}catch(e){console.error("Failed to add theme: ",e),alert(`Failed to add theme: ${e}`)}})),d):void 0}p_refreshListings(e){if(null==this.themeShopUI)return;const t=this.themeShopUI.querySelector(".listings");null!=t&&(t.innerHTML="",this.loaderState(!0),fetch(`${m}/api/v1/themes/get?search=${e}`).then((e=>e.json())).then((e=>{console.log("Data:",e.data);for(const o in e.data){const n=e.data[o],r=this.p_createCard(n.name,n.desc,n.data,n.author,n.stars);r&&(r.style.opacity="0",r.style.transform="translateY(-15px)",t.appendChild(r),r.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}))}this.loaderState(!1)})).catch((e=>{this.loaderState(!1),console.error("Error:",e),alert("Error")})))}async p_hideThemeShopUI(){this.themeShopUI&&(this.themeShopUI.animate([{transform:"translateY(-50%) translateX(-50%)",opacity:"1"},{transform:"translateY(-60%) translateX(-50%)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((()=>{null!=this.themeShopUI&&(this.themeShopUI.style.display="none")}),500))}p_hideThemeShopUIInstant(){null!=this.themeShopUI&&(this.themeShopUI.style.display="none")}async p_updateCoinCount(){if(null==this.themeShopUI)return;const e=this.themeShopUI.querySelector("#coins");if(null==e)return;if(null==this.authProvider.currentToken)return void(e.textContent="Logged out");const t=this.authProvider.currentToken;fetch(`${m}/api/v1/user/get_coins`,{headers:{Authorization:`Bearer ${t}`}}).then((e=>{if(200!=e.status)throw new Error("Failed to get coin count");return e.json()})).then((t=>{const o=t.data;e.textContent=`${o} coins`})).catch((e=>{console.error(e),alert("Failed to fetch number of coins: "+e)}))}async p_showThemeShopUI(){this.themeShopUI&&(this.themeShopUI.style.display="flex",this.themeShopUI.style.opacity="0",this.themeShopUI.animate([{transform:"translateY(-65%) translateX(-50%)",opacity:"0"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}),this.p_refreshListings(this.currentSearchQuery),this.p_updateCoinCount())}async p_injectUi(){this.themeShopUI=p('\n<div class="main-container">\n    <div class="top-navbar">\n        <input type="text" name="" id="container-search" class="container-search" placeholder="Search" autocomplete="off">\n        <button class="container-search-submit" id="search-submit">Search</button>\n        <p class="container-n-points" id="coins">0 coins</p>\n        <button class="shop-close-button" id="shopCloseButton">\n            <img src="https://www.svgrepo.com/show/12848/x-symbol.svg" alt="X">\n        </button>\n    </div>\n    <div class="listings">\n        <div class="listings-loader-parent" id="listings-loader">\n            <span class="listings-loader"></span>\n        </div>\n    </div>\n</div>\n'),document.body.appendChild(this.themeShopUI),this.p_hideThemeShopUIInstant()}async p_searchBar(){if(null==this.themeShopUI)return;const e=this.themeShopUI.querySelector("#container-search"),t=this.themeShopUI.querySelector("#search-submit");null!=e&&null!=t&&(t.addEventListener("click",(()=>{this.currentSearchQuery=e.value,this.p_refreshListings(this.currentSearchQuery)})),e.addEventListener("input",(()=>{this.currentSearchQuery=e.value,this.p_refreshListings(this.currentSearchQuery)})))}p_closeButton(){null!=this.themeShopUI&&this.themeShopUI.querySelector("#shopCloseButton").addEventListener("click",(()=>{this.shopUiVisible=!1,this.p_hideThemeShopUI()}))}async p_init(e){this.p_injectButton(e),this.p_injectUi(),this.p_searchBar(),this.p_closeButton()}}const y=function(){return"y"===prompt("Confirm? Type 'y' or 'n'")};class w{dataManager;constructor(e){this.dataManager=e}isStringDict(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&Object.values(e).every((e=>"string"==typeof e))}p_syncDataManager(){}p_syncInstanceWithDataManager(){}p_dataManagerExists(){if(null==this.dataManager)throw new Error("Where is data manager")}p_isThemeValid_dataLegacy_parser(r){let s=JSON.parse(r);if(null==s.data)return void console.error("Data field not found; failed to load theme");let u={colors:s.data.varColors,classColors:s.data.classColors,fonts:s.data.fonts,pixelValues:s.data.otherSettings,backgrounds:s.data.backgrounds,emojis:{set:s.data.twemojiSupport?"twemoji":"default"}};return null==s.data.classColors&&(console.error("Field not found. Override with default."),u.classColors=n),null==s.data.varColors&&(console.error("Field not found. Override with default."),u.colors=e),null==s.data.fonts&&(console.error("Field not found. Override with default."),u.fonts=o),null==s.data.otherSettings&&(console.error("Field not found. Override with default."),u.pixelValues=t),null==s.data.twemojiSupport&&(console.error("Field not found. Override with default."),u.emojis=a),null==s.data.backgrounds&&(console.error("Backgrounds field not found. Overriding with default."),u.backgrounds=d),console.log(u),{data:u,name:s.name,data_version:s.data_version}}p_isThemeValid(e){let t=JSON.parse(e);if(null!=t.data){if(1==t.data_version)return console.log("Using legacy parser"),this.p_isThemeValid_dataLegacy_parser(e);for(const e of Object.keys(t.data)){if(0==i.includes(e))return void console.error("Error: invalid theme. Contains unrecognized theme.");if(0==this.isStringDict(t.data[e]))return void console.error("Error: Theme is not of valid type")}for(const e of i)null==t.data[e]&&(console.warn("Fixing missing key: ",e),t.data[e]={});return t}console.error("Data field not found; failed to load theme")}addTheme(e,t){console.log(e,t),this.p_syncInstanceWithDataManager(),this.p_dataManagerExists(),console.log("Adding theme ",e," to current themes"),this.dataManager.currentThemes[e]=t,this.p_syncDataManager(),this.dataManager.saveThemes(),this.dataManager.loadThemes(),this.p_syncDataManager(),console.log("Added theme")}async p_generateThemeData(e){console.log("GENERATE DATA");const t={data:this.dataManager.exportThemeData(),name:e,data_version:2};return console.log("EXPORT: ",t.data.backgrounds),JSON.stringify(t)}async applyTheme(e){this.p_dataManagerExists(),console.log(this.dataManager.currentThemes);const t=this.dataManager.currentThemes[e];console.log(t);let o=this.p_isThemeValid(t);if(null==o)throw Error("error");const n={...this.dataManager.currentData};try{this.dataManager.currentData=o.data;const e=document.querySelector("#twemojiSupport");e&&(e.checked="twemoji"==await this.dataManager.currentData.emojis.set,e.addEventListener("input",(function(){console.log("Save Twemoji state"),chrome.storage.local.set({twemoji:e.checked})}))),this.dataManager.saveAll(),console.log("Successfully loaded theme.")}catch(e){console.error("Failed to apply theme ",e),console.error("Reverting to original state."),this.dataManager.currentData=n,console.log("Reverted to original state.")}finally{console.log("Successfully applied theme with no issues.")}}async updateThemesList(){this.p_dataManagerExists(),console.log("Updating theme list");const e=document.querySelector("#availableThemes");if(null!=e){e.innerHTML="",await this.dataManager.loadThemes();for(const t in this.dataManager.currentThemes){const o=p('\n                <div class="theme">\n                    <h3 class="theme-title">Dark cozy blue</h3>\n                    <p class="theme-descripton">Color and fonts theme</p>\n                    <div class="actions">\n                        <button class="text-btn" id="apply-btn">Apply</button>\n                        <button class="text-btn" id="export-theme">\n                            Export\n                        </button>\n                        <button class="text-btn" id="delete-theme">\n                            Delete\n                        </button>\n                    </div>\n\n                </div>\n'),n=o.querySelector(".theme-title"),r=o.querySelector("#apply-btn"),d=o.querySelector("#export-theme"),a=o.querySelector("#delete-theme");if(null==n||null==d||null==r||null==a)return;n.textContent=`${t}`,r.textContent="Load",a.textContent="Delete",d.textContent="Export",r.addEventListener("click",(async()=>{0!=y()?(await this.dataManager.loadThemes(),this.dataManager.currentThemes=this.dataManager.currentThemes,await this.applyTheme(t),alert("Successfully applied theme. Please close and reopen the popup to see changes in the advanced tab.")):alert("User has not confirmed")})),a.addEventListener("click",(async()=>{if(0!=y())try{delete this.dataManager.currentThemes[t],this.dataManager.saveThemes()}catch(e){return console.error("Failed to delete: ",e),void alert("Failed to delete theme")}finally{await this.updateThemesList(),alert("Successfully deleted the theme")}else alert("User has not confirmed")})),d.addEventListener("click",(async()=>{if(null==this.dataManager.currentThemes[t])return console.error("Current theme not found"),void alert("Current theme not found");await navigator.clipboard.writeText(this.dataManager.currentThemes[t]),alert("Theme copied to clipboard")})),e.appendChild(o)}console.log("Done updating theme list")}else console.error("Failed to update available themes: element not found")}}var v={};!function e(t,o,n,r){var d=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a="function"==typeof Path2D&&"function"==typeof DOMMatrix,s=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),o=e.getContext("2d");o.fillRect(0,0,1,1);var n=e.transferToImageBitmap();try{o.createPattern(n,"no-repeat")}catch(e){return!1}return!0}();function u(){}function i(e){var n=o.exports.Promise,r=void 0!==n?n:t.Promise;return"function"==typeof r?new r(e):(e(u,u),null)}var c,l,f,h,g,p,m,b,y,w,v,k=(c=s,l=new Map,{transform:function(e){if(c)return e;if(l.has(e))return l.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),l.set(e,t),t},clear:function(){l.clear()}}),S=(g=Math.floor(1e3/60),p={},m=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(f=function(e){var t=Math.random();return p[t]=requestAnimationFrame((function o(n){m===n||m+g-1<n?(m=n,delete p[t],e()):p[t]=requestAnimationFrame(o)})),t},h=function(e){p[e]&&cancelAnimationFrame(p[e])}):(f=function(e){return setTimeout(e,g)},h=function(e){return clearTimeout(e)}),{frame:f,cancel:h}),B=(w={},function(){if(b)return b;if(!n&&d){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{b=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("🎊 Could not load worker",e),null}!function(e){function t(t,o){e.postMessage({options:t||{},callback:o})}e.init=function(t){var o=t.transferControlToOffscreen();e.postMessage({canvas:o},[o])},e.fire=function(o,n,r){if(y)return t(o,null),y;var d=Math.random().toString(36).slice(2);return y=i((function(n){function a(t){t.data.callback===d&&(delete w[d],e.removeEventListener("message",a),y=null,k.clear(),r(),n())}e.addEventListener("message",a),t(o,d),w[d]=a.bind(null,{data:{callback:d}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),w)w[t](),delete w[t]}}(b)}return b}),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(e,t,o){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:A[t],o)}function x(e){return e<0?0:Math.floor(e)}function P(e){return parseInt(e,16)}function F(e){return e.map(E)}function E(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:P(t.substring(0,2)),g:P(t.substring(2,4)),b:P(t.substring(4,6))}}function M(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function T(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function L(e,o){var s,u=!e,c=!!C(o||{},"resize"),l=!1,f=C(o,"disableForReducedMotion",Boolean),h=d&&C(o||{},"useWorker")?B():null,g=u?M:T,p=!(!e||!h||!e.__confetti_initialized),m="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function b(t,o,d){for(var u,c,l,f,h=C(t,"particleCount",x),p=C(t,"angle",Number),m=C(t,"spread",Number),b=C(t,"startVelocity",Number),y=C(t,"decay",Number),w=C(t,"gravity",Number),v=C(t,"drift",Number),B=C(t,"colors",F),A=C(t,"ticks",Number),P=C(t,"shapes"),E=C(t,"scalar"),M=!!C(t,"flat"),T=function(e){var t=C(e,"origin",Object);return t.x=C(t,"x",Number),t.y=C(t,"y",Number),t}(t),L=h,N=[],I=e.width*T.x,D=e.height*T.y;L--;)N.push((void 0,void 0,c=(u={x:I,y:D,angle:p,spread:m,startVelocity:b,color:B[L%B.length],shape:P[(f=P.length,Math.floor(Math.random()*(f-0))+0)],ticks:A,decay:y,gravity:w,drift:v,scalar:E,flat:M}).angle*(Math.PI/180),l=u.spread*(Math.PI/180),{x:u.x,y:u.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*u.startVelocity+Math.random()*u.startVelocity,angle2D:-c+(.5*l-Math.random()*l),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:u.color,shape:u.shape,tick:0,totalTicks:u.ticks,decay:u.decay,drift:u.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*u.gravity,ovalScalar:.6,scalar:u.scalar,flat:u.flat}));return s?s.addFettis(N):(s=function(e,t,o,d,s){var u,c,l=t.slice(),f=e.getContext("2d"),h=i((function(t){function i(){u=c=null,f.clearRect(0,0,d.width,d.height),k.clear(),s(),t()}u=S.frame((function t(){!n||d.width===r.width&&d.height===r.height||(d.width=e.width=r.width,d.height=e.height=r.height),d.width||d.height||(o(e),d.width=e.width,d.height=e.height),f.clearRect(0,0,d.width,d.height),(l=l.filter((function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var o=t.tick++/t.totalTicks,n=t.x+t.random*t.tiltCos,r=t.y+t.random*t.tiltSin,d=t.wobbleX+t.random*t.tiltCos,s=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-o)+")",e.beginPath(),a&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,o,n,r,d,a){var s=new Path2D(e),u=new Path2D;u.addPath(s,new DOMMatrix(t));var i=new Path2D;return i.addPath(u,new DOMMatrix([Math.cos(a)*r,Math.sin(a)*r,-Math.sin(a)*d,Math.cos(a)*d,o,n])),i}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(d-n),.1*Math.abs(s-r),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var u=Math.PI/10*t.wobble,i=.1*Math.abs(d-n),c=.1*Math.abs(s-r),l=t.shape.bitmap.width*t.scalar,f=t.shape.bitmap.height*t.scalar,h=new DOMMatrix([Math.cos(u)*i,Math.sin(u)*i,-Math.sin(u)*c,Math.cos(u)*c,t.x,t.y]);h.multiplySelf(new DOMMatrix(t.shape.matrix));var g=e.createPattern(k.transform(t.shape.bitmap),"no-repeat");g.setTransform(h),e.globalAlpha=1-o,e.fillStyle=g,e.fillRect(t.x-l/2,t.y-f/2,l,f),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(d-n)*t.ovalScalar,Math.abs(s-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,o,n,r,d,a,s){e.save(),e.translate(t,o),e.rotate(d),e.scale(n,r),e.arc(0,0,1,0,s,void 0),e.restore()}(e,t.x,t.y,Math.abs(d-n)*t.ovalScalar,Math.abs(s-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var p=Math.PI/2*3,m=4*t.scalar,b=8*t.scalar,y=t.x,w=t.y,v=5,S=Math.PI/v;v--;)y=t.x+Math.cos(p)*b,w=t.y+Math.sin(p)*b,e.lineTo(y,w),p+=S,y=t.x+Math.cos(p)*m,w=t.y+Math.sin(p)*m,e.lineTo(y,w),p+=S;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(r)),e.lineTo(Math.floor(d),Math.floor(s)),e.lineTo(Math.floor(n),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(f,e)}))).length?u=S.frame(t):i()})),c=i}));return{addFettis:function(e){return l=l.concat(e),h},canvas:e,promise:h,reset:function(){u&&S.cancel(u),c&&c()}}}(e,N,g,o,d),s.promise)}function y(o){var n=f||C(o,"disableForReducedMotion",Boolean),r=C(o,"zIndex",Number);if(n&&m)return i((function(e){e()}));u&&s?e=s.canvas:u&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(r),document.body.appendChild(e)),c&&!p&&g(e);var d={width:e.width,height:e.height};function a(){if(h){var t={getBoundingClientRect:function(){if(!u)return e.getBoundingClientRect()}};return g(t),void h.postMessage({resize:{width:t.width,height:t.height}})}d.width=d.height=null}function y(){s=null,c&&(l=!1,t.removeEventListener("resize",a)),u&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,p=!1)}return h&&!p&&h.init(e),p=!0,h&&(e.__confetti_initialized=!0),c&&!l&&(l=!0,t.addEventListener("resize",a,!1)),h?h.fire(o,d,y):b(o,d,y)}return y.reset=function(){h&&h.reset(),s&&s.reset()},y}function N(){return v||(v=L(null,{useWorker:!0,resize:!0})),v}o.exports=function(){return N().apply(this,arguments)},o.exports.reset=function(){N().reset()},o.exports.create=L,o.exports.shapeFromPath=function(e){if(!a)throw new Error("path confetti are not supported in this browser");var t,o;"string"==typeof e?t=e:(t=e.path,o=e.matrix);var n=new Path2D(t),r=document.createElement("canvas").getContext("2d");if(!o){for(var d,s,u=1e3,i=u,c=u,l=0,f=0,h=0;h<u;h+=2)for(var g=0;g<u;g+=2)r.isPointInPath(n,h,g,"nonzero")&&(i=Math.min(i,h),c=Math.min(c,g),l=Math.max(l,h),f=Math.max(f,g));d=l-i,s=f-c;var p=Math.min(10/d,10/s);o=[p,0,0,p,-Math.round(d/2+i)*p,-Math.round(s/2+c)*p]}return{type:"path",path:t,matrix:o}},o.exports.shapeFromText=function(e){var t,o=1,n="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,o="scalar"in e?e.scalar:o,r="fontFamily"in e?e.fontFamily:r,n="color"in e?e.color:n);var d=10*o,a=d+"px "+r,s=new OffscreenCanvas(d,d),u=s.getContext("2d");u.font=a;var i=u.measureText(t),c=Math.ceil(i.actualBoundingBoxRight+i.actualBoundingBoxLeft),l=Math.ceil(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent),f=i.actualBoundingBoxLeft+2,h=i.actualBoundingBoxAscent+2;c+=4,l+=4,(u=(s=new OffscreenCanvas(c,l)).getContext("2d")).font=a,u.fillStyle=n,u.fillText(t,f,h);var g=1/o;return{type:"bitmap",bitmap:s.transferToImageBitmap(),matrix:[g,0,0,g,-c*g/2,-l*g/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),v,!1);const k=v.exports;v.exports.create;class S{audioCtx;audioBuffer;constructor(e){this.audioCtx=e}async loadSound(e){try{if(!e)throw new Error("No audio file path provided");const t=chrome.runtime.getURL(e);if(console.log("Attempt to fetch at: ",t),"chrome-extension://invalid/"==t)throw new Error(`Chrome runtime returned INVALID url while trying to fetch ${e}`);const o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch audio: ${o.status} ${o.statusText}`);const n=await o.arrayBuffer();this.audioBuffer=await this.audioCtx.decodeAudioData(n)}catch(e){throw console.error("Error loading sound:",e),e}}playSound(e){if(null==this.audioBuffer)throw new Error("Audio buffer has not been defined yet");const t=this.audioCtx.createBufferSource();t.buffer=this.audioBuffer;const o=this.audioCtx.createGain();o.gain.value=e,t.connect(o),o.connect(this.audioCtx.destination),t.start()}}const B=["0","1","2","3","4","5","6","7","8","9"],A={0:"assets/digit0.png",1:"assets/digit1.png",2:"assets/digit2.png",3:"assets/digit3.png",4:"assets/digit4.png",5:"assets/digit5.png",6:"assets/digit6.png",7:"assets/digit7.png",8:"assets/digit8.png",9:"assets/digit9.png"};class C{windowElement;currentDigits;audio=new S(new AudioContext);placeAudio=new S(new AudioContext);loseAudio=new S(new AudioContext);winAudio=new S(new AudioContext);rolling=!1;windowVisible=!1;authProvider;noRewardPopupShown=!1;constructor(e){this.currentDigits={},this.authProvider=e,this.windowElement=p('\n        <div class="window">\n        <img class="window-background" src="assets/gamble_bg_normal.png">\n        <div class="counters">\n            <div class="counter-container" id="counter0">\n                <div id="counter" class="counter" data-counter-id="0">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n            <div class="counter-container "  id="counter1">\n                <div id="counter " class="counter " data-counter-id="1">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n            <div class="counter-container "  id="counter2">\n                <div id="counter " class="counter " data-counter-id="2">\n                    <img src="assets/digit0.png" alt="0" class="digit" data-number="0">\n                    <img src="assets/digit1.png" alt="1" class="digit" data-number="1">\n                    <img src="assets/digit2.png" alt="2" class="digit" data-number="2">\n                    <img src="assets/digit3.png" alt="3" class="digit" data-number="3">\n                    <img src="assets/digit4.png" alt="4" class="digit" data-number="4">\n                    <img src="assets/digit5.png" alt="5" class="digit" data-number="5">\n                    <img src="assets/digit6.png" alt="6" class="digit" data-number="6">\n                    <img src="assets/digit7.png" alt="7" class="digit" data-number="7">\n                    <img src="assets/digit8.png" alt="8" class="digit" data-number="8">\n                    <img src="assets/digit9.png" alt="9" class="digit" data-number="9">\n                </div>\n            </div>\n        </div>\n        <button id="roll">Roll</button>\n        <button id="gambling_login">Login</button>\n        <img src="assets/gamble_handle.png" alt="" class="handle-img">\n\n    </div>\n'),document.body.appendChild(this.windowElement),this.windowVisiblity(this.windowVisible),this.p_fixImages(),this.onLoad(),this.p_injectButton(),this.loginButtonRegister()}async p_fixImages(){for(let e=0;e<10;e++){const t=`[data-number="${e}"]`,o=this.windowElement.querySelectorAll(t);for(const t of o)if(t instanceof HTMLImageElement){const o=chrome.runtime.getURL(A[e]);console.log(`Fix url: ${o}`),t.src=o}}const e=this.windowElement.querySelectorAll(".counter");for(const t of e){const e=chrome.runtime.getURL("assets/digitBg.png");console.log("Fix background on: ",t),t.style.backgroundImage=`url(${e})`}const t=this.windowElement.querySelector(".window-background");this.windowElement.querySelector(".counters"),t.src=chrome.runtime.getURL("assets/gamble_bg_normal.png"),this.windowElement.querySelector(".handle-img").src=chrome.runtime.getURL("assets/gamble_handle.png")}async p_injectButton(){(await window.teamsPlusAppsManager.addAppAndGetButton("Fun Minigame","https://www.svgrepo.com/show/402695/slot-machine.svg")).forEach((e=>{e.addEventListener("click",(()=>{1==this.windowVisible?(this.windowVisible=!1,this.windowVisiblity(!1)):0==this.windowVisible&&(this.windowVisible=!0,this.windowVisiblity(!0))}))})),console.log("Injected button")}loginButtonRegister(){const e=this.windowElement.querySelector("#gambling_login");if(e){if(null!=this.authProvider.currentToken)return void e.remove();e.addEventListener("click",(async()=>{null==this.authProvider.currentToken?(await this.authProvider.getToken(),e.remove()):e.remove()}))}}loginButtonUpdate(){const e=this.windowElement.querySelector("#gambling_login");e&&null!=this.authProvider.currentToken&&e.remove()}windowVisiblity(e){if(1==e)this.windowElement.style.display="block",this.windowElement.style.opacity="0",this.loginButtonUpdate(),this.windowElement.animate([{opacity:"0",filter:"blur(10px)"},{opacity:"1",filter:"blur(0px)"}],{duration:1e3,easing:"ease-out",iterations:1,fill:"forwards"});else{if(0!=e)throw new Error(`Unknown window visibility state: ${e}`);this.windowElement.animate([{opacity:"1",filter:"blur(0px)"},{opacity:"0",filter:"blur(10px)"}],{duration:1e3,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((()=>{this.windowElement.style.display="none"}),1e3)}}hideDigits(e){for(const t of B){const o=e.querySelector(`[data-number="${t}"]`);o?o.style.display="none":console.error("Number ",t,"not found")}}countUp(e,t,o,n){return new Promise((r=>{this.currentDigits[t]+=1,this.currentDigits[t]>B.length-1&&(this.currentDigits[t]=0);let d=this.currentDigits[t]-1;0===this.currentDigits[t]&&(d=B.length-1),this.hideDigits(e);const a=e.querySelector(`[data-number="${B[d]}"]`),s=e.querySelector(`[data-number="${B[this.currentDigits[t]]}"]`);if(!s||!a)return console.error("Elements not found: ",B[d],B[this.currentDigits[t]]),console.error(d,this.currentDigits[t]),void r();s.style.zIndex="1",a.style.zIndex="0",s.style.display="flex",a.style.display="flex";let u="linear";0==n?(console.log("Set ease in"),u="ease-in"):1==n&&(console.log("Set ease out"),u="ease-out"),console.log("Easing style: ",u);const i=s.animate([{transform:"translateY(100%)"},{transform:"translateY(-50%)"}],{duration:o,fill:"forwards",easing:u}),c=a.animate([{transform:"translateY(-50%)"},{transform:"translateY(-150%)"}],{duration:o,fill:"forwards",easing:u});this.audio.playSound(.1),Promise.all([i.finished,c.finished]).then((()=>{a.style.display="none",r()}))}))}sharpEase(e){return Math.sin(e*Math.PI)**.2}waitTimeCalc(e,t){return Math.max(1-this.sharpEase(t/e),.06)}async countBy(e,t,o){for(let n=0;n<e;n++){let r;0==n&&(console.log("Ease in"),r=0),n==e-1&&(console.log("Ease out"),r=1);const d=2e3*this.waitTimeCalc(e,n);console.log("Animation time: ",d),await this.countUp(o,t,d,r)}this.placeAudio.playSound(.5)}getRandomInt(e,t){return Math.floor(Math.random()*(t-e)+e)}confettiFireworks(){var e=Date.now()+15e3,t={startVelocity:30,spread:360,ticks:60,zIndex:0};function o(e,t){return Math.random()*(t-e)+e}var n=setInterval((function(){var r=e-Date.now();if(r<=0)return clearInterval(n);var d=r/15e3*50;k({...t,particleCount:d,origin:{x:o(.1,.3),y:Math.random()-.2}}),k({...t,particleCount:d,origin:{x:o(.7,.9),y:Math.random()-.2}})}),250)}confettiSides(){var e=Date.now()+15e3,t=["#bb0000","#ffffff"];!function o(){k({particleCount:2,angle:60,spread:55,origin:{x:0},colors:t}),k({particleCount:2,angle:120,spread:55,origin:{x:1},colors:t}),Date.now()<e&&requestAnimationFrame(o)}()}shuffleArray(e){let t=e.slice();for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}return t}generateRandomOrder(e){const t=Array.from({length:e+1},((e,t)=>t));return this.shuffleArray(t)}randomizeFunction(){const e=this.generateRandomOrder(2);if(console.log(e),this.getRandomInt(1,100)<=50){if(this.getRandomInt(1,100)<=70){console.log("Trick");let t=[];const o=this.getRandomInt(1,B.length);for(const n of e){const e=this.currentDigits[n]+1,r=B.length-(e-o);if(Number.isNaN(r))throw console.error(this.currentDigits),new Error(`Amount to add is NaN: \n                        i: ${n},\n                        currentDigit: ${e},\n                        target: ${o}\n                            `);if(console.log("Amount to add: ",r),console.log("For: ",n),2==n){const e=this.getRandomInt(1,3);1==e?t.push(r+1):(2==e||console.error("Randomizer chose: ",e),t.push(r+-1))}else t.push(r)}return{values:t,order:e}}{console.log("All three should be the same");let t=[];const o=this.getRandomInt(1,B.length);for(const n of e){const e=this.currentDigits[n]+1,r=B.length-(e-o);console.log("Amount to add: ",r),t.push(r)}return{values:t,order:e}}}{let t=[];for(let e=0;e<3;e++)t.push(this.getRandomInt(1,B.length));return{values:t,order:e}}}async countTo(e,t){const o=[],n=t?10:1;for(let t=0;t<e.length;t++){let r=2*e[t][1]*n;2==e[t][1]&&(r=4*e[t][1]*n);const d=r+70+(e[t][0]-(this.currentDigits[t]+(r+70)))%10,a=this.countBy(d,t,this.windowElement.querySelector(`[data-counter-id="${t}"]`));o.push(a),await new Promise((e=>setTimeout(e,1e3)))}await Promise.all(o)}async shuffle(){if(1==this.rolling)return;this.rolling=!0;let e=this.authProvider.currentToken;null==e&&0==this.noRewardPopupShown&&(alert("Note: You will not receive any reward from winning when you are not logged in. This message will not show again in this session."),this.noRewardPopupShown=!0),this.windowElement.querySelector(".window-background").src=chrome.runtime.getURL("assets/gamble_bg_normal.png");const t={};e&&(t.Authorization=`Bearer ${e}`);const o=(await fetch(`${m}/api/v1/fun_minigame/game_next`,{method:"GET",headers:t}).then((e=>{if(200!=e.status)throw new Error("Response not successfull");return e.json()}))).data;if(!o)throw new Error("Bad response");const n=o.digits,r=o.winToken,d=o.isTricked;if(!n||null==d||null==r)throw new Error("Bad response");if(await this.countTo(n,d),console.log("All digits finished counting."),n[0][0]!=n[1][0]||n[1][0]!=n[2][0])this.loseAudio.playSound(.2),console.log("LOSE");else if(console.log("WIN!"),this.windowElement.querySelector(".window-background").src=chrome.runtime.getURL("assets/gamble_bg_win.png"),this.winAudio.playSound(1),k(),this.confettiSides(),this.confettiFireworks(),""!=r){const t=p('\n    <div class="gamblingReward">\n        <h3>You got money</h3>\n        <p>Click below to get your $$$</p>\n        <button type="button" class="gamblingClaimReward">Claim reward</button>\n    </div>\n');document.body.appendChild(t);const o=t.querySelector("button");o&&o.addEventListener("click",(async()=>{fetch(`${m}/api/v1/fun_minigame/redeem_token`,{method:"POST",body:JSON.stringify({rewardToken:r}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then((e=>{if(200!=e.status)throw new Error("Failed to redeem token");alert("Successfully redeemed token!")})).catch((e=>{alert(`Failed to redeem token: ${e}`)})).finally((()=>{t.remove()}))}))}this.rolling=!1}init(){this.audio.loadSound("sounds/gamble/beep.wav"),this.placeAudio.loadSound("sounds/gamble/boom.mp3"),this.loseAudio.loadSound("sounds/gamble/lost.mp3"),this.winAudio.loadSound("sounds/gamble/win.mp3");for(let e=0;e<3;e++)this.currentDigits[e]=0}async onLoad(){this.init();const e=this.windowElement.querySelector("#roll");if(!e)throw new Error("Roll button is null");e.addEventListener("click",(async()=>{try{await this.shuffle()}catch(e){console.error(e),alert(`An error occured while trying to connect to the server: ${e}`)}}))}}async function x(e,t="public"){const o="public"===t?"spki":"pkcs8",n="public"===t?"PUBLIC KEY":"PRIVATE KEY",r=await window.crypto.subtle.exportKey(o,e);return[`-----BEGIN ${n}-----`,...btoa(String.fromCharCode(...new Uint8Array(r))).match(/.{1,64}/g),`-----END ${n}-----`].join("\n")}function P(e){const t=atob(e),o=t.length,n=new Uint8Array(o);for(let e=0;e<o;e++)n[e]=t.charCodeAt(e);return n}class F{keypair;aesKey;aesKeyString;constructor(){this.asyncInit()}async waitForKey(){for(;null==this.aesKey||null==this.aesKey;)await new Promise((e=>setTimeout(e,100)));return!0}async asyncInit(){await this.createRSAKeypair(),await this.getSharedAESKey()}async createRSAKeypair(){console.log("Creating RSA keypair"),this.keypair=await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),console.log("Keypair OK")}async getSharedAESKey(){console.log("Attempt to establish safe-tunnel connection");const e=await fetch(`${m}/api/v1/safe_tunnel/handshake`,{method:"POST",body:JSON.stringify({publicKey:await x(this.keypair.publicKey,"public")}),headers:{"Content-Type":"application/json"}}),t=await e.json();if(null==t.message)throw new Error("Invalid server response");if(0==t.success)throw new Error(`Failed to establish secure connection: ${t.message}`);if(null==t.data)throw new Error("Server returned an invalid response");this.aesKeyString=t.data.ks,console.log(this.aesKeyString);const o=await window.crypto.subtle.decrypt({name:"RSA-OAEP"},this.keypair.privateKey,P(t.data.k));this.aesKey=await window.crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!1,["encrypt","decrypt"]),console.log("Successfully established safe-tunnel connection")}async safeTunnelEncrypt(e){try{console.log("Wait for AES finish creation"),await this.waitForKey(),console.log("AES Creation is done"),console.log("AES key:",this.aesKey);const t=crypto.getRandomValues(new Uint8Array(12)),o=(new TextEncoder).encode(e),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},this.aesKey,o),r=btoa(String.fromCharCode(...new Uint8Array(n)));return{iv:btoa(String.fromCharCode(...new Uint8Array(t))),ct:r,k:this.aesKeyString}}catch(e){throw alert("Safe-tunnel encryption failed. Please refresh and try again."),new Error(`Safe-tunnel encryption failed: ${e}`)}}async safeTunnelDecrypt(e,t){try{const o={name:"AES-GCM",iv:P(t)},n=await window.crypto.subtle.decrypt(o,this.aesKey,P(e)),r=(new TextDecoder).decode(n);return JSON.parse(r)}catch(e){throw alert("Safe-tunnel decryption failed. Please refresh and try again."),new Error(`Safe-tunnel decryption failed: ${e}`)}}}async function E(){const e=p('\n    <div class="password-popup" id="pwd-popup">\n        <h3>Enter password</h3>\n        <p>Enter password to encryption key</p>\n\n        <input type="text" name="popup-pwd" id="popup-pwd-input" class="popup-pwd" autocomplete="off">\n\n        <button type="button" id="ok-btn">OK</button>\n    </div>');document.body.appendChild(e);const t=e.querySelector("input.popup-pwd"),o=e.querySelector("button");return t.focus(),new Promise((n=>{const r=()=>{n(t.value),o.removeEventListener("click",r),t.removeEventListener("keyup",d),e.parentNode&&e.parentNode.removeChild(e)},d=e=>{"Enter"===e.key&&r()};o.addEventListener("click",r),t.addEventListener("keyup",d)}))}class M{visible=!1;win;currentSearch="";currentSelected=null;authProvider;constructor(e){this.win=this.createWindow(),this.hideWindowInstant(),this.authProvider=e,this.injectTab(),this.refreshAccounts(),this.searchEvents(),this.encryptEvent(),this.messageObserver(),this.closeButtonEvent()}termsOfServiceAgree(){return null!=localStorage.getItem("tos_agree")||!!confirm("By using TeamsPlus encryption services, you agree to our terms of service, which can be found on our website at https://apiteamsplus.pythonanywhere.com/terms_of_service. Confirm below if you agree.")&&(localStorage.setItem("tos_agree","yes"),!0)}hideWindow(){this.win.animate([{transform:"translateY(-50%) translateX(-50%)",opacity:"1"},{transform:"translateY(-60%) translateX(-50%)",opacity:"0"}],{duration:500,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((()=>{this.win&&(this.win.style.display="none")}),500)}hideWindowInstant(){this.win.style.display="none"}showWindow(){this.win.style.opacity="0",this.win.style.display="block",this.win.animate([{transform:"translateY(-60%) translateX(-50%)",opacity:"0"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"});const e=this.win.querySelector("#encrypt-message");if(null==e)return;e.value="",this.currentSelected=null,this.currentSearch="";const t=this.win.querySelector("#selected");null!=t&&(t.innerHTML="Selected: <strong>No account selected. Please select an account to encrypt.</strong>");const o=this.win.querySelector("#encrypt-search");null!=o&&(o.value=""),this.refreshAccounts()}async injectTab(){(await window.teamsPlusAppsManager.addAppAndGetButton("Encryption","https://www.svgrepo.com/show/501247/lock.svg",'\n            <svg fill="var(--colorNeutralForeground3)" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1016.588 1242.353v338.823h-112.94v-338.823h112.94ZM960.118 112.94c217.976 0 395.294 177.318 395.294 395.294V903.53H564.824V508.235c0-217.976 177.317-395.294 395.294-395.294Zm508.235 790.588V508.235C1468.353 228.028 1240.325 0 960.118 0S451.882 228.028 451.882 508.235V903.53H226v790.589C226 1818.692 327.308 1920 451.882 1920h1016.47c124.575 0 225.883-101.308 225.883-225.882V903.529h-225.882Z" fill-rule="evenodd"/>\n</svg>')).forEach((e=>{e.addEventListener("click",(()=>{this.visible=!this.visible,this.visible?this.showWindow():this.hideWindow()}))}))}createWindow(){const e=p('\n<div class="encryption-ui-window">\n    <div class="title-container">\n        <div class="title-sub-container">\n            <img src="https://www.svgrepo.com/show/513833/lock.svg" alt="" class="lock-icon-title">\n            <h2 class="encryption-title">Encryption</h2>\n\n        </div>\n        <button id="encryptionCloseButton" class="encryption-close-button">\n            <img src="https://www.svgrepo.com/show/12848/x-symbol.svg" alt="X">\n        </button>   \n        \n    </div>\n    \n    <input type="text" name="search" id="encrypt-search" class="encryption-ui-search" placeholder="Search for accounts..." autocomplete="off">\n    <div class="encryption-ui-people">\n\n\n    </div>\n    <p id="selected">Selected: null</p>\n    <div class="center">\n        <textarea name="encrypt-message" id="encrypt-message" rows="5" placeholder="Type your message here"></textarea>\n    </div>\n\n    <div class="center">\n        <button type="button" id="encrypt-btn">\n            <div class="btn-with-icon">\n                <img src="https://www.svgrepo.com/show/513833/lock.svg" alt="" class="btn-icon">\n                <span>Encrypt</span>\n            </div>\n        </button>\n    </div>\n    \n    <div class="center">\n        <textarea name="" id="encrypt-output" placeholder="Output will appear here" rows="2"></textarea>\n    </div>\n    \n</div>\n');return document.body.appendChild(e),e}refreshAccounts(){const e=this.win.querySelector(".encryption-ui-people");if(null==e)throw new Error("List not found");const t=this.win.querySelector("#selected");null!=t&&(e.innerHTML="",fetch(`${m}/api/v1/auth/search?search=${this.currentSearch}`,{method:"GET"}).then((e=>e.json())).then((o=>{if(!o.message||1!=o.success||!o.data)throw new Error(o.message);{const n=o.data;for(const o in n){const r=n[o],d=p('\n<div class="person">\n    <p id="account-info">Bob</p>\n    <span id="account-id">ID: 17</span>\n    <div class="center">\n        <button type="button" id="select">Select</button>\n    </div>\n</div>\n'),a=d.querySelector("#account-info"),s=d.querySelector("#account-id");if(null==a||null==s)throw new Error("Account info not found!");a.textContent=`${o}`,s.textContent=`ID: ${r}`;const u=d.querySelector("#select");if(null==u)throw new Error("select btn");u.addEventListener("click",(()=>{this.currentSelected=r,t.textContent=`Selected: ${o}/${r}`})),e.appendChild(d),d.style.opacity="0",d.style.transform="translateY(-15px)",d.animate([{transform:"translateY(-15px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],{duration:500,easing:"ease-out",iterations:1,fill:"forwards"}),console.log(`Added: ${o}`)}}})).catch((e=>{console.error("Error:",e),e instanceof Error?alert(`Error: ${e.message}`):alert("Error")})))}searchEvents(){const e=this.win.querySelector("#encrypt-search");null!=e&&e.addEventListener("input",(()=>{this.currentSearch=e.value,this.refreshAccounts()}))}encryptEvent(){const e=this.win.querySelector("#encrypt-btn");if(null==e)return;const t=this.win.querySelector("#encrypt-message");null!=t&&e.addEventListener("click",(async()=>{if(null==this.currentSelected)return void alert("Please select an account before encrypting!");this.termsOfServiceAgree();const e=new F,o=JSON.stringify({destination:[this.currentSelected],body:t.value,pwd:await E()}),n=await e.safeTunnelEncrypt(o);fetch(`${m}/api/v1/encryption/encrypt`,{method:"POST",body:JSON.stringify(n),headers:{Authorization:`Bearer ${await this.authProvider.getToken()}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(!e.message||1!=e.success||!e.data)throw new Error(e.message);{e.note&&alert(`Note: ${e.note}`);const t=`[Encrypted Message]\\\\\\\\${JSON.stringify(e.data)}\\\\\\\\[END]`,o=this.win.querySelector("#encrypt-output");o&&(o.value=t),navigator.clipboard.writeText(t),alert("Copied to clipboard")}})).catch((e=>{console.error("Error:",e),e instanceof Error?alert(`Error: ${e.message}`):alert("Error")}))}))}isValidEncrypted(e){const t=e.split("\\\\\\\\");if(3!=t.length)return!1;const o=t[1];try{JSON.parse(o)}catch(e){return!1}finally{return!0}}async attemptDecrypt(e){this.termsOfServiceAgree();const t=new F,o=JSON.stringify({body:e.body,key:e.keys,iv:e.iv,signature:e.signature,pwd:await E(),author:e.author});fetch(`${m}/api/v1/encryption/decrypt`,{method:"POST",body:JSON.stringify(await t.safeTunnelEncrypt(o)),headers:{Authorization:`Bearer ${await this.authProvider.getToken()}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((async e=>{const o=await t.safeTunnelDecrypt(e.ct,e.iv);if(!o.message||1!=o.success||!o.data)throw new Error(o.message);alert(`Message was: ${o.data}`)})).catch((e=>{console.error("Error:",e),e instanceof Error?alert(`Error: ${e.message}`):alert("Error")}))}onMessage(e){const t=e.querySelector('[id^="content-"]');if(null==t)return void console.log("Mut observer warn: content- element not found under message");console.log(t.ariaLabel);const o=t.ariaLabel||"";if(this.isValidEncrypted(t.ariaLabel||"")&&null==t.querySelector("#decrypt-btn")){const e=p('\n<button type="button" id="decrypt-btn">Decrypt</button>\n');t.appendChild(e),e.addEventListener("click",(()=>{try{const e=o.split("\\\\\\\\")[1];this.attemptDecrypt(JSON.parse(e))}catch(e){alert(`Failed: ${e}`)}}))}}messageObserver(){const e=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&"chat-pane-message"===e.dataset.tid&&(console.log("New chat message detected:",e),this.onMessage(e)),(e instanceof HTMLElement||e instanceof DocumentFragment)&&e.querySelectorAll('[data-tid="chat-pane-message"]').forEach(((e,t)=>this.onMessage(e)))}));console.log("Starting Mutation observer on Body!"),e.observe(document.body,{childList:!0,subtree:!0})}closeButtonEvent(){const e=this.win.querySelector("#encryptionCloseButton");null!=e&&e.addEventListener("click",(()=>{this.hideWindow(),this.visible=!1}))}}const T=40,L=40,N=10;class I{x;y;constructor(e=0,t=0){this.x=e,this.y=t}multiply(e){return new I(this.x*e.x,this.y*e.y)}add(e){return new I(this.x+e.x,this.y+e.y)}multiplyScalar(e){return new I(this.x*e,this.y*e)}sub(e){return new I(this.x-e.x,this.y-e.y)}equals(e){return this.x==e.x&&this.y==e.y}}const D=new Image;D.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACUUlEQVRYhe2Zv2/TQBSAv4TIJQhBMyBAQgLGLPyaCkJqxNQRWMkfwIBEYMUDg/emEgPsFiN0zNggBFkogaUrlZAoQihUoJqE0qAXOcGxHN/VuSYe8klWdI59/vLsO997yXS7XVSU7U4FuAecBXL+4bvAJvDEdayqspOExAqW7Y4INYBTiu63gAXXsTYnJujLbQB5zb48oGhaMhfzXSMol5+DxSt73Cr97bVfrh2ivp7Faw+Oz/vnnDYpGBlB/5lb7rdPFLo4d3cjO7Cf5vjWygR3PTD5TGbuPGrHjhKJXPXhn6F9O7/3eLW+0/s8cjhLrVEIRjKObaAJrMrmOtansQWXrv6/rX2Wn3/n3YY3aJ85WaD1c17LMEQdqLiO1Rx1QFbVQ1hOCMoJn7+2ksgJi8D7st2plu1O5C9UCk6I+8BalKRSUEZrmOK5uaE9cosNcDFKMtEgEWpvfiUZJDp8AEquY/1AJ4JyYZlKwixdO8rtG8d4/XHepBx+JB/3G8oI9tGYqE1zWUZ33JtkCBGpvc32tgkhk31JO4JT4nxapplR3JwJjsmltAseT7tgat7FI5kJjsl22gWbaRdcnQmOQV2SKu3VzBSWW5L66q0H95kXm2DFdayeoDKCErmwXDAvvn7hQJb8gxW1UlBua5hnL1qhvDiD106UF0fJDfIRUpAXx8ppCU6IlSg5LcEDzovrfnJUiZJjCnnx/otHqS+/xVRYvwRLv5oT9ZbrWEYLmHHTzEKwBKyRF3v+OUYZeTW/1lz0C+Qq5Bjj9Wkh3X9DAP8AE6su5f4dqmsAAAAASUVORK5CYII=";const O=new Image;O.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACeUlEQVRYhe2ZP2/TQBiHfwnBxQhESlUBE6xZoJQlQpXaMWxlBX8ABiTSGQ8MnqFIDHwAz9CxU5VKqO1S/i0doRISRR1iECLUSmP0lnM4p2ffOTm3V4lHymD7nHt8vntz75tSFEUoCscNmwAeArgKoMK66QLYBvDC96xFWdeFCDpuSEIbAC5Lmu4AqPuetX1kgkxuC4CteEsHQC1NsiI6OSIbvJw9BsxO93B3bv/g+HXrFFbfltHZ63dis3uuiLrVOoJszj2LjyfHI3gPusK27ssKdtsl/tSCaE4qCTpueA3APPtMAbggu8cei9CoB/j1u4ezZ8po3D53qE3z6Wl+JIVkCjpuSDL0VLPSpxhg/HyAL9/a/ZO3ajYW7k0kGtHrXl4vZ36PcA46blgF8ATAo7xiMbwcsbnVwW7QxWT1X5c0L3MLMrkWgBvDyqXBy6mS0Ncpd2kiOU3pFQ9Cr1hG/5F0j9x+7yKcO6XMRULhRlmQzTltr5VW55uP1cwwI1vBiFcxW63vdMnxKARqJcHWMKHkKCjdf7xHQfiTiXJgq3jeAI9UToTglAEeqZRVfviPE3mk/C+YzYkQ/G6ARyok+N5QtwNIcMkAj1TMF/Q96zNtzQxwERLvB5tGb7fwd0e9OEqSJCJnXiyEj4O0o/6gS47y4pnrAV6t/MDy2s9D10mcRldGIi/WmZfoyosTV33PCgDM6RjJtLyYJ56XyoIDks9HlRxk5Lw4hiR9z6KVfXPYEKQrLy6weAQ06u1ii0d5ObbyWx4cN/zKl34VA/WO71nCAmYRFdY6XwImEQolGeGkw+4Ron3DymrNNVYgl0FtUuvThNl/QwD4AwphHynh/q+DAAAAAElFTkSuQmCC";const j=new Image;j.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVRYhe2YPU/bQBjH/3mRSxBSiSoEkSqFjpnCy1J14G3qmFadkD8AAxJhrTxk8A5IDHwAz20/QRUmmHhbWJBopqYDFUEqBCuQ6nHvUsexY/suxq2Uv2QlFz/3f34+393jONFutyEiVTOnAZTYMQPgucOmAeAEwBc6DF35JpInNKCqmQSzDWAxZK59AGVDV04iAVQ1cxxABcBGSDCndsjH0JXrgQEyuCqAoiQc1ymApSCQyRjgwLyqzLuv+gJGBBcK0m8EKxHBcRVZDk95zkG2Wo8jhLNr1mt19xvB7cixAuRyHUG2CV9GTeXQK7fN3GsES09J1i/nfws4Ey1L8JxegM7C/xRyzelbSeLWEFBWQ0BZ9QCqmlmOC8Ytd6fUqZqZB3AIYCoOOJvqAF4bulLrADK4cwCZmOG47gAUCDLNfji0w2WeAankT/y4aljtl5NZNM1x3N0PJnsA/wxjyqUuWh/pvn/gZyaybazMX+PgrNGJvvnVxPtl4OpmBLfNhBRcCP+xT18fGrRI1u1Xpq+1cNt87DGu1U3rHMWISsB/nQDzvLU496fj6Ejv7pOfUrpiRCTgn6dIPg/xbunB+lyYG8V84e96oe9v34x1xYhIwD+ddstDV7i5+kIYxE9h/GkEW7zxuZry7RAkRqavI6ZFgDXe2j/yr3xBYmT6OmJq1NrlLdqHtD3Xu26JzsnshQL+u7ySfLeXOFrqtJr4hKVhpysb5EYdwL9u6Eruny911g1nhbnACnXcqnM4uP1xZ488WzFBbhq60vWWwevNgth7YUkZutJT6IeP/LIaAkoJwG/mlAbwfxLuDwAAAABJRU5ErkJggg==";const q=new Image;function R(e,t,o){return e+(t-e)*o}q.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVRYhe2YP0/bQBiHf4HowHQgqKoKUqV0zYbowkY+QrsWfwAGBjLjoYM700gMXbp5h7EjLIgFVKasRKpEKoaAWtXEonX1mjtzjXPmcraxkPJIGe5P3veJc3fvJZUwDDGM7QTJzkfAc1llOMtUGSLjMBHMytMTtJ1gqxyV0bnjXWw7QR3AMYDFMuQkegBWPZd1Y0Eu1wFglSwn8AE0SLLKO45lOWsGWFv5i3fNP1F772Aah6dT8Af5ZNeIb3Gnpcr69oC+9x0x8mIhhLtxOzKw87mKy37iLB2LMeO3aJNsyp9M9WaCxmiOKQbxN0mwLlr02B9CZ44Kg/h1EhTrMF4TaejMUWEQv1pVTfz45RKd87tV+6ZhofX+ubFYlvj0BONFQbuJ+Hr0K34zcdLxoz55jgkG8W9JsCtatNWJ3zfJtdLtBf/NMcEgfpdau6JF5xBt9bnZpER9kUVjWc5Cg/i7opJcyCXOmgkxy67x/Uc/ar96uYCboJbjQa0Vv+e5bElsklW51PmDCvxBDc/matFg/2c+YgKN+D53urvN8MLc4IW6bHqiDkO+zQj4lWenJMmW57JPcsfkR1NWJoJZmQhmRSV4XYLLyJwqwW/FuujnVAnuF+uin/NpCnouO6erWeFK9xzynAnSdvFj/gWizKUU9FxGi7ZdmNI9bZ5rJA+dgx8AnBUod8ZzKEkV9Fx2BaBZkCTFbPIcZoIoTlJLDrqlTpLMY022deWgurCmYTvBMgC69a6NKUbH1lbahshFUGA7wWsAb/mLpOeHplBtJRk6gPdV51wqAP4Bq4oVsts6YbQAAAAASUVORK5CYII=";class U{position;direction;numX;numY;frameCounter=0;pendingTurns=[];snakePoints=[];previousPoints=[];foods=[];foodCallback;lostCallback;otherPoints=[];useWSADControls=!1;gameStarted=!1;lastTurningCell=new I(1100,100);index=0;constructor(e,t,o,n,r,d,a,s=0){this.position=e,this.direction=t,this.foodCallback=d,this.lostCallback=a,this.numX=n,this.numY=r,this.index=s,this.keyEvents(),this.generateSnake(o)}setUseWSAD(e){this.useWSADControls=e}setGameStarted(e){this.gameStarted=e}generateSnake(e){this.frameCounter=400;for(let e=0;e<40;e++)this.snakePoints.push(this.position.sub(new I(0,e)));for(let e=0;e<400;e++)this.previousPoints.push({p:this.position.sub(new I(e/10)),c:e})}updateSegments(){const e=this.previousPoints.length-1;this.snakePoints.forEach(((t,o)=>{const n=Math.round(e-1*o),r=Math.max(0,Math.min(n,e)),d=this.previousPoints[r];t.x=d.p.x,t.y=d.p.y}))}snakeUpdate(e){this.frameCounter+=1,this.gameStarted&&(this.position=this.position.add(this.direction.multiplyScalar(6).multiplyScalar(e))),this.updateSegments(),this.previousPoints.push({p:this.position,c:this.frameCounter}),this.previousPoints.length>1*this.snakePoints.length+3&&this.previousPoints.splice(0,1)}getFood(){let e=0;for(const t of this.foods){if(Math.max(Math.abs(t.x-this.position.x),Math.abs(t.y-this.position.y))<.2){for(let e=0;e<N;e++)this.snakePoints.push(new I(-10,-10));this.foods.splice(e,1),this.foodCallback(t)}e++}}drawSnake(e){const t=[91,123,249],o=[57,99,255];e.beginPath(),this.snakePoints.length;let n=0;for(const t of this.snakePoints){const o=t.x*T+20,r=15*(1-n/this.snakePoints.length*.15),d=t.y*L+20;e.moveTo(o+r+4,d+4),e.arc(o+4,d+4,r,0,2*Math.PI),this.snakePoints.length,n++}e.fillStyle="rgba(0, 0, 0, 0.35)",e.fill(),n=0;let r="hahahaihiah";for(const d of this.snakePoints){const a=n/(this.snakePoints.length-1),s=`rgb(${Math.round(R(t[0],o[0],a))}, ${Math.round(R(t[1],o[1],a))}, ${Math.round(R(t[2],o[2],a))})`;s!=r&&(e.fill(),e.beginPath(),e.fillStyle=s);const u=d.x*T+20,i=15*(1-n/this.snakePoints.length*.15),c=d.y*L+20;e.moveTo(u+i,c),e.arc(u,c,i,0,2*Math.PI),e.fillStyle=e.filter=`hue-rotate(${45*this.index+90*this.index}deg)`,r=s,n++}e.fill(),e.shadowColor="transparent";const d=this.position.x*T,a=this.position.y*L;this.direction.equals(new I(-1,0))&&e.drawImage(O,d,a),this.direction.equals(new I(1,0))&&e.drawImage(D,d,a),this.direction.equals(new I(0,-1))&&e.drawImage(j,d,a),this.direction.equals(new I(0,1))&&e.drawImage(q,d,a),e.filter="none"}isWithinBorders(){return!(this.position.x<0||this.position.y<0||this.position.x>this.numX-1||this.position.y>this.numY-1)}ensureTurningOnCell(){const e=Math.round(this.position.x+0*this.direction.x),t=Math.round(this.position.y+0*this.direction.y);if(Math.max(Math.abs(e-this.position.x),Math.abs(t-this.position.y))>.2)return!1;const o=new I(e,t);if(this.lastTurningCell.equals(o))return!1;this.position.sub(o);let n=1/0,r=this.previousPoints[this.previousPoints.length-1],d=-1;for(let e=this.previousPoints.length-1;e>=this.previousPoints.length-10;e--){const t=this.previousPoints[e];if(!t)break;if(!r)throw Error("No closest point");const a=t.p.x-o.x,s=t.p.y-o.y,u=Math.sqrt(a*a+s*s);u<n&&(r=t,n=u,d=e)}if(this.frameCounter>r.c){this.previousPoints.splice(d+1),this.updateSegments();const e=this.frameCounter-r.c;console.log("Backtracked by ",e," segments"),this.frameCounter-=e}return this.position=o,console.log("Allowing turning"),!0}verifyTurn(e){const t={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},o=t[e];let n={x:0,y:0};return n=this.pendingTurns.length>0?t[this.pendingTurns[Math.max(0,this.pendingTurns.length-1)]]:this.direction,!(o.x==n.x&&o.y==n.y||o.x===-n.x&&o.y===-n.y)}keyEvents(){document.addEventListener("keydown",(e=>{let t=null;this.useWSADControls?"w"===e.key||"W"===e.key?t="up":"s"===e.key||"S"===e.key?t="down":"a"===e.key||"A"===e.key?t="left":"d"!==e.key&&"D"!==e.key||(t="right"):"ArrowUp"===e.key?t="up":"ArrowDown"===e.key?t="down":"ArrowLeft"===e.key?t="left":"ArrowRight"===e.key&&(t="right"),t&&this.verifyTurn(t)&&this.pendingTurns.length<2&&this.pendingTurns.push(t)}))}updatePendingTurn(){const e=this.pendingTurns[0];if(e&&0!=this.ensureTurningOnCell()){switch(e){case"up":if(0!=this.direction.y)break;this.direction=new I(0,-1);break;case"down":if(0!=this.direction.y)break;this.direction=new I(0,1);break;case"left":if(0!=this.direction.x)break;this.direction=new I(-1,0);break;case"right":if(0!=this.direction.x)break;this.direction=new I(1,0);break;default:console.warn("Unknown value: ",e)}console.log("Processed pending turn: ",e),this.lastTurningCell=this.position,this.pendingTurns.splice(0,1)}}reset(){this.pendingTurns=[],this.snakePoints.length=0,this.previousPoints.length=0,this.position=new I(Math.round(this.numX/2),Math.round(this.numY/2))}rebuild(){this.generateSnake(4)}hasCollidedWithSelf(){for(const e of this.snakePoints){const t=this.position.add(this.direction.multiplyScalar(.5)),o=(t.x-e.x)**2+(t.y-e.y)**2;if(o<.1**2)return console.log("Collided with: ",e," distance squared of: ",o),!0}return!1}hasCollidedWithOthers(){for(const e of this.otherPoints){const t=this.position.add(this.direction.multiplyScalar(.5)),o=(t.x-e.x)**2+(t.y-e.y)**2;if(o<.1**2)return console.log("Collided with: ",e," distance squared of: ",o),!0}return!1}update(e){this.updatePendingTurn(),this.snakeUpdate(e),this.getFood(),0==this.isWithinBorders()&&this.lostCallback(this.snakePoints.length/N),1==this.hasCollidedWithSelf()&&this.lostCallback(this.snakePoints.length/N),1==this.hasCollidedWithOthers()&&this.lostCallback(this.snakePoints.length/N)}getPoints(){return this.snakePoints}updateFoodPositions(e){this.foods=e}updateOtherPoints(e){this.otherPoints=e}render(e){this.drawSnake(e)}}class H{doubleSnakes=!1;foods=[];snakes=[];nextGameDoubleSnakes=!1;numberOfFoods=1;gameStarted=!1;isVisible=!1;lastTime=Date.now();deltaTime=1/60;canvas=document.querySelector("#game");areaX=this.canvas.width/T;areaY=this.canvas.height/L;ctx=this.canvas.getContext("2d");FoodImage=new Image;constructor(){this.canvas.width=innerWidth,this.canvas.height=innerHeight,this.FoodImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACKklEQVRYhe2YMU/bQBTH/25JhbrYDIwII+SZILp0ilkSMgGfAPINInWP+AiBLwD5AKhsljzB2qVEYiIgLMGCYLhMlQqVqysPYUzsO/vuRFTlLznDvcu7X967e/ccK45jjLM+jDXdBFCDjAJ2GvZRp2FXVXwYA+w0bB/AOoCfnYa9kbY7oVt1QtcR+ZkyBcgZ3gyE7jYAnx4uYXRNAj4vPtz7NoO90I0AzCfsq6weMZETk4Au/7if/XgG4HvKtsvq0bGME5OH5B/gj6/Ty6nxPqtHbVknShEcNB0O8byvaklbBcCvihVfeJ8+J4Z3AewUWaMUIIHxhbay5jwAuFqsWLXLB6zcPOLL9eOhd/en6wVMuO+SKnwXD5oOLxkHAOysObcxEMYxfMvCnPXKNATQ9gJ2YARw0HR4OvdF834DuI6BRStzSksWUhqQIpc+jSra9AJ2pAWQ9txpXlpLiKe76gUsyvuqbJnZ0QwH8ic80cIIUvSudJKltJAXRZkIbpsiI+UWbRlAX2KOinL9ywDWJOaoaEkV8F01FoCDppOZ5rEA9AKW2Xr9Fyk+MczQzzPKAJ7qYxmp3M5aBrBrjk3sXwhI11BPK9KLejqbhaFGMJA/YbMgBUi/Uved3BZFD0XKDDWXLWWsJ0l31IXqIDltKaR7WAQOZQo1Oa+WODg96qCl4VDmrS4pambb1DKN6kr6VOe6MvttpDigzud8zfZ1+pv8R62qCaCSAPwF+ckaGyeX8ZQAAAAASUVORK5CYII=",this.foodCallback=this.foodCallback.bind(this),this.lostCallback=this.lostCallback.bind(this);const e=()=>{document.activeElement!=this.canvas&&this.canvas.focus()};this.canvas.addEventListener("blur",(()=>{0!=this.gameStarted&&setTimeout(e,0)})),this.initialize(),this.gameStartedEvent(),this.resetGame(),this.showWindow(),window.onresize=()=>{this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.areaX=this.canvas.width/T,this.areaY=this.canvas.height/L}}nextGameDoubleSnakesSet(e){this.nextGameDoubleSnakes=e}createFood(){for(;this.foods.length<this.numberOfFoods;){let e=!1,t=0;for(;!e;){console.log("Attempt to place food...");const o=new I(Math.floor(Math.random()*(this.areaX-2))+1,Math.floor(Math.random()*(this.areaY-2))+1);if(console.log("Placed at: ",o),!this.foods.some((e=>e.equals(o)))&&(this.foods.push(o),e=!0,t+=1,t>100)){console.warn("Too many attempts exhausted; giving up");for(const e of this.snakes)e.updateFoodPositions(this.foods);return}}}for(const e of this.snakes)e.updateFoodPositions(this.foods)}gameStartedEvent(){document.addEventListener("keydown",(()=>{const e=document.querySelector("#info");if(e&&"none"==e.style.display){this.gameStarted=!0;for(const e of this.snakes)e.setGameStarted(!0)}}))}updateScore(){let e=0;for(const t of this.snakes)e+=t.getPoints().length/N;const t=document.querySelector("#score");t&&(t.textContent=`Score: ${e}`)}drawGrid(){for(let e=0;e<this.areaX;e++)for(let t=0;t<this.areaY;t++)t%2==0?e%2==0?(this.ctx.fillStyle="#E7E7E8",this.ctx.fillRect(e*T,t*L,T,L)):(this.ctx.fillStyle="#D4D4D4",this.ctx.fillRect(e*T,t*L,T,L)):e%2==1?(this.ctx.fillStyle="#E7E7E8",this.ctx.fillRect(e*T,t*L,T,L)):(this.ctx.fillStyle="#D4D4D4",this.ctx.fillRect(e*T,t*L,T,L))}createSnakes(){this.doubleSnakes=this.nextGameDoubleSnakes,this.doubleSnakes?(this.snakes=[new U(new I(Math.round(this.areaX/2),Math.round(this.areaY/2)),new I(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback),new U(new I(Math.round(this.areaX/3),Math.round(this.areaY/3)),new I(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback,1)],this.snakes[1].setUseWSAD(!0),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints()))):this.snakes=[new U(new I(Math.round(this.areaX/2),Math.round(this.areaY/2)),new I(0,-1),4,this.areaX,this.areaY,this.foodCallback,this.lostCallback)];for(const e of this.snakes)e.updateFoodPositions(this.foods)}foodCallback(e){console.warn("GOT THE FOOD!!!");const t=this.foods.findIndex((t=>t.equals(e)));-1!==t&&this.foods.splice(t,1),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints())),this.createFood(),this.updateScore()}lostCallback(e){console.warn("Lost with length: ",e);let t=0;for(const e of this.snakes)t+=e.getPoints().length/N;alert("(Temporary UI) Total score of: "+t.toString()),this.lostFunction()}lostFunction(){this.snakes.length=0,this.resetGame(),this.showWindow()}drawFood(){this.foods.forEach(((e,t)=>{const o=e.x*T,n=e.y*L;this.ctx.drawImage(this.FoodImage,o,n)}))}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(),this.drawFood();for(const e of this.snakes)e.render(this.ctx)}update(e){this.render();for(const t of this.snakes)t.update(e)}renderLoop=()=>{this.deltaTime=(Date.now()-this.lastTime)/1e3,this.isVisible&&this.update(this.deltaTime),this.lastTime=Date.now(),requestAnimationFrame(this.renderLoop)};updateCanvas(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.areaX=this.canvas.width/T,this.areaY=this.canvas.height/L}resetGame(){this.gameStarted=!1,this.createSnakes(),this.foods.length=0,this.createFood(),this.updateScore()}showWindow(){const e=document.querySelector("#info");e&&(e.style.display="block")}windowHandler(){const e=document.querySelector("#info");if(!e)return;const t=document.querySelector("#small"),o=document.querySelector("#medium"),n=document.querySelector("#large"),r=document.querySelector("#largest");t.addEventListener("click",(()=>{this.canvas.style.width="240px",this.canvas.style.height="240px",this.updateCanvas(),this.resetGame()})),o.addEventListener("click",(()=>{this.canvas.style.width="480px",this.canvas.style.height="480px",this.updateCanvas(),this.resetGame()})),n.addEventListener("click",(()=>{this.canvas.style.width="800px",this.canvas.style.height="800px",this.updateCanvas(),this.resetGame()})),r.addEventListener("click",(()=>{this.canvas.style.width="1600px",this.canvas.style.height="800px",this.updateCanvas(),this.resetGame()}));const d=document.querySelector("#double-snakes");d.addEventListener("input",(()=>{this.nextGameDoubleSnakesSet(d.checked),this.resetGame()}));const a=document.querySelector("#apples");a.addEventListener("input",(()=>{this.numberOfFoods=parseInt(a.value),this.resetGame()})),document.querySelector("#begin").addEventListener("click",(()=>{e.style.display="none",this.gameStartedEvent()}))}setVisibility(e){this.isVisible=e}initialize(){this.windowHandler(),this.createSnakes(),this.createFood(),this.updateScore(),this.renderLoop()}}class _{isVisible=!1;snakeGame;window;constructor(){this.window=p('\n    <div class="snake">\n        <button type="button">Close</button>\n        <div class="containement">\n        <canvas id="game"></canvas>\n    <div class="information" id="info">\n        <h1>TeamsPlus <s style="color:rgba(255,255, 255,0.3);font-size: small;">gambling</s> snake game - Temporary\n            settings menu</h1>\n        <p>Game size</p><button id="small">SMall</button> <button id="medium">Medium</button> <button\n            id="large">Large</button> <button id="largest">Largest</button>\n        <p>Impossible difficulty (double snakes)</p>\n        <p>Control one with arrow keys, control the other with WSAD.</p><input type="checkbox" name=""\n            id="double-snakes"><br>\n        <p>Number of apples</p><input type="range" name="" id="apples" min="1" max="10" value="1"><br><button\n            id="begin">Begin</button>\n    </div>\n    <div class="score"><span id="score">Score: 0</span></div>\n        </div>\n    </div>\n'),this.window.style.display="none",document.body.appendChild(this.window),this.asyncInit()}async asyncInit(){try{await(async()=>{for(;!document.querySelector("#game");)await new Promise((e=>setTimeout(e,50)));return document.querySelector("#game")})(),this.snakeGame=new H,this.snakeGame.setVisibility(!1)}catch(e){console.error("Failed to create an instance of SnakeGame: ",e)}(await window.teamsPlusAppsManager.addAppAndGetButton("Snake","https://www.svgrepo.com/show/296787/snake.svg")).forEach((e=>{e.addEventListener("click",(()=>{this.isVisible=!this.isVisible,this.isVisible?(this.window.style.display="block",this.snakeGame.setVisibility(!0),this.window.querySelector("iframe").src=chrome.runtime.getURL("pages/snake/index.html")):(this.window.style.display="none",this.snakeGame.setVisibility(!1))}))}))}}async function V(e,t){const o=await g('[role="navigation"]'),n=p('\n\n\n<div>\n    <div class="injected-parent-div">\n        <button type="button" class="injected-parent-button">\n            <span class="injected-tab-upper-span">\n              <div class=".injected-tab-div2">\n                <div class="injected-tab-upper-div"></div>\n                <span class="injected-tab-span">Delayed Send</span>\n              </div>\n            </span>\n        </button>\n    </div>\n</div>\n'),r=n.querySelector(".injected-tab-span"),d=n.querySelector(".injected-tab-upper-div"),a=n.querySelector("button");if(null==r||null==a||null==d)throw new Error("Span or img or btn not found in injected tab");const s=p(t);return s.classList.add("injected-tab-img"),d.prepend(s),r.textContent=e,o.appendChild(n),a}const W=new class{appMenuElement;appMenuButton;appMenuCreated=!1;constructor(){this.initializeAppMenu(),window.teamsPlusAppsManager=this}async initializeAppMenu(){await this.createAppMenu(),this.createButtonListeners(),this.appMenuCreated=!0}async isApplicationPinned(e){const t=await chrome.storage.local.get(["pinnedApplications"]);return!!t.pinnedApplications&&!!t.pinnedApplications[e]}async createAppMenu(){if(this.appMenuElement=p('\n<span class="apps-menu" id="appsMenu">\n    <span class="apps-menu-header">\n        <h3 class="apps-menu-title">TeamsPlus apps</h3>\n    </span>\n    <span class="apps-list" id="appList">\n\n\n    </span>\n</span>\n'),this.appMenuButton=await V("TeamsPlus",'\n<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\n<svg width="800px" height="800px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>apps</title>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="icon" fill="var(--colorNeutralForeground3)" transform="translate(64.000000, 64.000000)">\n            <path d="M64,32 C64,49.664 49.664,64 32,64 C14.336,64 -4.26325641e-14,49.664 -4.26325641e-14,32 C-4.26325641e-14,14.336 14.336,-4.26325641e-14 32,-4.26325641e-14 C49.664,-4.26325641e-14 64,14.336 64,32 Z M224,32 C224,49.664 209.664,64 192,64 C174.336,64 160,49.664 160,32 C160,14.336 174.336,-4.26325641e-14 192,-4.26325641e-14 C209.664,-4.26325641e-14 224,14.336 224,32 Z M64,352 C64,369.664 49.664,384 32,384 C14.336,384 -4.26325641e-14,369.664 -4.26325641e-14,352 C-4.26325641e-14,334.336 14.336,320 32,320 C49.664,320 64,334.336 64,352 Z M224,352 C224,369.664 209.664,384 192,384 C174.336,384 160,369.664 160,352 C160,334.336 174.336,320 192,320 C209.664,320 224,334.336 224,352 Z M64,192 C64,209.664 49.664,224 32,224 C14.336,224 -4.26325641e-14,209.664 -4.26325641e-14,192 C-4.26325641e-14,174.336 14.336,160 32,160 C49.664,160 64,174.336 64,192 Z M224,192 C224,209.664 209.664,224 192,224 C174.336,224 160,209.664 160,192 C160,174.336 174.336,160 192,160 C209.664,160 224,174.336 224,192 Z M384,32 C384,49.664 369.664,64 352,64 C334.336,64 320,49.664 320,32 C320,14.336 334.336,-4.26325641e-14 352,-4.26325641e-14 C369.664,-4.26325641e-14 384,14.336 384,32 Z M384,352 C384,369.664 369.664,384 352,384 C334.336,384 320,369.664 320,352 C320,334.336 334.336,320 352,320 C369.664,320 384,334.336 384,352 Z M384,192 C384,209.664 369.664,224 352,224 C334.336,224 320,209.664 320,192 C320,174.336 334.336,160 352,160 C369.664,160 384,174.336 384,192 Z" id="Combined-Shape">\n\n</path>\n        </g>\n    </g>\n</svg>\n'),null==this.appMenuButton)throw new Error("Failed to inject app menu tab");document.body.appendChild(this.appMenuElement)}animateVisibility(e){e?this.appMenuElement.animate([{transform:"translateY(-5%)",opacity:0},{transform:"translateY(0%)",opacity:1}],{duration:250,easing:"ease-out",iterations:1,fill:"forwards"}):this.appMenuElement.animate([{transform:"translateY(0%)",opacity:1},{transform:"translateY(-5%)",opacity:0}],{duration:250,easing:"ease-in",iterations:1,fill:"forwards"})}toggleVisibility(){this.appMenuElement.classList.contains("active")?this.setVisiblity(!1):this.setVisiblity(!0)}setVisiblity(e){if(0==e&&1==this.appMenuElement.classList.contains("active"))this.animateVisibility(!1),setTimeout((()=>{this.appMenuElement.classList.remove("active")}),250);else if(0==this.appMenuElement.classList.contains("active")&&1==e){this.appMenuElement.classList.add("active");const e=this.appMenuButton.clientLeft+this.appMenuButton.clientWidth,t=this.appMenuButton.clientTop+this.appMenuButton.clientHeight;this.appMenuElement.style.left=`${e}px`,this.appMenuElement.style.top=`${t}px`,this.animateVisibility(!0)}}createButtonListeners(){this.appMenuButton.addEventListener("click",(e=>{this.toggleVisibility(),e.target!==e.currentTarget&&this.appMenuElement.contains(e.target)||e.stopPropagation()})),document.addEventListener("click",(e=>this.handleDocumentClick(e))),this.appMenuElement.addEventListener("click",(e=>{e.stopPropagation()}))}handleDocumentClick(e){0!=this.appMenuButton.classList.contains("active")&&(this.appMenuElement.contains(e.target)||this.appMenuButton.contains(e.target)||this.setVisiblity(!1))}async addAppAndGetButton(e,t,o){if(await new Promise((e=>{const t=()=>this.appMenuCreated?e(void 0):setTimeout(t,50);t()})),0==this.appMenuCreated)throw new Error("Attempt to create and add app before app menu initialization!");const n=[],r=p('\n<span class="apps-list-app">\n    <span class="apps-list-app-card" id="appListCard">\n        <img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" alt="App Icon" class="app-icon" id="appIcon">\n        <span class="apps-list-filler"></span>\n        <span class="app-name" id="appName">Bob app that is really really cool</span>\n    </span>\n    <span type="button" class="app-pin-button" id="pinApp">\n        <img src="https://www.svgrepo.com/show/501306/pin.svg" alt="" class="pin-icon">\n    </span>\n</span>\n'),d=r.querySelector("#appIcon");r.querySelector("#appName").textContent=e,d.src=t,this.appMenuElement.querySelector("#appList").appendChild(r),console.log("Successfully added app in app menu");const a=r.querySelector("#appListCard");a.addEventListener("click",(()=>{this.setVisiblity(!1)}));const s=r.querySelector("#pinApp");if(await this.isApplicationPinned(e)&&(s.style.backgroundColor="#655bffff"),s.addEventListener("click",(async()=>{let t=(await chrome.storage.local.get(["pinnedApplications"])).pinnedApplications||{};t[e]=!t[e],1==t[e]?s.style.backgroundColor="#655bffff":s.style.backgroundColor="transparent",chrome.storage.local.set({pinnedApplications:t})})),n.push(a),await this.isApplicationPinned(e)){const r=await V(e,o||`<img src="${t}" alt="Icon">`);n.push(r)}return n}},Y=new class{currentData=c;currentThemes=s;constructor(){console.log("Created new DataManager instance")}async loadAll(){await this.loadData(),await this.loadThemes()}async loadData(){const r=await async function(e){const t=(await chrome.storage.local.get([e]))[e];if(null!=t)return console.log("loaded key"),t;console.log("Nothing with basic key loaded: ",e)}("themeData");if(null==r)return console.warn("No data found, returning default data"),c;console.log(r);const s={colors:u(r.colors,e),classColors:u(r.classColors,n),fonts:u(r.fonts,o),pixelValues:u(r.pixelValues,t),backgrounds:u(r.backgrounds,d),emojis:u(r.emojis,a)};return this.currentData=s,console.log("Loaded: ",s),s}async loadThemes(){const e=await async function(e){const t=(await chrome.storage.local.get([e]))[e];if(null!=t)return console.log("loaded key"),t;console.log("Nothing with basic key loaded: ",e)}("themes");if(null!=e)return console.log("themes loaded: ",e),this.currentThemes=e,this.saveThemes(),e;console.error("No themes loaded: ",e)}exportThemeData(){let e={};for(const t of Object.keys(this.currentData)){const o=t,n=this.currentData[o],r=c[o];e[t]=this.u_onlyExportChanged(n,r)}return e}u_onlyExportChanged(e,t){let o={},n=0;console.log("Data: ",t),console.log("Current data: ",e);for(const r in t){const d=e[r];d!=t[r]&&(o[r]=d,n++)}return console.log("Exporting ",n," attributes"),o}saveThemes(){console.log("Save themes: ",this.currentThemes),chrome.storage.local.set({themes:this.currentThemes})}saveData(){console.log("Save: ",this.currentData),chrome.storage.local.set({themeData:this.currentData})}saveAll(){this.saveData()}},X=new class{dataManager;nodeProcessQueueEmoji=[];nodeProcessQueueMessages=[];constructor(e){this.dataManager=e}p_dataManagerExists(){if(null==this.dataManager)throw new Error("Where is data manager")}async applyTwemoji(){this.p_dataManagerExists(),0!=("twemoji"==await this.dataManager.currentData.emojis.set)?this.detectNewMessages():console.error("Twemoji is not enabled.Skipping Twemoji")}processQueueEmojis(){requestIdleCallback((()=>{this.nodeProcessQueueEmoji.splice(0,50).forEach((e=>f(e))),this.nodeProcessQueueEmoji.length>0&&this.processQueueEmojis()}),{timeout:500})}processQueueMessages(){requestIdleCallback((()=>{this.nodeProcessQueueMessages.splice(0,50).forEach((e=>f(e))),this.nodeProcessQueueMessages.length>0&&this.processQueueMessages()}),{timeout:500})}emojiPrebatchProcess(e){e instanceof HTMLImageElement&&(e.removeAttribute("src"),e.style.display="none")}detectNewMessages(){const e=document.body;new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((e=>{(e instanceof HTMLElement||e instanceof DocumentFragment)&&(e instanceof HTMLElement&&"message-wrapper"===e.dataset.testid&&(this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"chat-pane-compose-message-footer"===e.dataset.tid&&(this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"http://schema.skype.com/Emoji"==e.getAttribute("itemtype")&&(this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"message-hover-reactions"===e.dataset.inp&&(this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement&&"emoji-tab-category-grid"===e.dataset.tid&&(this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)),e instanceof HTMLElement||e instanceof DocumentFragment)&&(e.querySelectorAll('[data-testid="message-wrapper"]').forEach(((e,t)=>this.nodeProcessQueueMessages.push(e))),e.querySelectorAll('[itemtype="http://schema.skype.com/Emoji"]').forEach(((e,t)=>{this.emojiPrebatchProcess(e),this.nodeProcessQueueEmoji.push(e)})),e.querySelectorAll('[data-inp="message-hover-reactions"]').forEach(((e,t)=>this.nodeProcessQueueMessages.push(e))),e.querySelectorAll('[data-tid="emoji-tab-category-grid"]').forEach(((e,t)=>this.nodeProcessQueueMessages.push(e))))}));this.nodeProcessQueueMessages.length>0&&this.processQueueMessages(),this.nodeProcessQueueEmoji.length>0&&this.processQueueEmojis()})).observe(e,{childList:!0,subtree:!0})}}(Y),G=new class{styleElement=null;emojithis=null;dataManager;observer=null;blurBackgroundObserver=null;blurElementQueue=[];constructor(e){this.dataManager=e}p_dataManagerExists(){if(null==this.dataManager)throw new Error("Where is data manager")}p_emojiThisExists(){if(null==this.emojithis)throw new Error("where emojithis")}p_addBackgroundImageToMessageBackground(e){if(null==this.dataManager)throw new Error("No data manager");const t=this.dataManager.currentData.backgrounds.channelAndChatBackground;if(null==t)throw new Error("Data style failed to find");if("none"==t)return e.style.background="",void console.log("Backgrounds: none applied");e.style.background=t,console.log("Backgrounds: applied: ",t)}p_getBackgroundRGBA(e){const t=window.getComputedStyle(e),o=t.backgroundColor.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);return o?{r:parseInt(o[1]),g:parseInt(o[2]),b:parseInt(o[3]),a:void 0!==o[4]?Math.min(parseFloat(o[4]),parseFloat(t.opacity)):1}:null}blurProcessElement(e){if(null!=e.closest(".apps-menu"))return;if(e instanceof HTMLButtonElement)return;if(null==this.dataManager)return;const t=this.p_getBackgroundRGBA(e);if(null==t)return;const o=Math.min(t.a,parseFloat(this.dataManager.currentData.backgrounds.interfaceOpacity));""!=e.style.backgroundColor&&(e.style.backgroundColor="",console.log("Removing bg")),e.style.backgroundColor=`rgba(${t.r}, ${t.g}, ${t.b}, ${o})`,o>0&&(e.style.backdropFilter=this.dataManager.currentData.backgrounds.backdropFilter)}p_applyFullBackground(){if(null==this.dataManager)return;const e=this.dataManager.currentData.backgrounds.channelAndChatBackground;if(null==e)throw new Error("Data style failed to find");const t=document.getElementById("app");if(null==t)throw new Error("App not found");t.style.background="none"==e?"":e}p_blurQueueProcess(){this.blurElementQueue.forEach((e=>this.blurProcessElement(e))),this.blurElementQueue.length=0}p_createBlurMutationObserver(){document.querySelector("#app").querySelectorAll("*").forEach((e=>{this.blurElementQueue.push(e)})),this.blurBackgroundObserver=new MutationObserver((e=>{for(const t of e)"childList"==t.type&&t.addedNodes.forEach((e=>{if(e.nodeType==Node.ELEMENT_NODE){const t=e;this.blurElementQueue.push(t),t.querySelectorAll("*").forEach((e=>{this.blurElementQueue.push(e)}))}}));this.p_blurQueueProcess()})),this.blurBackgroundObserver.observe(document.querySelector("#app"),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]})}p_createMutationObserver(){this.observer=new MutationObserver((e=>{const t=document.querySelector('[data-tid="message-pane-layout"]');t&&this.p_addBackgroundImageToMessageBackground(t)})),this.observer.observe(document.body,{childList:!0,subtree:!0})}getFui(){let e=".fui-FluentProviderr0";return"assignments.onenote.com"==window.location.hostname?(console.log("Detected assignments tab, set fluent provider to EDUASSIGN-r0"),e=".fui-FluentProviderEDUASSIGN-r0"):"outlook.office.com"==window.location.hostname?e=".fui-FluentProviderr0":console.log("Detected main Teams interface, set fluent provider to r0"),e}applyColors(){this.p_dataManagerExists(),console.log("applying"),this.styleElement=document.createElement("style"),this.styleElement.type="text/css";let e="";for(const t in this.dataManager.currentData.colors)console.log("co: applying ",t),e+=`${t}: ${this.dataManager.currentData.colors[t]} !important;\n`;for(const t in this.dataManager.currentData.pixelValues)console.log("px: applying ",t),e+=`${t}: ${this.dataManager.currentData.pixelValues[t]} !important; \n`;let t="";for(const e in this.dataManager.currentData.classColors)t+=`.${e}{${r[e]}: ${this.dataManager.currentData.classColors[e]} !important;}\n`;this.styleElement.innerHTML=`${this.getFui()} {\n${e}\n} ${t}\n\n        \n        .emoji{\n            width: 1em;\n            height: 1em;\n            margin-right: 2px;\n            vertical-align: middle;\n        }\n        `,console.log(this.styleElement.innerHTML),document.head.appendChild(this.styleElement)}applyBackgrounds(){if(null==this.dataManager)return;this.p_applyFullBackground();const e="true"===this.dataManager.currentData.backgrounds.fullBackgroundExperience;null==this.observer&&0==e&&(console.log("INITIALIZE MUTATION OBSERVER"),this.p_createMutationObserver(),document.querySelectorAll('[data-tid="message-pane-layout"]').forEach((e=>{this.p_addBackgroundImageToMessageBackground(e)}))),null==this.blurBackgroundObserver&&1==e&&(console.log("INITIALIZE BLUR MUTATION OBSERVER"),this.p_createBlurMutationObserver())}applyFonts(e){if(this.p_dataManagerExists(),this.emojithis=document.createElement("style"),this.emojithis.type="text/css",this.p_emojiThisExists(),null==this.dataManager.currentData.fonts)return;this.emojithis=document.createElement("style"),this.emojithis.type="text/css";let t=`--fontFamilyBase: ${this.dataManager.currentData.fonts.fontFamily} !important;}`,o=this.dataManager.currentData.fonts.imports,n=`${this.getFui()} {\n${t}\n}`,r=`* {\n${t}\n}`;return this.emojithis.innerHTML=`${o}\n${r}\n${n}`,console.log(this.emojithis.innerHTML),null==e?(document.head.appendChild(this.emojithis),this.emojithis):(e.appendChild(this.emojithis),this.emojithis)}deleteFontsStyle(){null!=this.emojithis&&(this.emojithis.remove(),this.emojithis=null)}deleteStyle(){null!=this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}}(Y),z=new class{stylesRuntime;dataManager;constructor(e,t){this.stylesRuntime=t,this.dataManager=e}detectChange(){console.log("start change detect"),chrome.storage.onChanged.addListener((async(e,t)=>{if("local"===t)for(let t in e)e.hasOwnProperty(t)&&"themeData"==t&&(console.log("Change detected!"),await this.dataManager.loadAll(),this.stylesRuntime.deleteStyle(),this.stylesRuntime.applyBackgrounds(),this.stylesRuntime.applyColors(),this.stylesRuntime.applyFonts(null))}))}}(Y,G),Q=new class{textMutationObserver=null;textSlideInElement=null;updateAvailableText="";currentVersion="";constructor(){}checkForUpdates(){this.currentVersion="v"+chrome.runtime.getManifest().version,fetch("https://api.github.com/repos/CariLT01/teamsplus-extension/releases/latest").then((e=>e.json())).then((e=>{const t=e.tag_name;t&&t!=this.currentVersion?(this.updateAvailableText="Update available: "+this.currentVersion+" → "+t,this.setTextContent()):t==this.currentVersion&&(this.updateAvailableText="<p style='font-weight: normal; font-size: 12px'>Up to date</p>",this.setTextContent())})).catch((e=>{console.error("Failed to check for updates: ",e)}))}setTextContent(){if(!this.textSlideInElement)return;const e=chrome.runtime.getManifest().version;this.textSlideInElement.innerHTML="Loading Microsoft Teams...<br><br><p style='font-weight: normal; font-size: 16px;'>TeamsPlus v"+e+"</p>"+this.updateAvailableText}startMutationObserver(){this.checkForUpdates(),this.textMutationObserver=new MutationObserver((e=>{const t=document.querySelector(".text-slide-in");t&&(this.textSlideInElement=t,this.setTextContent(),this.textMutationObserver&&this.textMutationObserver.disconnect())})),this.textMutationObserver.observe(document.body,{subtree:!0,childList:!0})}},J=new class{constructor(){}handleNewImage(e){e.loading="lazy",e.decoding="async"}createMutationObserver(){new MutationObserver(((e,t)=>{for(const t of e)"childList"==t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((e=>{e instanceof Element&&"IMG"==e.tagName&&this.handleNewImage(e)}))})).observe(document.body,{childList:!0,subtree:!0})}processCurrentImages(){document.querySelectorAll("img").forEach((e=>{this.handleNewImage(e)}))}onLoad(){console.log("Begin optimizing image loading"),this.processCurrentImages(),this.createMutationObserver()}},K=new class{currentToken=null;success=null;loginContainer=null;awaitAuth=!1;constructor(){this.p_createLoginContainer(),this.p_initButtons(),this.p_asyncInit()}async p_asyncInit(){this.currentToken=await this.p_loadToken()}async p_loadToken(){return(await chrome.storage.local.get(["teamsplusToken"])).teamsPlusToken}p_saveToken(){chrome.storage.local.set({teamsplusToken:this.currentToken})}p_createLoginContainer(){null==this.loginContainer?(this.loginContainer=p('\n<div class="main-login-container">\n    <div class="rel">\n        <div class="loader-container" id="loader" style="display: none;">\n            <div class="rel">\n                <span class="loader login-loader"></span>\n            </div>\n\n        </div>\n        <form action="">\n            <h3 class="login-title">Login</h3>\n            <p class="login-title">An action requires you to login to your account.</p>\n            <div class="login-align-center">\n                <input type="text" name="username" id="loginUsername" autocomplete="username" placeholder="Username" required>\n                <input type="password" name="password" id="loginPassword" placeholder="Password" required>\n                <button type="submit" class="login-btn-submit normal-button" id="submitBtn">Submit</button>\n                <a href="https://apiteamsplus.pythonanywhere.com/" target="_blank">Visit website to register</a>\n            </div>\n        </form>\n    </div>\n\n</div>\n'),this.loginContainer.style.display="none",document.body.appendChild(this.loginContainer)):console.error("Login container already exists!")}p_showLoginContainer(){this.loginContainer?(this.loginContainer.style.opacity="0",this.loginContainer.style.display="block",this.loginContainer.animate([{transform:"translateY(-65%) translateX(-50%)",opacity:"0",filter:"blur(10px)"},{transform:"translateY(-50%) translateX(-50%)",opacity:"1",filter:"blur(0px)"}],{duration:1e3,easing:"ease-out",iterations:1,fill:"forwards"})):console.error("Login container not found!")}p_hideLoginContainer(){this.loginContainer?(this.loginContainer.animate([{opacity:"1",filter:"blur(0px)",transform:"translateY(-50%) translateX(-50%)"},{opacity:"0",filter:"blur(10px)",transform:"translateY(-65%) translateX(-50%)"}],{duration:1e3,easing:"ease-in",iterations:1,fill:"forwards"}),setTimeout((()=>{null!=this.loginContainer&&(this.loginContainer.style.display="none")}),1e3)):console.error("Login container not found!")}p_showLoader(){if(null==this.loginContainer)return;const e=this.loginContainer.querySelector("#loader");e&&(e.style.display="block")}p_hideLoader(){if(null==this.loginContainer)return;const e=this.loginContainer.querySelector("#loader");e&&(e.style.display="none")}p_initButtons(){if(null==this.loginContainer)return;const e=this.loginContainer.querySelector("#submitBtn");e?e.addEventListener("click",(async e=>{if(console.log("The button has been clicked!"),e.preventDefault(),null==this.loginContainer)return void console.error("no login container");if(0==this.awaitAuth)return void console.error("not awaiting auth");this.success=null,this.currentToken=null;const t=this.loginContainer.querySelector("#loginUsername"),o=this.loginContainer.querySelector("#loginPassword");if(null==t||null==o)return void console.error("Username / password element not found");this.p_showLoader();const n=new F,r=JSON.stringify({username:t.value,password:o.value,transfer:!0}),d=await n.safeTunnelEncrypt(r);fetch(`${m}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((e=>e.json())).then((e=>{if(!e.message||1!=e.success||!e.data)throw this.p_hideLoader(),new Error("not OK");this.currentToken=e.data,this.p_saveToken(),this.p_hideLoader()})).catch((e=>{this.p_hideLoader(),console.error("Error:",e),e instanceof Error?alert(`Error: ${e.message}`):alert("Error")}))})):console.error("Oneor many elements null")}waitUntilToken(e=100){return this.awaitAuth=!0,new Promise((t=>{const o=setInterval((()=>{(null!=this.currentToken||this.success)&&(clearInterval(o),this.success=null,this.awaitAuth=!1,t(this.currentToken))}),e)}))}async getToken(){if(this.currentToken)return console.log("Found token! returning"),this.currentToken;if(console.log("No token! creating new login container"),this.p_createLoginContainer(),this.p_showLoginContainer(),null==this.loginContainer)return;this.loginContainer.style.display="block",await this.waitUntilToken(),this.p_hideLoginContainer();const e=this.currentToken;return null==e&&console.error("Still no token"),e}};window.self===window.top&&(new b(new w(Y),W,K),new C(K),new M(K),new _),window.onload=async function(){if(console.log("window loaded, wait for main"),J.onLoad(),Q.startMutationObserver(),window.self!==window.top)throw new Error("Reject loading in iframe, feature not stable");window.self===window.top?await g('[data-tid="app-layout-area--main"]'):console.log("Skip wait in iframe"),console.log("window found main"),await Y.loadAll(),G.applyFonts(null),console.log("Apply colors on win load"),z.detectChange(),X.applyTwemoji(),G.applyColors(),G.applyBackgrounds()},console.log("Hello")})();