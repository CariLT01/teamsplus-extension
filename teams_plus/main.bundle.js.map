{"version":3,"file":"main.bundle.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACv3BA;AACA;AACA;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AChbA;AACA;AACA;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9PA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://teams-plus/./node_modules/canvas-confetti/dist/confetti.module.mjs","webpack://teams-plus/./node_modules/twemoji/dist/twemoji.esm.js","webpack://teams-plus/./src/api/authorizationProvider.ts","webpack://teams-plus/./src/api/encryptionProvider.ts","webpack://teams-plus/./src/api/safeTunnel.ts","webpack://teams-plus/./src/api/themesShop.ts","webpack://teams-plus/./src/config.ts","webpack://teams-plus/./src/contribution/defaultThemes.ts","webpack://teams-plus/./src/contribution/descriptions.ts","webpack://teams-plus/./src/dataManagement.ts","webpack://teams-plus/./src/games/gamble.ts","webpack://teams-plus/./src/games/snake.ts","webpack://teams-plus/./src/games/snake/config.ts","webpack://teams-plus/./src/games/snake/game.ts","webpack://teams-plus/./src/games/snake/snake.ts","webpack://teams-plus/./src/games/snake/vec2.ts","webpack://teams-plus/./src/games/soundEngine.ts","webpack://teams-plus/./src/popup/themes.ts","webpack://teams-plus/./src/popup/ui.ts","webpack://teams-plus/./src/runtime/imageLoadingOptimizer.ts","webpack://teams-plus/./src/runtime/loadingScreen.ts","webpack://teams-plus/./src/runtime/realtimeUpdates.ts","webpack://teams-plus/./src/runtime/styles.ts","webpack://teams-plus/./src/runtime/twemoji.ts","webpack://teams-plus/./src/shared.ts","webpack://teams-plus/./src/ui/appsMenuManager.ts","webpack://teams-plus/./src/ui/pwdPrompt.ts","webpack://teams-plus/./src/ui/tabInject.ts","webpack://teams-plus/./src/utils.ts","webpack://teams-plus/webpack/bootstrap","webpack://teams-plus/webpack/runtime/define property getters","webpack://teams-plus/webpack/runtime/hasOwnProperty shorthand","webpack://teams-plus/webpack/runtime/make namespace object","webpack://teams-plus/./src/main.ts"],"sourcesContent":["// canvas-confetti v1.9.3 built on 2024-04-30T22:19:17.794Z\nvar module = {};\n\n// source content\n/* globals Map */\n\n(function main(global, module, isWorker, workerSize) {\n  var canUseWorker = !!(\n    global.Worker &&\n    global.Blob &&\n    global.Promise &&\n    global.OffscreenCanvas &&\n    global.OffscreenCanvasRenderingContext2D &&\n    global.HTMLCanvasElement &&\n    global.HTMLCanvasElement.prototype.transferControlToOffscreen &&\n    global.URL &&\n    global.URL.createObjectURL);\n\n  var canUsePaths = typeof Path2D === 'function' && typeof DOMMatrix === 'function';\n  var canDrawBitmap = (function () {\n    // this mostly supports ssr\n    if (!global.OffscreenCanvas) {\n      return false;\n    }\n\n    var canvas = new OffscreenCanvas(1, 1);\n    var ctx = canvas.getContext('2d');\n    ctx.fillRect(0, 0, 1, 1);\n    var bitmap = canvas.transferToImageBitmap();\n\n    try {\n      ctx.createPattern(bitmap, 'no-repeat');\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  })();\n\n  function noop() {}\n\n  // create a promise if it exists, otherwise, just\n  // call the function directly\n  function promise(func) {\n    var ModulePromise = module.exports.Promise;\n    var Prom = ModulePromise !== void 0 ? ModulePromise : global.Promise;\n\n    if (typeof Prom === 'function') {\n      return new Prom(func);\n    }\n\n    func(noop, noop);\n\n    return null;\n  }\n\n  var bitmapMapper = (function (skipTransform, map) {\n    // see https://github.com/catdad/canvas-confetti/issues/209\n    // creating canvases is actually pretty expensive, so we should create a\n    // 1:1 map for bitmap:canvas, so that we can animate the confetti in\n    // a performant manner, but also not store them forever so that we don't\n    // have a memory leak\n    return {\n      transform: function(bitmap) {\n        if (skipTransform) {\n          return bitmap;\n        }\n\n        if (map.has(bitmap)) {\n          return map.get(bitmap);\n        }\n\n        var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(bitmap, 0, 0);\n\n        map.set(bitmap, canvas);\n\n        return canvas;\n      },\n      clear: function () {\n        map.clear();\n      }\n    };\n  })(canDrawBitmap, new Map());\n\n  var raf = (function () {\n    var TIME = Math.floor(1000 / 60);\n    var frame, cancel;\n    var frames = {};\n    var lastFrameTime = 0;\n\n    if (typeof requestAnimationFrame === 'function' && typeof cancelAnimationFrame === 'function') {\n      frame = function (cb) {\n        var id = Math.random();\n\n        frames[id] = requestAnimationFrame(function onFrame(time) {\n          if (lastFrameTime === time || lastFrameTime + TIME - 1 < time) {\n            lastFrameTime = time;\n            delete frames[id];\n\n            cb();\n          } else {\n            frames[id] = requestAnimationFrame(onFrame);\n          }\n        });\n\n        return id;\n      };\n      cancel = function (id) {\n        if (frames[id]) {\n          cancelAnimationFrame(frames[id]);\n        }\n      };\n    } else {\n      frame = function (cb) {\n        return setTimeout(cb, TIME);\n      };\n      cancel = function (timer) {\n        return clearTimeout(timer);\n      };\n    }\n\n    return { frame: frame, cancel: cancel };\n  }());\n\n  var getWorker = (function () {\n    var worker;\n    var prom;\n    var resolves = {};\n\n    function decorate(worker) {\n      function execute(options, callback) {\n        worker.postMessage({ options: options || {}, callback: callback });\n      }\n      worker.init = function initWorker(canvas) {\n        var offscreen = canvas.transferControlToOffscreen();\n        worker.postMessage({ canvas: offscreen }, [offscreen]);\n      };\n\n      worker.fire = function fireWorker(options, size, done) {\n        if (prom) {\n          execute(options, null);\n          return prom;\n        }\n\n        var id = Math.random().toString(36).slice(2);\n\n        prom = promise(function (resolve) {\n          function workerDone(msg) {\n            if (msg.data.callback !== id) {\n              return;\n            }\n\n            delete resolves[id];\n            worker.removeEventListener('message', workerDone);\n\n            prom = null;\n\n            bitmapMapper.clear();\n\n            done();\n            resolve();\n          }\n\n          worker.addEventListener('message', workerDone);\n          execute(options, id);\n\n          resolves[id] = workerDone.bind(null, { data: { callback: id }});\n        });\n\n        return prom;\n      };\n\n      worker.reset = function resetWorker() {\n        worker.postMessage({ reset: true });\n\n        for (var id in resolves) {\n          resolves[id]();\n          delete resolves[id];\n        }\n      };\n    }\n\n    return function () {\n      if (worker) {\n        return worker;\n      }\n\n      if (!isWorker && canUseWorker) {\n        var code = [\n          'var CONFETTI, SIZE = {}, module = {};',\n          '(' + main.toString() + ')(this, module, true, SIZE);',\n          'onmessage = function(msg) {',\n          '  if (msg.data.options) {',\n          '    CONFETTI(msg.data.options).then(function () {',\n          '      if (msg.data.callback) {',\n          '        postMessage({ callback: msg.data.callback });',\n          '      }',\n          '    });',\n          '  } else if (msg.data.reset) {',\n          '    CONFETTI && CONFETTI.reset();',\n          '  } else if (msg.data.resize) {',\n          '    SIZE.width = msg.data.resize.width;',\n          '    SIZE.height = msg.data.resize.height;',\n          '  } else if (msg.data.canvas) {',\n          '    SIZE.width = msg.data.canvas.width;',\n          '    SIZE.height = msg.data.canvas.height;',\n          '    CONFETTI = module.exports.create(msg.data.canvas);',\n          '  }',\n          '}',\n        ].join('\\n');\n        try {\n          worker = new Worker(URL.createObjectURL(new Blob([code])));\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          typeof console !== undefined && typeof console.warn === 'function' ? console.warn('ðŸŽŠ Could not load worker', e) : null;\n\n          return null;\n        }\n\n        decorate(worker);\n      }\n\n      return worker;\n    };\n  })();\n\n  var defaults = {\n    particleCount: 50,\n    angle: 90,\n    spread: 45,\n    startVelocity: 45,\n    decay: 0.9,\n    gravity: 1,\n    drift: 0,\n    ticks: 200,\n    x: 0.5,\n    y: 0.5,\n    shapes: ['square', 'circle'],\n    zIndex: 100,\n    colors: [\n      '#26ccff',\n      '#a25afd',\n      '#ff5e7e',\n      '#88ff5a',\n      '#fcff42',\n      '#ffa62d',\n      '#ff36ff'\n    ],\n    // probably should be true, but back-compat\n    disableForReducedMotion: false,\n    scalar: 1\n  };\n\n  function convert(val, transform) {\n    return transform ? transform(val) : val;\n  }\n\n  function isOk(val) {\n    return !(val === null || val === undefined);\n  }\n\n  function prop(options, name, transform) {\n    return convert(\n      options && isOk(options[name]) ? options[name] : defaults[name],\n      transform\n    );\n  }\n\n  function onlyPositiveInt(number){\n    return number < 0 ? 0 : Math.floor(number);\n  }\n\n  function randomInt(min, max) {\n    // [min, max)\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  function toDecimal(str) {\n    return parseInt(str, 16);\n  }\n\n  function colorsToRgb(colors) {\n    return colors.map(hexToRgb);\n  }\n\n  function hexToRgb(str) {\n    var val = String(str).replace(/[^0-9a-f]/gi, '');\n\n    if (val.length < 6) {\n        val = val[0]+val[0]+val[1]+val[1]+val[2]+val[2];\n    }\n\n    return {\n      r: toDecimal(val.substring(0,2)),\n      g: toDecimal(val.substring(2,4)),\n      b: toDecimal(val.substring(4,6))\n    };\n  }\n\n  function getOrigin(options) {\n    var origin = prop(options, 'origin', Object);\n    origin.x = prop(origin, 'x', Number);\n    origin.y = prop(origin, 'y', Number);\n\n    return origin;\n  }\n\n  function setCanvasWindowSize(canvas) {\n    canvas.width = document.documentElement.clientWidth;\n    canvas.height = document.documentElement.clientHeight;\n  }\n\n  function setCanvasRectSize(canvas) {\n    var rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n  }\n\n  function getCanvas(zIndex) {\n    var canvas = document.createElement('canvas');\n\n    canvas.style.position = 'fixed';\n    canvas.style.top = '0px';\n    canvas.style.left = '0px';\n    canvas.style.pointerEvents = 'none';\n    canvas.style.zIndex = zIndex;\n\n    return canvas;\n  }\n\n  function ellipse(context, x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n    context.save();\n    context.translate(x, y);\n    context.rotate(rotation);\n    context.scale(radiusX, radiusY);\n    context.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n    context.restore();\n  }\n\n  function randomPhysics(opts) {\n    var radAngle = opts.angle * (Math.PI / 180);\n    var radSpread = opts.spread * (Math.PI / 180);\n\n    return {\n      x: opts.x,\n      y: opts.y,\n      wobble: Math.random() * 10,\n      wobbleSpeed: Math.min(0.11, Math.random() * 0.1 + 0.05),\n      velocity: (opts.startVelocity * 0.5) + (Math.random() * opts.startVelocity),\n      angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),\n      tiltAngle: (Math.random() * (0.75 - 0.25) + 0.25) * Math.PI,\n      color: opts.color,\n      shape: opts.shape,\n      tick: 0,\n      totalTicks: opts.ticks,\n      decay: opts.decay,\n      drift: opts.drift,\n      random: Math.random() + 2,\n      tiltSin: 0,\n      tiltCos: 0,\n      wobbleX: 0,\n      wobbleY: 0,\n      gravity: opts.gravity * 3,\n      ovalScalar: 0.6,\n      scalar: opts.scalar,\n      flat: opts.flat\n    };\n  }\n\n  function updateFetti(context, fetti) {\n    fetti.x += Math.cos(fetti.angle2D) * fetti.velocity + fetti.drift;\n    fetti.y += Math.sin(fetti.angle2D) * fetti.velocity + fetti.gravity;\n    fetti.velocity *= fetti.decay;\n\n    if (fetti.flat) {\n      fetti.wobble = 0;\n      fetti.wobbleX = fetti.x + (10 * fetti.scalar);\n      fetti.wobbleY = fetti.y + (10 * fetti.scalar);\n\n      fetti.tiltSin = 0;\n      fetti.tiltCos = 0;\n      fetti.random = 1;\n    } else {\n      fetti.wobble += fetti.wobbleSpeed;\n      fetti.wobbleX = fetti.x + ((10 * fetti.scalar) * Math.cos(fetti.wobble));\n      fetti.wobbleY = fetti.y + ((10 * fetti.scalar) * Math.sin(fetti.wobble));\n\n      fetti.tiltAngle += 0.1;\n      fetti.tiltSin = Math.sin(fetti.tiltAngle);\n      fetti.tiltCos = Math.cos(fetti.tiltAngle);\n      fetti.random = Math.random() + 2;\n    }\n\n    var progress = (fetti.tick++) / fetti.totalTicks;\n\n    var x1 = fetti.x + (fetti.random * fetti.tiltCos);\n    var y1 = fetti.y + (fetti.random * fetti.tiltSin);\n    var x2 = fetti.wobbleX + (fetti.random * fetti.tiltCos);\n    var y2 = fetti.wobbleY + (fetti.random * fetti.tiltSin);\n\n    context.fillStyle = 'rgba(' + fetti.color.r + ', ' + fetti.color.g + ', ' + fetti.color.b + ', ' + (1 - progress) + ')';\n\n    context.beginPath();\n\n    if (canUsePaths && fetti.shape.type === 'path' && typeof fetti.shape.path === 'string' && Array.isArray(fetti.shape.matrix)) {\n      context.fill(transformPath2D(\n        fetti.shape.path,\n        fetti.shape.matrix,\n        fetti.x,\n        fetti.y,\n        Math.abs(x2 - x1) * 0.1,\n        Math.abs(y2 - y1) * 0.1,\n        Math.PI / 10 * fetti.wobble\n      ));\n    } else if (fetti.shape.type === 'bitmap') {\n      var rotation = Math.PI / 10 * fetti.wobble;\n      var scaleX = Math.abs(x2 - x1) * 0.1;\n      var scaleY = Math.abs(y2 - y1) * 0.1;\n      var width = fetti.shape.bitmap.width * fetti.scalar;\n      var height = fetti.shape.bitmap.height * fetti.scalar;\n\n      var matrix = new DOMMatrix([\n        Math.cos(rotation) * scaleX,\n        Math.sin(rotation) * scaleX,\n        -Math.sin(rotation) * scaleY,\n        Math.cos(rotation) * scaleY,\n        fetti.x,\n        fetti.y\n      ]);\n\n      // apply the transform matrix from the confetti shape\n      matrix.multiplySelf(new DOMMatrix(fetti.shape.matrix));\n\n      var pattern = context.createPattern(bitmapMapper.transform(fetti.shape.bitmap), 'no-repeat');\n      pattern.setTransform(matrix);\n\n      context.globalAlpha = (1 - progress);\n      context.fillStyle = pattern;\n      context.fillRect(\n        fetti.x - (width / 2),\n        fetti.y - (height / 2),\n        width,\n        height\n      );\n      context.globalAlpha = 1;\n    } else if (fetti.shape === 'circle') {\n      context.ellipse ?\n        context.ellipse(fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI) :\n        ellipse(context, fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI);\n    } else if (fetti.shape === 'star') {\n      var rot = Math.PI / 2 * 3;\n      var innerRadius = 4 * fetti.scalar;\n      var outerRadius = 8 * fetti.scalar;\n      var x = fetti.x;\n      var y = fetti.y;\n      var spikes = 5;\n      var step = Math.PI / spikes;\n\n      while (spikes--) {\n        x = fetti.x + Math.cos(rot) * outerRadius;\n        y = fetti.y + Math.sin(rot) * outerRadius;\n        context.lineTo(x, y);\n        rot += step;\n\n        x = fetti.x + Math.cos(rot) * innerRadius;\n        y = fetti.y + Math.sin(rot) * innerRadius;\n        context.lineTo(x, y);\n        rot += step;\n      }\n    } else {\n      context.moveTo(Math.floor(fetti.x), Math.floor(fetti.y));\n      context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));\n      context.lineTo(Math.floor(x2), Math.floor(y2));\n      context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));\n    }\n\n    context.closePath();\n    context.fill();\n\n    return fetti.tick < fetti.totalTicks;\n  }\n\n  function animate(canvas, fettis, resizer, size, done) {\n    var animatingFettis = fettis.slice();\n    var context = canvas.getContext('2d');\n    var animationFrame;\n    var destroy;\n\n    var prom = promise(function (resolve) {\n      function onDone() {\n        animationFrame = destroy = null;\n\n        context.clearRect(0, 0, size.width, size.height);\n        bitmapMapper.clear();\n\n        done();\n        resolve();\n      }\n\n      function update() {\n        if (isWorker && !(size.width === workerSize.width && size.height === workerSize.height)) {\n          size.width = canvas.width = workerSize.width;\n          size.height = canvas.height = workerSize.height;\n        }\n\n        if (!size.width && !size.height) {\n          resizer(canvas);\n          size.width = canvas.width;\n          size.height = canvas.height;\n        }\n\n        context.clearRect(0, 0, size.width, size.height);\n\n        animatingFettis = animatingFettis.filter(function (fetti) {\n          return updateFetti(context, fetti);\n        });\n\n        if (animatingFettis.length) {\n          animationFrame = raf.frame(update);\n        } else {\n          onDone();\n        }\n      }\n\n      animationFrame = raf.frame(update);\n      destroy = onDone;\n    });\n\n    return {\n      addFettis: function (fettis) {\n        animatingFettis = animatingFettis.concat(fettis);\n\n        return prom;\n      },\n      canvas: canvas,\n      promise: prom,\n      reset: function () {\n        if (animationFrame) {\n          raf.cancel(animationFrame);\n        }\n\n        if (destroy) {\n          destroy();\n        }\n      }\n    };\n  }\n\n  function confettiCannon(canvas, globalOpts) {\n    var isLibCanvas = !canvas;\n    var allowResize = !!prop(globalOpts || {}, 'resize');\n    var hasResizeEventRegistered = false;\n    var globalDisableForReducedMotion = prop(globalOpts, 'disableForReducedMotion', Boolean);\n    var shouldUseWorker = canUseWorker && !!prop(globalOpts || {}, 'useWorker');\n    var worker = shouldUseWorker ? getWorker() : null;\n    var resizer = isLibCanvas ? setCanvasWindowSize : setCanvasRectSize;\n    var initialized = (canvas && worker) ? !!canvas.__confetti_initialized : false;\n    var preferLessMotion = typeof matchMedia === 'function' && matchMedia('(prefers-reduced-motion)').matches;\n    var animationObj;\n\n    function fireLocal(options, size, done) {\n      var particleCount = prop(options, 'particleCount', onlyPositiveInt);\n      var angle = prop(options, 'angle', Number);\n      var spread = prop(options, 'spread', Number);\n      var startVelocity = prop(options, 'startVelocity', Number);\n      var decay = prop(options, 'decay', Number);\n      var gravity = prop(options, 'gravity', Number);\n      var drift = prop(options, 'drift', Number);\n      var colors = prop(options, 'colors', colorsToRgb);\n      var ticks = prop(options, 'ticks', Number);\n      var shapes = prop(options, 'shapes');\n      var scalar = prop(options, 'scalar');\n      var flat = !!prop(options, 'flat');\n      var origin = getOrigin(options);\n\n      var temp = particleCount;\n      var fettis = [];\n\n      var startX = canvas.width * origin.x;\n      var startY = canvas.height * origin.y;\n\n      while (temp--) {\n        fettis.push(\n          randomPhysics({\n            x: startX,\n            y: startY,\n            angle: angle,\n            spread: spread,\n            startVelocity: startVelocity,\n            color: colors[temp % colors.length],\n            shape: shapes[randomInt(0, shapes.length)],\n            ticks: ticks,\n            decay: decay,\n            gravity: gravity,\n            drift: drift,\n            scalar: scalar,\n            flat: flat\n          })\n        );\n      }\n\n      // if we have a previous canvas already animating,\n      // add to it\n      if (animationObj) {\n        return animationObj.addFettis(fettis);\n      }\n\n      animationObj = animate(canvas, fettis, resizer, size , done);\n\n      return animationObj.promise;\n    }\n\n    function fire(options) {\n      var disableForReducedMotion = globalDisableForReducedMotion || prop(options, 'disableForReducedMotion', Boolean);\n      var zIndex = prop(options, 'zIndex', Number);\n\n      if (disableForReducedMotion && preferLessMotion) {\n        return promise(function (resolve) {\n          resolve();\n        });\n      }\n\n      if (isLibCanvas && animationObj) {\n        // use existing canvas from in-progress animation\n        canvas = animationObj.canvas;\n      } else if (isLibCanvas && !canvas) {\n        // create and initialize a new canvas\n        canvas = getCanvas(zIndex);\n        document.body.appendChild(canvas);\n      }\n\n      if (allowResize && !initialized) {\n        // initialize the size of a user-supplied canvas\n        resizer(canvas);\n      }\n\n      var size = {\n        width: canvas.width,\n        height: canvas.height\n      };\n\n      if (worker && !initialized) {\n        worker.init(canvas);\n      }\n\n      initialized = true;\n\n      if (worker) {\n        canvas.__confetti_initialized = true;\n      }\n\n      function onResize() {\n        if (worker) {\n          // TODO this really shouldn't be immediate, because it is expensive\n          var obj = {\n            getBoundingClientRect: function () {\n              if (!isLibCanvas) {\n                return canvas.getBoundingClientRect();\n              }\n            }\n          };\n\n          resizer(obj);\n\n          worker.postMessage({\n            resize: {\n              width: obj.width,\n              height: obj.height\n            }\n          });\n          return;\n        }\n\n        // don't actually query the size here, since this\n        // can execute frequently and rapidly\n        size.width = size.height = null;\n      }\n\n      function done() {\n        animationObj = null;\n\n        if (allowResize) {\n          hasResizeEventRegistered = false;\n          global.removeEventListener('resize', onResize);\n        }\n\n        if (isLibCanvas && canvas) {\n          if (document.body.contains(canvas)) {\n            document.body.removeChild(canvas); \n          }\n          canvas = null;\n          initialized = false;\n        }\n      }\n\n      if (allowResize && !hasResizeEventRegistered) {\n        hasResizeEventRegistered = true;\n        global.addEventListener('resize', onResize, false);\n      }\n\n      if (worker) {\n        return worker.fire(options, size, done);\n      }\n\n      return fireLocal(options, size, done);\n    }\n\n    fire.reset = function () {\n      if (worker) {\n        worker.reset();\n      }\n\n      if (animationObj) {\n        animationObj.reset();\n      }\n    };\n\n    return fire;\n  }\n\n  // Make default export lazy to defer worker creation until called.\n  var defaultFire;\n  function getDefaultFire() {\n    if (!defaultFire) {\n      defaultFire = confettiCannon(null, { useWorker: true, resize: true });\n    }\n    return defaultFire;\n  }\n\n  function transformPath2D(pathString, pathMatrix, x, y, scaleX, scaleY, rotation) {\n    var path2d = new Path2D(pathString);\n\n    var t1 = new Path2D();\n    t1.addPath(path2d, new DOMMatrix(pathMatrix));\n\n    var t2 = new Path2D();\n    // see https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/DOMMatrix\n    t2.addPath(t1, new DOMMatrix([\n      Math.cos(rotation) * scaleX,\n      Math.sin(rotation) * scaleX,\n      -Math.sin(rotation) * scaleY,\n      Math.cos(rotation) * scaleY,\n      x,\n      y\n    ]));\n\n    return t2;\n  }\n\n  function shapeFromPath(pathData) {\n    if (!canUsePaths) {\n      throw new Error('path confetti are not supported in this browser');\n    }\n\n    var path, matrix;\n\n    if (typeof pathData === 'string') {\n      path = pathData;\n    } else {\n      path = pathData.path;\n      matrix = pathData.matrix;\n    }\n\n    var path2d = new Path2D(path);\n    var tempCanvas = document.createElement('canvas');\n    var tempCtx = tempCanvas.getContext('2d');\n\n    if (!matrix) {\n      // attempt to figure out the width of the path, up to 1000x1000\n      var maxSize = 1000;\n      var minX = maxSize;\n      var minY = maxSize;\n      var maxX = 0;\n      var maxY = 0;\n      var width, height;\n\n      // do some line skipping... this is faster than checking\n      // every pixel and will be mostly still correct\n      for (var x = 0; x < maxSize; x += 2) {\n        for (var y = 0; y < maxSize; y += 2) {\n          if (tempCtx.isPointInPath(path2d, x, y, 'nonzero')) {\n            minX = Math.min(minX, x);\n            minY = Math.min(minY, y);\n            maxX = Math.max(maxX, x);\n            maxY = Math.max(maxY, y);\n          }\n        }\n      }\n\n      width = maxX - minX;\n      height = maxY - minY;\n\n      var maxDesiredSize = 10;\n      var scale = Math.min(maxDesiredSize/width, maxDesiredSize/height);\n\n      matrix = [\n        scale, 0, 0, scale,\n        -Math.round((width/2) + minX) * scale,\n        -Math.round((height/2) + minY) * scale\n      ];\n    }\n\n    return {\n      type: 'path',\n      path: path,\n      matrix: matrix\n    };\n  }\n\n  function shapeFromText(textData) {\n    var text,\n        scalar = 1,\n        color = '#000000',\n        // see https://nolanlawson.com/2022/04/08/the-struggle-of-using-native-emoji-on-the-web/\n        fontFamily = '\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';\n\n    if (typeof textData === 'string') {\n      text = textData;\n    } else {\n      text = textData.text;\n      scalar = 'scalar' in textData ? textData.scalar : scalar;\n      fontFamily = 'fontFamily' in textData ? textData.fontFamily : fontFamily;\n      color = 'color' in textData ? textData.color : color;\n    }\n\n    // all other confetti are 10 pixels,\n    // so this pixel size is the de-facto 100% scale confetti\n    var fontSize = 10 * scalar;\n    var font = '' + fontSize + 'px ' + fontFamily;\n\n    var canvas = new OffscreenCanvas(fontSize, fontSize);\n    var ctx = canvas.getContext('2d');\n\n    ctx.font = font;\n    var size = ctx.measureText(text);\n    var width = Math.ceil(size.actualBoundingBoxRight + size.actualBoundingBoxLeft);\n    var height = Math.ceil(size.actualBoundingBoxAscent + size.actualBoundingBoxDescent);\n\n    var padding = 2;\n    var x = size.actualBoundingBoxLeft + padding;\n    var y = size.actualBoundingBoxAscent + padding;\n    width += padding + padding;\n    height += padding + padding;\n\n    canvas = new OffscreenCanvas(width, height);\n    ctx = canvas.getContext('2d');\n    ctx.font = font;\n    ctx.fillStyle = color;\n\n    ctx.fillText(text, x, y);\n\n    var scale = 1 / scalar;\n\n    return {\n      type: 'bitmap',\n      // TODO these probably need to be transfered for workers\n      bitmap: canvas.transferToImageBitmap(),\n      matrix: [scale, 0, 0, scale, -width * scale / 2, -height * scale / 2]\n    };\n  }\n\n  module.exports = function() {\n    return getDefaultFire().apply(this, arguments);\n  };\n  module.exports.reset = function() {\n    getDefaultFire().reset();\n  };\n  module.exports.create = confettiCannon;\n  module.exports.shapeFromPath = shapeFromPath;\n  module.exports.shapeFromText = shapeFromText;\n}((function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  return this || {};\n})(), module, false));\n\n// end source content\n\nexport default module.exports;\nexport var create = module.exports.create;\n","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */\nvar twemoji=function(){\"use strict\";var twemoji={base:\"https://twemoji.maxcdn.com/v/14.0.2/\",ext:\".png\",size:\"72x72\",className:\"emoji\",convert:{fromCodePoint:fromCodePoint,toCodePoint:toCodePoint},onerror:function onerror(){if(this.parentNode){this.parentNode.replaceChild(createText(this.alt,false),this)}},parse:parse,replace:replace,test:test},escaper={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"'\":\"&#39;\",'\"':\"&quot;\"},re=/(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[Â©Â®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef0-\\udef6]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedd-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7c\\ude80-\\ude86\\ude90-\\udeac\\udeb0-\\udeba\\udec0-\\udec2\\uded0-\\uded9\\udee0-\\udee7]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g,UFE0Fg=/\\uFE0F/g,U200D=String.fromCharCode(8205),rescaper=/[&<>'\"]/g,shouldntBeParsed=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,fromCharCode=String.fromCharCode;return twemoji;function createText(text,clean){return document.createTextNode(clean?text.replace(UFE0Fg,\"\"):text)}function escapeHTML(s){return s.replace(rescaper,replacer)}function defaultImageSrcGenerator(icon,options){return\"\".concat(options.base,options.size,\"/\",icon,options.ext)}function grabAllTextNodes(node,allText){var childNodes=node.childNodes,length=childNodes.length,subnode,nodeType;while(length--){subnode=childNodes[length];nodeType=subnode.nodeType;if(nodeType===3){allText.push(subnode)}else if(nodeType===1&&!(\"ownerSVGElement\"in subnode)&&!shouldntBeParsed.test(subnode.nodeName.toLowerCase())){grabAllTextNodes(subnode,allText)}}return allText}function grabTheRightIcon(rawText){return toCodePoint(rawText.indexOf(U200D)<0?rawText.replace(UFE0Fg,\"\"):rawText)}function parseNode(node,options){var allText=grabAllTextNodes(node,[]),length=allText.length,attrib,attrname,modified,fragment,subnode,text,match,i,index,img,rawText,iconId,src;while(length--){modified=false;fragment=document.createDocumentFragment();subnode=allText[length];text=subnode.nodeValue;i=0;while(match=re.exec(text)){index=match.index;if(index!==i){fragment.appendChild(createText(text.slice(i,index),true))}rawText=match[0];iconId=grabTheRightIcon(rawText);i=index+rawText.length;src=options.callback(iconId,options);if(iconId&&src){img=new Image;img.onerror=options.onerror;img.setAttribute(\"draggable\",\"false\");attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&!img.hasAttribute(attrname)){img.setAttribute(attrname,attrib[attrname])}}img.className=options.className;img.alt=rawText;img.src=src;modified=true;fragment.appendChild(img)}if(!img)fragment.appendChild(createText(rawText,false));img=null}if(modified){if(i<text.length){fragment.appendChild(createText(text.slice(i),true))}subnode.parentNode.replaceChild(fragment,subnode)}}return node}function parseString(str,options){return replace(str,function(rawText){var ret=rawText,iconId=grabTheRightIcon(rawText),src=options.callback(iconId,options),attrib,attrname;if(iconId&&src){ret=\"<img \".concat('class=\"',options.className,'\" ','draggable=\"false\" ','alt=\"',rawText,'\"',' src=\"',src,'\"');attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&ret.indexOf(\" \"+attrname+\"=\")===-1){ret=ret.concat(\" \",attrname,'=\"',escapeHTML(attrib[attrname]),'\"')}}ret=ret.concat(\"/>\")}return ret})}function replacer(m){return escaper[m]}function returnNull(){return null}function toSizeSquaredAsset(value){return typeof value===\"number\"?value+\"x\"+value:value}function fromCodePoint(codepoint){var code=typeof codepoint===\"string\"?parseInt(codepoint,16):codepoint;if(code<65536){return fromCharCode(code)}code-=65536;return fromCharCode(55296+(code>>10),56320+(code&1023))}function parse(what,how){if(!how||typeof how===\"function\"){how={callback:how}}return(typeof what===\"string\"?parseString:parseNode)(what,{callback:how.callback||defaultImageSrcGenerator,attributes:typeof how.attributes===\"function\"?how.attributes:returnNull,base:typeof how.base===\"string\"?how.base:twemoji.base,ext:how.ext||twemoji.ext,size:how.folder||toSizeSquaredAsset(how.size||twemoji.size),className:how.className||twemoji.className,onerror:how.onerror||twemoji.onerror})}function replace(text,callback){return String(text).replace(re,callback)}function test(text){re.lastIndex=0;var result=re.test(text);re.lastIndex=0;return result}function toCodePoint(unicodeSurrogates,sep){var r=[],c=0,p=0,i=0;while(i<unicodeSurrogates.length){c=unicodeSurrogates.charCodeAt(i++);if(p){r.push((65536+(p-55296<<10)+(c-56320)).toString(16));p=0}else if(55296<=c&&c<=56319){p=c}else{r.push(c.toString(16))}}return r.join(sep||\"-\")}}();\nexport default twemoji;","import { p_stringToElement } from \"../utils\";\nimport { API_ENDPOINT } from \"../config\";\nimport { SafeTunnel } from \"./safeTunnel\";\nconst LOGIN_CONTAINER = `\r\n<div class=\"main-login-container\">\r\n    <div class=\"rel\">\r\n        <div class=\"loader-container\" id=\"loader\" style=\"display: none;\">\r\n            <div class=\"rel\">\r\n                <span class=\"loader login-loader\"></span>\r\n            </div>\r\n\r\n        </div>\r\n        <form action=\"\">\r\n            <h3 class=\"login-title\">Login</h3>\r\n            <p class=\"login-title\">An action requires you to login to your account.</p>\r\n            <div class=\"login-align-center\">\r\n                <input type=\"text\" name=\"username\" id=\"loginUsername\" autocomplete=\"username\" placeholder=\"Username\" required>\r\n                <input type=\"password\" name=\"password\" id=\"loginPassword\" placeholder=\"Password\" required>\r\n                <button type=\"submit\" class=\"login-btn-submit normal-button\" id=\"submitBtn\">Submit</button>\r\n                <a href=\"https://apiteamsplus.pythonanywhere.com/\" target=\"_blank\">Visit website to register</a>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n</div>\r\n`;\nexport class AuthProvider {\n    currentToken = null;\n    success = null;\n    loginContainer = null;\n    awaitAuth = false;\n    constructor() {\n        this.p_createLoginContainer();\n        this.p_initButtons();\n        this.p_asyncInit();\n    }\n    async p_asyncInit() {\n        this.currentToken = await this.p_loadToken();\n    }\n    async p_loadToken() {\n        return (await chrome.storage.local.get([\"teamsplusToken\"])).teamsPlusToken;\n    }\n    p_saveToken() {\n        chrome.storage.local.set({ \"teamsplusToken\": this.currentToken });\n    }\n    p_createLoginContainer() {\n        if (this.loginContainer == null) {\n            this.loginContainer = p_stringToElement(LOGIN_CONTAINER);\n            this.loginContainer.style.display = \"none\";\n            document.body.appendChild(this.loginContainer);\n        }\n        else {\n            console.error(\"Login container already exists!\");\n        }\n    }\n    p_showLoginContainer() {\n        if (this.loginContainer) {\n            this.loginContainer.style.opacity = \"0\";\n            this.loginContainer.style.display = \"block\";\n            // Show animation\n            this.loginContainer.animate([\n                { transform: 'translateY(-65%) translateX(-50%)', opacity: \"0\", filter: \"blur(10px)\" },\n                { transform: 'translateY(-50%) translateX(-50%)', opacity: \"1\", filter: \"blur(0px)\" }\n            ], {\n                duration: 1000,\n                easing: \"ease-out\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n        }\n        else {\n            console.error(\"Login container not found!\");\n        }\n    }\n    p_hideLoginContainer() {\n        if (this.loginContainer) {\n            // Animate\n            this.loginContainer.animate([\n                { opacity: \"1\", filter: \"blur(0px)\", transform: 'translateY(-50%) translateX(-50%)' },\n                { opacity: \"0\", filter: \"blur(10px)\", transform: 'translateY(-65%) translateX(-50%)' }\n            ], {\n                duration: 1000,\n                easing: \"ease-in\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n            setTimeout(() => {\n                if (this.loginContainer == null)\n                    return;\n                this.loginContainer.style.display = \"none\";\n            }, 1000);\n        }\n        else {\n            console.error(\"Login container not found!\");\n        }\n    }\n    p_showLoader() {\n        if (this.loginContainer == null)\n            return;\n        const loader = this.loginContainer.querySelector(\"#loader\");\n        if (loader) {\n            loader.style.display = \"block\";\n        }\n    }\n    p_hideLoader() {\n        if (this.loginContainer == null)\n            return;\n        const loader = this.loginContainer.querySelector(\"#loader\");\n        if (loader) {\n            loader.style.display = \"none\";\n        }\n    }\n    p_initButtons() {\n        if (this.loginContainer == null)\n            return;\n        const submitBtn = this.loginContainer.querySelector(\"#submitBtn\");\n        if (submitBtn) {\n            submitBtn.addEventListener(\"click\", async (event) => {\n                console.log(\"The button has been clicked!\");\n                event.preventDefault();\n                if (this.loginContainer == null) {\n                    console.error(\"no login container\");\n                    return;\n                }\n                ;\n                if (this.awaitAuth == false) {\n                    console.error(\"not awaiting auth\");\n                    return;\n                }\n                ;\n                this.success = null;\n                this.currentToken = null;\n                const usernameElement = this.loginContainer.querySelector(\"#loginUsername\");\n                const passwordElement = this.loginContainer.querySelector(\"#loginPassword\");\n                if (usernameElement == null || passwordElement == null) {\n                    console.error(\"Username / password element not found\");\n                    return;\n                }\n                ;\n                // Post\n                this.p_showLoader();\n                const safeTunnel = new SafeTunnel();\n                const body = JSON.stringify({\n                    username: usernameElement.value,\n                    password: passwordElement.value,\n                    transfer: true // Tells API to transfer back token in .data field\n                });\n                const encrypted = await safeTunnel.safeTunnelEncrypt(body);\n                fetch(`${API_ENDPOINT}/api/v1/auth/login`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify(encrypted)\n                })\n                    .then(response => response.json())\n                    .then((data) => {\n                    if (data.message && data.success == true && data.data) {\n                        this.currentToken = data.data;\n                        this.p_saveToken();\n                        //this.currentToken =\" yay\";\n                        this.p_hideLoader();\n                        //alert(\"OK\");\n                    }\n                    else {\n                        this.p_hideLoader();\n                        throw new Error(\"not OK\");\n                    }\n                })\n                    .catch((error) => {\n                    this.p_hideLoader();\n                    console.error('Error:', error);\n                    if (error instanceof Error) {\n                        alert(`Error: ${error.message}`);\n                    }\n                    else {\n                        alert(\"Error\");\n                    }\n                });\n            });\n        }\n        else {\n            console.error(\"Oneor many elements null\");\n        }\n    }\n    waitUntilToken(checkInterval = 100) {\n        this.awaitAuth = true;\n        return new Promise((resolve) => {\n            const interval = setInterval(() => {\n                if (this.currentToken != null || this.success || null) {\n                    clearInterval(interval);\n                    this.success = null;\n                    this.awaitAuth = false;\n                    resolve(this.currentToken);\n                }\n            }, checkInterval);\n        });\n    }\n    async getToken() {\n        if (this.currentToken) {\n            console.log(\"Found token! returning\");\n            return this.currentToken;\n        }\n        console.log(\"No token! creating new login container\");\n        this.p_createLoginContainer();\n        this.p_showLoginContainer();\n        if (this.loginContainer == null)\n            return;\n        this.loginContainer.style.display = \"block\";\n        await this.waitUntilToken();\n        this.p_hideLoginContainer();\n        const tok = this.currentToken;\n        if (tok == null) {\n            console.error(\"Still no token\");\n        }\n        return tok;\n    }\n}\n","import { p_stringToElement } from \"../utils\";\nimport { API_ENDPOINT } from \"../config\";\nimport { SafeTunnel } from \"./safeTunnel\";\nimport { promptAndWait } from \"../ui/pwdPrompt\";\nconst ENCRYPTION_UI_WINDOW = `\r\n<div class=\"encryption-ui-window\">\r\n    <div class=\"title-container\">\r\n        <div class=\"title-sub-container\">\r\n            <img src=\"https://www.svgrepo.com/show/513833/lock.svg\" alt=\"\" class=\"lock-icon-title\">\r\n            <h2 class=\"encryption-title\">Encryption</h2>\r\n\r\n        </div>\r\n        <button id=\"encryptionCloseButton\" class=\"encryption-close-button\">\r\n            <img src=\"https://www.svgrepo.com/show/12848/x-symbol.svg\" alt=\"X\">\r\n        </button>   \r\n        \r\n    </div>\r\n    \r\n    <input type=\"text\" name=\"search\" id=\"encrypt-search\" class=\"encryption-ui-search\" placeholder=\"Search for accounts...\" autocomplete=\"off\">\r\n    <div class=\"encryption-ui-people\">\r\n\r\n\r\n    </div>\r\n    <p id=\"selected\">Selected: null</p>\r\n    <div class=\"center\">\r\n        <textarea name=\"encrypt-message\" id=\"encrypt-message\" rows=\"5\" placeholder=\"Type your message here\"></textarea>\r\n    </div>\r\n\r\n    <div class=\"center\">\r\n        <button type=\"button\" id=\"encrypt-btn\">\r\n            <div class=\"btn-with-icon\">\r\n                <img src=\"https://www.svgrepo.com/show/513833/lock.svg\" alt=\"\" class=\"btn-icon\">\r\n                <span>Encrypt</span>\r\n            </div>\r\n        </button>\r\n    </div>\r\n    \r\n    <div class=\"center\">\r\n        <textarea name=\"\" id=\"encrypt-output\" placeholder=\"Output will appear here\" rows=\"2\"></textarea>\r\n    </div>\r\n    \r\n</div>\r\n`;\nconst ENCRYPTION_ACCOUNT = `\r\n<div class=\"person\">\r\n    <p id=\"account-info\">Bob</p>\r\n    <span id=\"account-id\">ID: 17</span>\r\n    <div class=\"center\">\r\n        <button type=\"button\" id=\"select\">Select</button>\r\n    </div>\r\n</div>\r\n`;\nconst DECRYPT_BUTTON = `\r\n<button type=\"button\" id=\"decrypt-btn\">Decrypt</button>\r\n`;\nconst LONG_YAP = `\r\n**Important information before proceeding**:\r\nYour message will be protected using military-grade encryption: RSA-OAEP 2048 for secure key exchange, AES-GCM 256 for encrypting the content, and RSA-PSS for digitally signing it to guarantee authenticity. Without access to your accountâ€™s login credentials (where passwords are hashed using bcrypt, soon to be upgraded to Argon2), decrypting your message would take millions of years, even with super computers. All communications between your device and the API are encrypted with HTTPS (TLS), ensuring top-level security. If you're on a proxy (such as school Wi-Fi), your data remains encrypted at all times between you and the API. No message history is stored on the server.\r\n\r\nPlease note that we are not able to provide the decrypted message or private key for anyone registered in our database as private keys are encrypted using account passwords which are hashed using secure algorithms that are very difficult to reverse.\r\n`;\nexport class EncryptionProvider {\n    visible = false;\n    win;\n    currentSearch = \"\";\n    currentSelected = null;\n    authProvider;\n    constructor(authProvider) {\n        this.win = this.createWindow();\n        this.hideWindowInstant();\n        this.authProvider = authProvider;\n        this.injectTab();\n        this.refreshAccounts();\n        this.searchEvents();\n        this.encryptEvent();\n        this.messageObserver();\n        this.closeButtonEvent();\n    }\n    termsOfServiceAgree() {\n        // Is it alreay present\n        if (localStorage.getItem(\"tos_agree\") != null)\n            return true;\n        const agree = confirm(\"By using TeamsPlus encryption services, you agree to our terms of service, which can be found on our website at https://apiteamsplus.pythonanywhere.com/terms_of_service. Confirm below if you agree.\");\n        if (agree) {\n            localStorage.setItem(\"tos_agree\", \"yes\");\n            return true;\n        }\n        return false;\n    }\n    hideWindow() {\n        this.win.animate([\n            { transform: 'translateY(-50%) translateX(-50%)', opacity: \"1\" },\n            { transform: 'translateY(-60%) translateX(-50%)', opacity: \"0\" }\n        ], {\n            duration: 500,\n            easing: \"ease-in\",\n            iterations: 1,\n            fill: \"forwards\"\n        });\n        setTimeout(() => {\n            if (this.win)\n                this.win.style.display = \"none\";\n        }, 500);\n    }\n    hideWindowInstant() {\n        this.win.style.display = \"none\";\n    }\n    showWindow() {\n        this.win.style.opacity = \"0\";\n        this.win.style.display = \"block\";\n        this.win.animate([\n            { transform: 'translateY(-60%) translateX(-50%)', opacity: \"0\" },\n            { transform: 'translateY(-50%) translateX(-50%)', opacity: \"1\" }\n        ], {\n            duration: 500,\n            easing: \"ease-out\",\n            iterations: 1,\n            fill: \"forwards\"\n        });\n        const messageField = this.win.querySelector(\"#encrypt-message\");\n        if (messageField == null)\n            return;\n        messageField.value = \"\";\n        this.currentSelected = null;\n        this.currentSearch = '';\n        const selectedP = this.win.querySelector(\"#selected\");\n        if (selectedP != null)\n            selectedP.innerHTML = \"Selected: <strong>No account selected. Please select an account to encrypt.</strong>\";\n        const input = this.win.querySelector(\"#encrypt-search\");\n        if (input != null)\n            input.value = '';\n        this.refreshAccounts();\n    }\n    async injectTab() {\n        const btns = await window.teamsPlusAppsManager.addAppAndGetButton(\"Encryption\", \"https://www.svgrepo.com/show/501247/lock.svg\", `\r\n            <svg fill=\"var(--colorNeutralForeground3)\" viewBox=\"0 0 1920 1920\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M1016.588 1242.353v338.823h-112.94v-338.823h112.94ZM960.118 112.94c217.976 0 395.294 177.318 395.294 395.294V903.53H564.824V508.235c0-217.976 177.317-395.294 395.294-395.294Zm508.235 790.588V508.235C1468.353 228.028 1240.325 0 960.118 0S451.882 228.028 451.882 508.235V903.53H226v790.589C226 1818.692 327.308 1920 451.882 1920h1016.47c124.575 0 225.883-101.308 225.883-225.882V903.529h-225.882Z\" fill-rule=\"evenodd\"/>\r\n</svg>`);\n        btns.forEach(btn => {\n            btn.addEventListener(\"click\", () => {\n                this.visible = !this.visible;\n                if (this.visible) {\n                    this.showWindow();\n                }\n                else {\n                    this.hideWindow();\n                }\n            });\n        });\n    }\n    createWindow() {\n        const win = p_stringToElement(ENCRYPTION_UI_WINDOW);\n        document.body.appendChild(win);\n        return win;\n    }\n    refreshAccounts() {\n        const list = this.win.querySelector(\".encryption-ui-people\");\n        if (list == null) {\n            throw new Error(\"List not found\");\n        }\n        ;\n        const selectedP = this.win.querySelector(\"#selected\");\n        if (selectedP == null)\n            return;\n        list.innerHTML = '';\n        fetch(`${API_ENDPOINT}/api/v1/auth/search?search=${this.currentSearch}`, {\n            method: 'GET'\n        })\n            .then(response => response.json())\n            .then((data) => {\n            if (data.message && data.success == true && data.data) {\n                const resp = data.data;\n                for (const user in resp) {\n                    const id = resp[user];\n                    const newEl = p_stringToElement(ENCRYPTION_ACCOUNT);\n                    const p = newEl.querySelector(\"#account-info\");\n                    const p2 = newEl.querySelector(\"#account-id\");\n                    if (p == null || p2 == null) {\n                        throw new Error(\"Account info not found!\");\n                    }\n                    ;\n                    p.textContent = `${user}`;\n                    p2.textContent = `ID: ${id}`;\n                    const selectBtn = newEl.querySelector(\"#select\");\n                    if (selectBtn == null) {\n                        throw new Error(\"select btn\");\n                    }\n                    selectBtn.addEventListener(\"click\", () => {\n                        this.currentSelected = id;\n                        //alert(`Selected ${id}`);\n                        selectedP.textContent = `Selected: ${user}/${id}`;\n                    });\n                    list.appendChild(newEl);\n                    newEl.style.opacity = \"0\";\n                    newEl.style.transform = \"translateY(-15px)\";\n                    newEl.animate([\n                        { transform: 'translateY(-15px)', opacity: \"0\" },\n                        { transform: 'translateY(0px)', opacity: \"1\" }\n                    ], {\n                        duration: 500,\n                        easing: \"ease-out\",\n                        iterations: 1,\n                        fill: \"forwards\"\n                    });\n                    console.log(`Added: ${user}`);\n                }\n            }\n            else {\n                throw new Error(data.message);\n            }\n        })\n            .catch((error) => {\n            console.error('Error:', error);\n            if (error instanceof Error) {\n                alert(`Error: ${error.message}`);\n            }\n            else {\n                alert(\"Error\");\n            }\n        });\n    }\n    searchEvents() {\n        const input = this.win.querySelector(\"#encrypt-search\");\n        if (input == null)\n            return;\n        input.addEventListener(\"input\", () => {\n            this.currentSearch = input.value;\n            this.refreshAccounts();\n        });\n    }\n    encryptEvent() {\n        const encryptBtn = this.win.querySelector(\"#encrypt-btn\");\n        if (encryptBtn == null)\n            return;\n        const messageField = this.win.querySelector(\"#encrypt-message\");\n        if (messageField == null)\n            return;\n        encryptBtn.addEventListener(\"click\", async () => {\n            if (this.currentSelected == null) {\n                alert(\"Please select an account before encrypting!\");\n                return;\n            }\n            //alert(LONG_YAP);\n            this.termsOfServiceAgree();\n            const safeTunnel = new SafeTunnel();\n            const body = JSON.stringify({\n                destination: [this.currentSelected],\n                body: messageField.value,\n                pwd: await promptAndWait()\n            });\n            const encryptedBody = await safeTunnel.safeTunnelEncrypt(body);\n            fetch(`${API_ENDPOINT}/api/v1/encryption/encrypt`, {\n                method: 'POST',\n                body: JSON.stringify(encryptedBody),\n                headers: {\n                    'Authorization': `Bearer ${await this.authProvider.getToken()}`,\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(response => response.json())\n                .then((data) => {\n                if (data.message && data.success == true && data.data) {\n                    if (data.note) {\n                        alert(`Note: ${data.note}`);\n                    }\n                    const finalStr = `[Encrypted Message]\\\\\\\\\\\\\\\\${JSON.stringify(data.data)}\\\\\\\\\\\\\\\\[END]`;\n                    const encryptOutput = this.win.querySelector(\"#encrypt-output\");\n                    if (encryptOutput) {\n                        encryptOutput.value = finalStr;\n                    }\n                    navigator.clipboard.writeText(finalStr);\n                    alert(\"Copied to clipboard\");\n                }\n                else {\n                    throw new Error(data.message);\n                }\n            })\n                .catch((error) => {\n                console.error('Error:', error);\n                if (error instanceof Error) {\n                    alert(`Error: ${error.message}`);\n                }\n                else {\n                    alert(\"Error\");\n                }\n            });\n        });\n    }\n    isValidEncrypted(str) {\n        const splitted = str.split(\"\\\\\\\\\\\\\\\\\");\n        if (splitted.length != 3)\n            return false;\n        const second = splitted[1];\n        try {\n            JSON.parse(second);\n        }\n        catch (e) {\n            return false;\n        }\n        finally {\n            return true;\n        }\n    }\n    async attemptDecrypt(jsonData) {\n        this.termsOfServiceAgree();\n        const safeTunnel = new SafeTunnel();\n        const content = JSON.stringify({\n            body: jsonData[\"body\"],\n            key: jsonData[\"keys\"],\n            iv: jsonData[\"iv\"],\n            signature: jsonData[\"signature\"],\n            pwd: await promptAndWait(),\n            author: jsonData[\"author\"]\n        });\n        fetch(`${API_ENDPOINT}/api/v1/encryption/decrypt`, {\n            method: 'POST',\n            body: JSON.stringify(await safeTunnel.safeTunnelEncrypt(content)),\n            headers: {\n                'Authorization': `Bearer ${await this.authProvider.getToken()}`,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(response => response.json())\n            .then(async (a) => {\n            const data = await safeTunnel.safeTunnelDecrypt(a.ct, a.iv);\n            if (data.message && data.success == true && data.data) {\n                alert(`Message was: ${data.data}`);\n            }\n            else {\n                throw new Error(data.message);\n            }\n        })\n            .catch((error) => {\n            console.error('Error:', error);\n            if (error instanceof Error) {\n                alert(`Error: ${error.message}`);\n            }\n            else {\n                alert(\"Error\");\n            }\n        });\n    }\n    onMessage(element) {\n        const subDiv = element.querySelector('[id^=\"content-\"]');\n        if (subDiv == null) {\n            console.log(\"Mut observer warn: content- element not found under message\");\n            return;\n        }\n        console.log(subDiv.ariaLabel);\n        const message = subDiv.ariaLabel || \"\";\n        const isValid = this.isValidEncrypted(subDiv.ariaLabel || \"\");\n        // Now do stuff\n        if (isValid && subDiv.querySelector(\"#decrypt-btn\") == null) {\n            const newBtn = p_stringToElement(DECRYPT_BUTTON);\n            subDiv.appendChild(newBtn);\n            newBtn.addEventListener(\"click\", () => {\n                try {\n                    const splitted = message.split(\"\\\\\\\\\\\\\\\\\");\n                    const theActualMessage = splitted[1];\n                    this.attemptDecrypt(JSON.parse(theActualMessage));\n                }\n                catch (e) {\n                    alert(`Failed: ${e}`);\n                }\n            });\n        }\n    }\n    messageObserver() {\n        const observer = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                for (const node of mutation.addedNodes) {\n                    if (node instanceof HTMLElement &&\n                        node.dataset.tid === 'chat-pane-message') {\n                        console.log('New chat message detected:', node);\n                        this.onMessage(node);\n                    }\n                    if (node instanceof HTMLElement || node instanceof DocumentFragment) {\n                        const wrappers = node.querySelectorAll('[data-tid=\"chat-pane-message\"]');\n                        wrappers.forEach((wrapper, index) => this.onMessage(wrapper));\n                    }\n                }\n            }\n        });\n        console.log(\"Starting Mutation observer on Body!\");\n        observer.observe(document.body, { childList: true, subtree: true });\n    }\n    closeButtonEvent() {\n        const closeButton = this.win.querySelector(\"#encryptionCloseButton\");\n        if (closeButton == null)\n            return;\n        closeButton.addEventListener(\"click\", () => {\n            this.hideWindow();\n            this.visible = false;\n        });\n    }\n}\n","import { API_ENDPOINT } from \"../config\";\nasync function exportKeyToPEM(key, type = \"public\") {\n    const format = type === \"public\" ? \"spki\" : \"pkcs8\";\n    const label = type === \"public\" ? \"PUBLIC KEY\" : \"PRIVATE KEY\";\n    const buf = await window.crypto.subtle.exportKey(format, key);\n    const b64 = btoa(String.fromCharCode(...new Uint8Array(buf)));\n    const pem = [\n        `-----BEGIN ${label}-----`,\n        ...b64.match(/.{1,64}/g),\n        `-----END ${label}-----`\n    ].join(\"\\n\");\n    return pem;\n}\nfunction base64toBytes(b64) {\n    const bin = atob(b64);\n    const len = bin.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = bin.charCodeAt(i);\n    }\n    return bytes; // Uint8Array of decoded bytes\n}\nexport class SafeTunnel {\n    keypair;\n    aesKey;\n    aesKeyString;\n    constructor() {\n        this.asyncInit();\n    }\n    async waitForKey() {\n        while (this.aesKey == null || this.aesKey == undefined) {\n            await new Promise(resolve => setTimeout(resolve, 100));\n        }\n        return true;\n    }\n    async asyncInit() {\n        await this.createRSAKeypair();\n        await this.getSharedAESKey();\n    }\n    async createRSAKeypair() {\n        console.log(\"Creating RSA keypair\");\n        this.keypair = await window.crypto.subtle.generateKey({\n            name: \"RSA-OAEP\",\n            modulusLength: 2048,\n            publicExponent: new Uint8Array([1, 0, 1]),\n            hash: \"SHA-256\"\n        }, true, // extractable\n        [\"encrypt\", \"decrypt\"]);\n        console.log(\"Keypair OK\");\n    }\n    async getSharedAESKey() {\n        console.log(\"Attempt to establish safe-tunnel connection\");\n        //const b = true;\n        //if (b == false) {\n        //    throw new Error(\"Server authenticity unproven, client refused connection\");\n        //}\n        const resp = await fetch(`${API_ENDPOINT}/api/v1/safe_tunnel/handshake`, {\n            method: 'POST',\n            body: JSON.stringify({\n                publicKey: await exportKeyToPEM(this.keypair.publicKey, \"public\")\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        const response_json = await resp.json();\n        if (response_json.message == null) {\n            throw new Error(\"Invalid server response\");\n        }\n        if (response_json.success == false) {\n            throw new Error(`Failed to establish secure connection: ${response_json.message}`);\n        }\n        if (response_json.data == null) {\n            throw new Error(`Server returned an invalid response`);\n        }\n        this.aesKeyString = response_json.data.ks;\n        console.log(this.aesKeyString);\n        const decrypted = await window.crypto.subtle.decrypt({\n            name: \"RSA-OAEP\"\n        }, this.keypair.privateKey, // previously imported/generated private CryptoKey\n        base64toBytes(response_json.data.k) // an ArrayBuffer (not base64 or string)\n        );\n        this.aesKey = await window.crypto.subtle.importKey(\"raw\", decrypted, { name: \"AES-GCM\" }, // or AES-GCM\n        false, // not extractable\n        [\"encrypt\", \"decrypt\"]);\n        console.log(\"Successfully established safe-tunnel connection\");\n    }\n    async safeTunnelEncrypt(content) {\n        try {\n            console.log(\"Wait for AES finish creation\");\n            await this.waitForKey();\n            console.log(\"AES Creation is done\");\n            console.log(\"AES key:\", this.aesKey);\n            const iv = crypto.getRandomValues(new Uint8Array(12)); // 12-byte IV for GCM\n            const data = new TextEncoder().encode(content);\n            const ciphertext = await crypto.subtle.encrypt({ name: \"AES-GCM\", iv: iv }, this.aesKey, data);\n            const b64 = btoa(String.fromCharCode(...new Uint8Array(ciphertext)));\n            const b642 = btoa(String.fromCharCode(...new Uint8Array(iv)));\n            return {\n                iv: b642,\n                ct: b64,\n                k: this.aesKeyString,\n            };\n        }\n        catch (e) {\n            alert(\"Safe-tunnel encryption failed. Please refresh and try again.\");\n            throw new Error(`Safe-tunnel encryption failed: ${e}`);\n        }\n    }\n    async safeTunnelDecrypt(ct, iv) {\n        try {\n            const algorithm = {\n                name: \"AES-GCM\",\n                iv: base64toBytes(iv), // Initialization Vector\n            };\n            const decryptedData = await window.crypto.subtle.decrypt(algorithm, this.aesKey, base64toBytes(ct));\n            const decoder = new TextDecoder();\n            const plain = decoder.decode(decryptedData);\n            return JSON.parse(plain);\n        }\n        catch (e) {\n            alert(\"Safe-tunnel decryption failed. Please refresh and try again.\");\n            throw new Error(`Safe-tunnel decryption failed: ${e}`);\n        }\n    }\n}\n","import { p_stringToElement } from \"../utils\";\nimport { API_ENDPOINT } from \"../config\";\nconst BUTTON_ELEMENT_HTML = `\r\n<button id=\"themeShopBtn\">Shop</button>\r\n`;\nconst THEME_CARD_LISTING = `\r\n<div class=\"listing-card\">\r\n    <h3 class=\"theme-name\">Theme</h3>\r\n    <p class=\"theme-description\">This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look very pretty! This theme will make your Teams look\r\n        very pretty!</p>\r\n    <div class=\"actions\">\r\n        <button class=\"theme-install\" id=\"theme-install\">Install</button>\r\n        <button class=\"star\" id=\"star-btn\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"star-icon\">\r\n                <path d=\"M11.2691 4.41115C11.5006 3.89177 11.6164 3.63208 11.7776 3.55211C11.9176 3.48263 12.082 3.48263 12.222 3.55211C12.3832 3.63208 12.499 3.89177 12.7305 4.41115L14.5745 8.54808C14.643 8.70162 14.6772 8.77839 14.7302 8.83718C14.777 8.8892 14.8343 8.93081 14.8982 8.95929C14.9705 8.99149 15.0541 9.00031 15.2213 9.01795L19.7256 9.49336C20.2911 9.55304 20.5738 9.58288 20.6997 9.71147C20.809 9.82316 20.8598 9.97956 20.837 10.1342C20.8108 10.3122 20.5996 10.5025 20.1772 10.8832L16.8125 13.9154C16.6877 14.0279 16.6252 14.0842 16.5857 14.1527C16.5507 14.2134 16.5288 14.2807 16.5215 14.3503C16.5132 14.429 16.5306 14.5112 16.5655 14.6757L17.5053 19.1064C17.6233 19.6627 17.6823 19.9408 17.5989 20.1002C17.5264 20.2388 17.3934 20.3354 17.2393 20.3615C17.0619 20.3915 16.8156 20.2495 16.323 19.9654L12.3995 17.7024C12.2539 17.6184 12.1811 17.5765 12.1037 17.56C12.0352 17.5455 11.9644 17.5455 11.8959 17.56C11.8185 17.5765 11.7457 17.6184 11.6001 17.7024L7.67662 19.9654C7.18404 20.2495 6.93775 20.3915 6.76034 20.3615C6.60623 20.3354 6.47319 20.2388 6.40075 20.1002C6.31736 19.9408 6.37635 19.6627 6.49434 19.1064L7.4341 14.6757C7.46898 14.5112 7.48642 14.429 7.47814 14.3503C7.47081 14.2807 7.44894 14.2134 7.41394 14.1527C7.37439 14.0842 7.31195 14.0279 7.18708 13.9154L3.82246 10.8832C3.40005 10.5025 3.18884 10.3122 3.16258 10.1342C3.13978 9.97956 3.19059 9.82316 3.29993 9.71147C3.42581 9.58288 3.70856 9.55304 4.27406 9.49336L8.77835 9.01795C8.94553 9.00031 9.02911 8.99149 9.10139 8.95929C9.16534 8.93081 9.2226 8.8892 9.26946 8.83718C9.32241 8.77839 9.35663 8.70162 9.42508 8.54808L11.2691 4.41115Z\" stroke=\"#000000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                </svg>\r\n            <span>30k</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n`;\nconst THEME_SHOP = `\r\n<div class=\"main-container\">\r\n    <div class=\"top-navbar\">\r\n        <input type=\"text\" name=\"\" id=\"container-search\" class=\"container-search\" placeholder=\"Search\" autocomplete=\"off\">\r\n        <button class=\"container-search-submit\" id=\"search-submit\">Search</button>\r\n        <p class=\"container-n-points\" id=\"coins\">0 coins</p>\r\n        <button class=\"shop-close-button\" id=\"shopCloseButton\">\r\n            <img src=\"https://www.svgrepo.com/show/12848/x-symbol.svg\" alt=\"X\">\r\n        </button>\r\n    </div>\r\n    <div class=\"listings\">\r\n        <div class=\"listings-loader-parent\" id=\"listings-loader\">\r\n            <span class=\"listings-loader\"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n`;\nexport class ThemesShopHandler {\n    parser;\n    themeShopUI = null;\n    shopUiVisible = false;\n    authProvider;\n    currentSearchQuery;\n    themeProvider;\n    constructor(themeProvider, appsMenuManager, authProvider) {\n        this.parser = new DOMParser();\n        this.authProvider = authProvider;\n        this.currentSearchQuery = '';\n        this.themeProvider = themeProvider;\n        this.p_init(appsMenuManager);\n    }\n    async p_injectButton(appsMenuManager) {\n        // Get the thing element and inject a poor button in it\n        /*const element: HTMLDivElement = await waitForElement('[data-tid=\"titlebar-end-slot\"]') as HTMLDivElement;\n\n        console.log(\"Found button element\");\n\n        const buttonElement = p_stringToElement(BUTTON_ELEMENT_HTML);\n\n\n\n        element.appendChild(buttonElement);*/\n        /*const buttonElement = await injectTab(\"Browse themes\", `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" fill=\"var(--colorNeutralForeground3)\" height=\"24px\" width=\"24px\" version=\"1.1\" id=\"XMLID_269_\" viewBox=\"0 0 24 24\" xml:space=\"preserve\">\n<g id=\"shop-cart\">\n    <g>\n        <circle cx=\"9\" cy=\"21\" r=\"2\"/>\n    </g>\n    <g>\n        <circle cx=\"19\" cy=\"21\" r=\"2\"/>\n    </g>\n    <g>\n        <path d=\"M21,18H7.2l-4-16H0V0h4.8l0.8,3H24l-3.2,11H8.3l0.5,2H21V18z M7.8,12h11.5l2-7H6L7.8,12z\"/>\n    </g>\n</g>\n</svg>`);\n        if (buttonElement == null) return;\n        buttonElement.addEventListener(\"click\", () => {\n            if (this.shopUiVisible) {\n                this.shopUiVisible = false;\n\n                this.p_hideThemeShopUI();\n            } else {\n                this.shopUiVisible = true;\n\n                this.p_showThemeShopUI();\n            }\n        })\n        console.log(\"Injected button\");*/\n        const buttonElements = await appsMenuManager.addAppAndGetButton(\"Browse Themes\", \"https://www.svgrepo.com/show/148598/shop-cart.svg\", `\r\n            <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \r\n\t viewBox=\"0 0 44.16 44.16\" xml:space=\"preserve\">\r\n<g>\r\n\t<path style=\"fill:var(--colorNeutralForeground3);\" d=\"M44.16,6.6H11.592L10.66,1.179H2.408C1.076,1.179,0,2.257,0,3.588v2.408h6.602l4.248,24.709\r\n\t\tc0.094,0.544,0.617,0.985,1.17,0.985h28.527c1.332,0,2.41-1.077,2.41-2.411v-2.406H15.078l-0.587-3.414h22.042\r\n\t\tc2.66,0,5.172-2.128,5.611-4.75L44.16,6.6z\"/>\r\n\t<circle style=\"fill:var(--colorNeutralForeground3);\" cx=\"19.47\" cy=\"38.817\" r=\"4.165\"/>\r\n\t<path style=\"fill:var(--colorNeutralForeground3);\" d=\"M29.762,38.816c0,2.299,1.863,4.164,4.162,4.164c2.301,0,4.168-1.865,4.168-4.164\r\n\t\tc0-2.299-1.867-4.166-4.168-4.166C31.625,34.65,29.762,36.518,29.762,38.816z\"/>\r\n</g>\r\n</svg>\r\n            `);\n        //if (buttonElement == null) return;\n        buttonElements.forEach(buttonElement => {\n            buttonElement.addEventListener(\"click\", () => {\n                if (this.shopUiVisible) {\n                    this.shopUiVisible = false;\n                    this.p_hideThemeShopUI();\n                }\n                else {\n                    this.shopUiVisible = true;\n                    this.p_showThemeShopUI();\n                }\n            });\n        });\n        console.log(\"Injected button\");\n    }\n    loaderState(visibility) {\n        if (this.themeShopUI == null)\n            return;\n        const loader = this.themeShopUI.querySelector(\"#listings-loader\");\n        if (loader == null)\n            return;\n        if (visibility) {\n            loader.style.display = \"block\";\n            loader.animate([\n                { transform: 'translateY(-15px)', opacity: \"0\" },\n                { transform: 'translateY(0px)', opacity: \"1\" }\n            ], {\n                duration: 500,\n                easing: \"ease-out\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n        }\n        else {\n            loader.animate([\n                { transform: 'translateY(0px)', opacity: \"1\" },\n                { transform: 'translateY(-15px)', opacity: \"0\" }\n            ], {\n                duration: 500,\n                easing: \"ease-in\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n            setTimeout(() => {\n                loader.style.display = \"none\";\n            }, 500);\n        }\n    }\n    p_didIstarThis(name) {\n        return new Promise((resolve, reject) => {\n            if (this.authProvider.currentToken == null) {\n                reject(\"no token\");\n                return;\n            }\n            ;\n            fetch(`${API_ENDPOINT}/api/v1/themes/wait_did_i_star_this?name=${name}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.authProvider.currentToken}`\n                }\n            })\n                .then(response => {\n                console.log(response);\n                return response.json();\n            })\n                .then(data => {\n                if (data.success == null || data.success == false) {\n                    throw new Error(\"Success field not found or unsuccessfull\");\n                }\n                if (data.message == null) {\n                    throw new Error(\"No message field found\");\n                }\n                if (data.data == null) {\n                    throw new Error(\"No data field found\");\n                }\n                resolve(data.data);\n            })\n                .catch(error => {\n                console.error('Error:', error);\n                reject(error);\n            });\n        });\n    }\n    async star(name) {\n        fetch(`${API_ENDPOINT}/api/v1/themes/star`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: name,\n                token: await this.authProvider.getToken()\n            })\n        })\n            .then(response => {\n            console.log(response);\n            return response.json();\n        })\n            .then(data => {\n            if (data.success == null || data.success == false) {\n                throw new Error(\"Success field not found or unsuccessfull\");\n            }\n            if (data.message == null) {\n                throw new Error(\"No message field found\");\n            }\n            console.log(\"Liked!\");\n            this.p_refreshListings(this.currentSearchQuery);\n        })\n            .catch(error => {\n            console.error('Error:', error);\n        });\n    }\n    async changeIconStroke(name, starSvg) {\n        try {\n            const isStarred = await this.p_didIstarThis(name);\n            if (isStarred == true) {\n                starSvg.classList.add(\"starred\");\n                console.log(\"Starred\");\n            }\n            else {\n                console.log(\"Not starred\");\n            }\n        }\n        catch (e) {\n            console.error(\"Failed\", e);\n        }\n    }\n    p_createCard(name, desc, data, author, stars) {\n        const element = p_stringToElement(THEME_CARD_LISTING);\n        const themeNameEl = element.querySelector(\".theme-name\");\n        const themeDescEl = element.querySelector(\".theme-description\");\n        const starsEl = element.querySelector(\"span\");\n        const starBtn = element.querySelector(\"#star-btn\");\n        const themeInstallBtn = element.querySelector(\"#theme-install\");\n        if (themeNameEl == null || themeDescEl == null || starsEl == null || starBtn == null || themeInstallBtn == null)\n            return;\n        const starsSvg = starBtn.querySelector(\"svg\");\n        if (starsSvg == null)\n            return;\n        themeNameEl.textContent = name;\n        themeDescEl.textContent = desc;\n        starsEl.textContent = stars.toString();\n        this.changeIconStroke(name, starsSvg);\n        starBtn.addEventListener(\"click\", async () => {\n            console.log(\"The button got clicked!\");\n            const tok = await this.authProvider.getToken();\n            if (!tok) {\n                alert(\"You must be logged in to do this\");\n                return;\n            }\n            this.star(name);\n        });\n        themeInstallBtn.addEventListener(\"click\", async () => {\n            try {\n                await this.themeProvider.dataManager.loadThemes();\n                this.themeProvider.p_syncInstanceWithDataManager();\n                const parsed = this.themeProvider.p_isThemeValid(data);\n                if (parsed) {\n                    let counter = 1;\n                    const baseName = parsed.name;\n                    let newName = baseName;\n                    while (this.themeProvider.currentThemes[newName]) {\n                        newName = `${baseName} (${counter})`;\n                        counter++;\n                    }\n                    this.themeProvider.addTheme(newName, data);\n                    alert(\"Added theme\");\n                }\n                else {\n                    alert('Failed to parse theme');\n                }\n            }\n            catch (e) {\n                console.error(\"Failed to add theme: \", e);\n                alert(`Failed to add theme: ${e}`);\n            }\n        });\n        return element;\n    }\n    p_refreshListings(searchQuery) {\n        if (this.themeShopUI == null)\n            return;\n        const listingsElement = this.themeShopUI.querySelector(\".listings\");\n        if (listingsElement == null)\n            return;\n        listingsElement.innerHTML = '';\n        // Fetch\n        this.loaderState(true);\n        fetch(`${API_ENDPOINT}/api/v1/themes/get?search=${searchQuery}`)\n            .then(response => response.json())\n            .then((data) => {\n            console.log('Data:', data[\"data\"]);\n            for (const themeName in data[\"data\"]) {\n                const d = data[\"data\"][themeName];\n                const a = this.p_createCard(d.name, d.desc, d.data, d.author, d.stars);\n                if (a) {\n                    a.style.opacity = \"0\";\n                    a.style.transform = \"translateY(-15px)\";\n                    listingsElement.appendChild(a);\n                    // Do the anmimation\n                    a.animate([\n                        { transform: 'translateY(-15px)', opacity: \"0\" },\n                        { transform: 'translateY(0px)', opacity: \"1\" }\n                    ], {\n                        duration: 500,\n                        easing: \"ease-out\",\n                        iterations: 1,\n                        fill: \"forwards\"\n                    });\n                }\n            }\n            this.loaderState(false);\n        })\n            .catch(error => {\n            this.loaderState(false);\n            console.error('Error:', error);\n            alert(\"Error\");\n        });\n    }\n    async p_hideThemeShopUI() {\n        if (this.themeShopUI) {\n            // Animatoin\n            this.themeShopUI.animate([\n                { transform: 'translateY(-50%) translateX(-50%)', opacity: \"1\" },\n                { transform: 'translateY(-60%) translateX(-50%)', opacity: \"0\" }\n            ], {\n                duration: 500,\n                easing: \"ease-in\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n            setTimeout(() => {\n                if (this.themeShopUI == null)\n                    return;\n                this.themeShopUI.style.display = \"none\";\n            }, 500);\n        }\n    }\n    p_hideThemeShopUIInstant() {\n        if (this.themeShopUI == null)\n            return;\n        this.themeShopUI.style.display = \"none\";\n    }\n    async p_updateCoinCount() {\n        if (this.themeShopUI == null)\n            return;\n        const element = this.themeShopUI.querySelector(\"#coins\");\n        if (element == null)\n            return;\n        if (this.authProvider.currentToken == null) {\n            element.textContent = \"Logged out\";\n            return;\n        }\n        ;\n        const tok = this.authProvider.currentToken;\n        fetch(`${API_ENDPOINT}/api/v1/user/get_coins`, {\n            headers: {\n                \"Authorization\": `Bearer ${tok}`\n            }\n        })\n            .then(res => {\n            if (res.status != 200)\n                throw new Error(\"Failed to get coin count\");\n            return res.json();\n        })\n            .then(data => {\n            const coniCount = data.data;\n            element.textContent = `${coniCount} coins`;\n        })\n            .catch(err => {\n            console.error(err);\n            alert(\"Failed to fetch number of coins: \" + err);\n        });\n    }\n    async p_showThemeShopUI() {\n        if (this.themeShopUI) {\n            this.themeShopUI.style.display = \"flex\";\n            this.themeShopUI.style.opacity = \"0\";\n            // Animation\n            this.themeShopUI.animate([\n                { transform: 'translateY(-65%) translateX(-50%)', opacity: \"0\" },\n                { transform: 'translateY(-50%) translateX(-50%)', opacity: \"1\" }\n            ], {\n                duration: 500,\n                easing: \"ease-out\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n            this.p_refreshListings(this.currentSearchQuery);\n            this.p_updateCoinCount();\n        }\n    }\n    async p_injectUi() {\n        this.themeShopUI = p_stringToElement(THEME_SHOP);\n        document.body.appendChild(this.themeShopUI);\n        // Hide it\n        this.p_hideThemeShopUIInstant();\n    }\n    async p_searchBar() {\n        if (this.themeShopUI == null)\n            return;\n        const searchBar = this.themeShopUI.querySelector(\"#container-search\");\n        const submitBtn = this.themeShopUI.querySelector(\"#search-submit\");\n        if (searchBar == null || submitBtn == null)\n            return;\n        submitBtn.addEventListener(\"click\", () => {\n            this.currentSearchQuery = searchBar.value;\n            this.p_refreshListings(this.currentSearchQuery);\n        });\n        searchBar.addEventListener(\"input\", () => {\n            this.currentSearchQuery = searchBar.value;\n            this.p_refreshListings(this.currentSearchQuery);\n        });\n    }\n    p_closeButton() {\n        if (this.themeShopUI == null)\n            return;\n        const closeButton = this.themeShopUI.querySelector(\"#shopCloseButton\");\n        closeButton.addEventListener(\"click\", () => {\n            this.shopUiVisible = false;\n            this.p_hideThemeShopUI();\n        });\n    }\n    async p_init(appsMenuManager) {\n        this.p_injectButton(appsMenuManager);\n        this.p_injectUi();\n        this.p_searchBar();\n        this.p_closeButton();\n    }\n}\n","export const API_ENDPOINT = \"https://apiteamsplus.pythonanywhere.com\";\n//export const API_ENDPOINT = \"http://127.0.0.1:5000\";\nexport const CERT_KEY = 'b1cb85820e071d396b784b49767cb390938426f5f59b88d32736ee1fbf03a0a7';\n","/**\n * File: contribution/defaultThemes.ts\n * Contribute to creating default themes for the extension.\n *\n * Example of how to write a theme\n *\n * const aDefaultThemes: {[key: string]: string} = { // Varaiable declaration\n * ... more themes above ...\n * '<Your theme name>': `<Your theme data> (you can get it through theme export, just paste the data here)`,\n * }\n * This is probably very unclear. Just follow examples on the bottom.\n * Read the docs for more info.\n *\n */\n// VERY IMPORTANT! Please make sure to replace all your single backward slash ('\\') with double backward slashes ('\\\\'). If this is not done, your theme will not load properly!\nconst aDEFAULT_THEMES = {\n    // Themes go here:\n    'Default Teams Theme': `{\"data\":{\"varColors\":{},\"classColors\":{},\"fonts\":{\"fontFamily\":\"-apple-system, BlinkMacSystemFont, \\\\\"Segoe UI\\\\\", system-ui, \\\\\"Apple Color Emoji\\\\\", \\\\\"Segoe UI Emoji\\\\\", sans-serif\",\"imports\":\"\"},\"otherSettings\":{},\"twemojiSupport\":false},\"name\":\"Default Teams Theme\",\"data_version\":1}`,\n    'Cozy Dark Blue theme': `{\"data\":{\"varColors\":{\"--colorNeutralForeground1\":\"#FFFFFF\",\"--colorNeutralForeground2\":\"#FFFFFF\",\"--colorNeutralForeground3\":\"#777AC6\",\"--colorBrandForegroundLink\":\"#54D0FF\",\"--colorBrandForegroundLinkHover\":\"#FFFFFF\",\"--colorBrandForeground1\":\"#FFFFFF\",\"--colorBrandForeground2\":\"#FFFFFF\",\"--colorBrandForeground2Hover\":\"#FFFFFF\",\"--colorNeutralForegroundInverted\":\"#FFFFFF\",\"--colorNeutralBackground1\":\"#002457\",\"--colorNeutralBackground2\":\"#000000\",\"--colorNeutralBackground3\":\"#000E57\",\"--colorNeutralBackground4\":\"#000000\",\"--colorNeutralBackground5\":\"#001271\",\"--colorBrandBackground\":\"#000000\",\"--colorBrandBackgroundHover\":\"#828282\",\"--colorBrandBackground2\":\"#00527C\",\"--colorBrandBackgroundInverted\":\"#FFFFFF\",\"--colorNeutralCardBackground\":\"#202020\",\"--colorNeutralStrokeAccessibleSelected\":\"#FFFFFF\",\"--colorNeutralStroke1\":\"#00000000\",\"--colorNeutralStroke2\":\"#0756AE00\",\"--colorNeutralStroke3\":\"#002B7C00\",\"--colorNeutralStrokeSubtle\":\"#E0E0E000\",\"--colorNeutralStrokeOnBrand\":\"#FFFFFF00\",\"--colorNeutralStrokeOnBrand2\":\"#FFFFFF00\",\"--backgroundCanvas\":\"#002985\",\"--colorAvatar\":\"#FFFFFF\",\"--colorAvatarBackground\":\"#C9CFFF\",\"--colorDefaultBackground7\":\"#001D54\",\"--colorTeamsBrand1Hover\":\"#FFFFFF\"},\"classColors\":{\"ff\":\"#FFFFFF\",\"oh\":\"#FFFFFF\",\"jg\":\"#00000000\",\"ui-toolbar__item\":\"#FFFFFF\",\"oi\":\"#FFFFFF\",\"fui-StyledText\":\"#FFFFFF\"},\"fonts\":{\"fontFamily\":\"\\\\\"Inter\\\\\", courier\",\"imports\":\"@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');\"},\"otherSettings\":{\"--borderRadiusMedium\":\"20px\"},\"twemojiSupport\":true},\"name\":\"Cozy Dark Blue theme\",\"data_version\":1}`,\n};\n////// Do not change anything under this line  /////////\n////// unless you know what you are doing      /////////\nexport const DEFAULT_THEMES = aDEFAULT_THEMES; /*Module export*/\n","/*\nFile: descriptions.ts\n\nStores the description for each group name.\nNull = no description.\nDescription must be string.\n\nSurround description in quotes (\"Description here!\")\n\n\n*/\nconst dGROUP_DESCRIPTIONS = {\n    \"--colorNeutralForeground1\": null,\n    \"--colorNeutralForeground1Hover\": null,\n    \"--colorNeutralForeground1Pressed\": null,\n    \"--colorNeutralForeground1Selected\": null,\n    \"--colorNeutralForeground2\": \"Used for certain icons\",\n    \"--colorNeutralForeground2Hover\": null,\n    \"--colorNeutralForeground2Pressed\": null,\n    \"--colorNeutralForeground2Selected\": null,\n    \"--colorNeutralForeground2BrandHover\": null,\n    \"--colorNeutralForeground2BrandPressed\": null,\n    \"--colorNeutralForeground2BrandSelected\": null,\n    \"--colorNeutralForeground3\": \"Used for slightly greyed out text\",\n    \"--colorNeutralForeground3Hover\": null,\n    \"--colorNeutralForeground3Pressed\": null,\n    \"--colorNeutralForeground3Selected\": null,\n    \"--colorNeutralForeground3BrandHover\": null,\n    \"--colorNeutralForeground3BrandPressed\": null,\n    \"--colorNeutralForeground3BrandSelected\": null,\n    \"--colorNeutralForeground4\": null,\n    \"--colorNeutralForegroundDisabled\": null,\n    \"--colorNeutralForegroundInvertedDisabled\": null,\n    \"--colorBrandForegroundLink\": null,\n    \"--colorBrandForegroundLinkHover\": null,\n    \"--colorBrandForegroundLinkPressed\": null,\n    \"--colorBrandForegroundLinkSelected\": null,\n    \"--colorNeutralForeground2Link\": null,\n    \"--colorNeutralForeground2LinkHover\": null,\n    \"--colorNeutralForeground2LinkPressed\": null,\n    \"--colorNeutralForeground2LinkSelected\": null,\n    \"--colorCompoundBrandForeground1\": null,\n    \"--colorCompoundBrandForeground1Hover\": null,\n    \"--colorCompoundBrandForeground1Pressed\": null,\n    \"--colorBrandForeground1\": null,\n    \"--colorBrandForeground2\": null,\n    \"--colorBrandForeground2Hover\": null,\n    \"--colorBrandForeground2Pressed\": null,\n    \"--colorNeutralForeground1Static\": null,\n    \"--colorNeutralForegroundStaticInverted\": null,\n    \"--colorNeutralForegroundInverted\": null,\n    \"--colorNeutralForegroundInvertedHover\": null,\n    \"--colorNeutralForegroundInvertedPressed\": null,\n    \"--colorNeutralForegroundInvertedSelected\": null,\n    \"--colorNeutralForegroundInverted2\": null,\n    \"--colorNeutralForegroundOnBrand\": null,\n    \"--colorNeutralForegroundInvertedLink\": null,\n    \"--colorNeutralForegroundInvertedLinkHover\": null,\n    \"--colorNeutralForegroundInvertedLinkPressed\": null,\n    \"--colorNeutralForegroundInvertedLinkSelected\": null,\n    \"--colorBrandForegroundInverted\": null,\n    \"--colorBrandForegroundInvertedHover\": null,\n    \"--colorBrandForegroundInvertedPressed\": null,\n    \"--colorBrandForegroundOnLight\": null,\n    \"--colorBrandForegroundOnLightHover\": null,\n    \"--colorBrandForegroundOnLightPressed\": null,\n    \"--colorBrandForegroundOnLightSelected\": null,\n    \"--colorNeutralBackground1\": \"Used for background color in chat tab\",\n    \"--colorNeutralBackground1Hover\": null,\n    \"--colorNeutralBackground1Pressed\": null,\n    \"--colorNeutralBackground1Selected\": null,\n    \"--colorNeutralBackground2\": \"Backgroud color used for widgets, like search and reply.\",\n    \"--colorNeutralBackground2Hover\": null,\n    \"--colorNeutralBackground2Pressed\": null,\n    \"--colorNeutralBackground2Selected\": null,\n    \"--colorNeutralBackground3\": null,\n    \"--colorNeutralBackground3Hover\": null,\n    \"--colorNeutralBackground3Pressed\": null,\n    \"--colorNeutralBackground3Selected\": null,\n    \"--colorNeutralBackground4\": null,\n    \"--colorNeutralBackground4Hover\": null,\n    \"--colorNeutralBackground4Pressed\": null,\n    \"--colorNeutralBackground4Selected\": null,\n    \"--colorNeutralBackground5\": null,\n    \"--colorNeutralBackground5Hover\": null,\n    \"--colorNeutralBackground5Pressed\": null,\n    \"--colorNeutralBackground5Selected\": null,\n    \"--colorNeutralBackground6\": null,\n    \"--colorNeutralBackgroundInverted\": null,\n    \"--colorNeutralBackgroundStatic\": null,\n    \"--colorNeutralBackgroundAlpha\": null,\n    \"--colorNeutralBackgroundAlpha2\": null,\n    \"--colorSubtleBackgroundHover\": null,\n    \"--colorSubtleBackgroundPressed\": null,\n    \"--colorSubtleBackgroundSelected\": null,\n    \"--colorSubtleBackgroundLightAlphaHover\": null,\n    \"--colorSubtleBackgroundLightAlphaPressed\": null,\n    \"--colorSubtleBackgroundInvertedHover\": null,\n    \"--colorSubtleBackgroundInvertedPressed\": null,\n    \"--colorSubtleBackgroundInvertedSelected\": null,\n    \"--colorNeutralBackgroundDisabled\": null,\n    \"--colorNeutralBackgroundInvertedDisabled\": null,\n    \"--colorNeutralStencil1\": null,\n    \"--colorNeutralStencil2\": null,\n    \"--colorNeutralStencil1Alpha\": null,\n    \"--colorNeutralStencil2Alpha\": null,\n    \"--colorBackgroundOverlay\": null,\n    \"--colorScrollbarOverlay\": null,\n    \"--colorBrandBackground\": \"Used for buttons that use the brand color (brand color is purple by default)\",\n    \"--colorBrandBackgroundHover\": null,\n    \"--colorBrandBackgroundPressed\": null,\n    \"--colorBrandBackgroundSelected\": null,\n    \"--colorCompoundBrandBackground\": null,\n    \"--colorCompoundBrandBackgroundHover\": null,\n    \"--colorCompoundBrandBackgroundPressed\": null,\n    \"--colorBrandBackgroundStatic\": null,\n    \"--colorBrandBackground2\": null,\n    \"--colorBrandBackground2Hover\": null,\n    \"--colorBrandBackground2Pressed\": null,\n    \"--colorBrandBackground3Static\": null,\n    \"--colorBrandBackground4Static\": null,\n    \"--colorBrandBackgroundInverted\": null,\n    \"--colorBrandBackgroundInvertedHover\": null,\n    \"--colorBrandBackgroundInvertedPressed\": null,\n    \"--colorBrandBackgroundInvertedSelected\": null,\n    \"--colorNeutralCardBackground\": null,\n    \"--colorNeutralCardBackgroundHover\": null,\n    \"--colorNeutralCardBackgroundPressed\": null,\n    \"--colorNeutralCardBackgroundSelected\": null,\n    \"--colorNeutralCardBackgroundDisabled\": null,\n    \"--colorNeutralStrokeAccessible\": null,\n    \"--colorNeutralStrokeAccessibleHover\": null,\n    \"--colorNeutralStrokeAccessiblePressed\": null,\n    \"--colorNeutralStrokeAccessibleSelected\": null,\n    \"--colorNeutralStroke1\": null,\n    \"--colorNeutralStroke1Hover\": null,\n    \"--colorNeutralStroke1Pressed\": null,\n    \"--colorNeutralStroke1Selected\": null,\n    \"--colorNeutralStroke2\": null,\n    \"--colorNeutralStroke3\": null,\n    \"--colorNeutralStrokeSubtle\": null,\n    \"--colorNeutralStrokeOnBrand\": null,\n    \"--colorNeutralStrokeOnBrand2\": null,\n    \"--colorNeutralStrokeOnBrand2Hover\": null,\n    \"--colorNeutralStrokeOnBrand2Pressed\": null,\n    \"--colorNeutralStrokeOnBrand2Selected\": null,\n    \"--colorBrandStroke1\": null,\n    \"--colorBrandStroke2\": null,\n    \"--colorBrandStroke2Hover\": null,\n    \"--colorBrandStroke2Pressed\": null,\n    \"--colorBrandStroke2Contrast\": null,\n    \"--colorCompoundBrandStroke\": null,\n    \"--colorCompoundBrandStrokeHover\": null,\n    \"--colorCompoundBrandStrokePressed\": null,\n    \"--colorNeutralStrokeDisabled\": null,\n    \"--colorNeutralStrokeInvertedDisabled\": null,\n    \"--colorNeutralStrokeAlpha\": null,\n    \"--colorNeutralStrokeAlpha2\": null,\n    \"--colorStrokeFocus1\": null,\n    \"--colorStrokeFocus2\": null,\n    \"--colorNeutralShadowAmbient\": null,\n    \"--colorNeutralShadowKey\": null,\n    \"--colorNeutralShadowAmbientLighter\": null,\n    \"--colorNeutralShadowKeyLighter\": null,\n    \"--colorNeutralShadowAmbientDarker\": null,\n    \"--colorNeutralShadowKeyDarker\": null,\n    \"--colorBrandShadowAmbient\": null,\n    \"--colorBrandShadowKey\": null,\n    \"--colorPaletteRedBackground1\": null,\n    \"--colorPaletteRedBackground2\": null,\n    \"--colorPaletteRedBackground3\": null,\n    \"--colorPaletteRedForeground1\": null,\n    \"--colorPaletteRedForeground2\": null,\n    \"--colorPaletteRedForeground3\": null,\n    \"--colorPaletteRedBorderActive\": null,\n    \"--colorPaletteRedBorder1\": null,\n    \"--colorPaletteRedBorder2\": null,\n    \"--colorPaletteGreenBackground1\": null,\n    \"--colorPaletteGreenBackground2\": null,\n    \"--colorPaletteGreenBackground3\": null,\n    \"--colorPaletteGreenForeground1\": null,\n    \"--colorPaletteGreenForeground2\": null,\n    \"--colorPaletteGreenForeground3\": null,\n    \"--colorPaletteGreenBorderActive\": null,\n    \"--colorPaletteGreenBorder1\": null,\n    \"--colorPaletteGreenBorder2\": null,\n    \"--colorPaletteDarkOrangeBackground1\": null,\n    \"--colorPaletteDarkOrangeBackground2\": null,\n    \"--colorPaletteDarkOrangeBackground3\": null,\n    \"--colorPaletteDarkOrangeForeground1\": null,\n    \"--colorPaletteDarkOrangeForeground2\": null,\n    \"--colorPaletteDarkOrangeForeground3\": null,\n    \"--colorPaletteDarkOrangeBorderActive\": null,\n    \"--colorPaletteDarkOrangeBorder1\": null,\n    \"--colorPaletteDarkOrangeBorder2\": null,\n    \"--colorPaletteYellowBackground1\": null,\n    \"--colorPaletteYellowBackground2\": null,\n    \"--colorPaletteYellowBackground3\": null,\n    \"--colorPaletteYellowForeground1\": null,\n    \"--colorPaletteYellowForeground2\": null,\n    \"--colorPaletteYellowForeground3\": null,\n    \"--colorPaletteYellowBorderActive\": null,\n    \"--colorPaletteYellowBorder1\": null,\n    \"--colorPaletteYellowBorder2\": null,\n    \"--colorPaletteBerryBackground1\": null,\n    \"--colorPaletteBerryBackground2\": null,\n    \"--colorPaletteBerryBackground3\": null,\n    \"--colorPaletteBerryForeground1\": null,\n    \"--colorPaletteBerryForeground2\": null,\n    \"--colorPaletteBerryForeground3\": null,\n    \"--colorPaletteBerryBorderActive\": null,\n    \"--colorPaletteBerryBorder1\": null,\n    \"--colorPaletteBerryBorder2\": null,\n    \"--colorPaletteLightGreenBackground1\": null,\n    \"--colorPaletteLightGreenBackground2\": null,\n    \"--colorPaletteLightGreenBackground3\": null,\n    \"--colorPaletteLightGreenForeground1\": null,\n    \"--colorPaletteLightGreenForeground2\": null,\n    \"--colorPaletteLightGreenForeground3\": null,\n    \"--colorPaletteLightGreenBorderActive\": null,\n    \"--colorPaletteLightGreenBorder1\": null,\n    \"--colorPaletteLightGreenBorder2\": null,\n    \"--colorPaletteMarigoldBackground1\": null,\n    \"--colorPaletteMarigoldBackground2\": null,\n    \"--colorPaletteMarigoldBackground3\": null,\n    \"--colorPaletteMarigoldForeground1\": null,\n    \"--colorPaletteMarigoldForeground2\": null,\n    \"--colorPaletteMarigoldForeground3\": null,\n    \"--colorPaletteMarigoldBorderActive\": null,\n    \"--colorPaletteMarigoldBorder1\": null,\n    \"--colorPaletteMarigoldBorder2\": null,\n    \"--colorPaletteRedForegroundInverted\": null,\n    \"--colorPaletteGreenForegroundInverted\": null,\n    \"--colorPaletteYellowForegroundInverted\": null,\n    \"--colorPaletteDarkRedBackground2\": null,\n    \"--colorPaletteDarkRedForeground2\": null,\n    \"--colorPaletteDarkRedBorderActive\": null,\n    \"--colorPaletteCranberryBackground2\": null,\n    \"--colorPaletteCranberryForeground2\": null,\n    \"--colorPaletteCranberryBorderActive\": null,\n    \"--colorPalettePumpkinBackground2\": null,\n    \"--colorPalettePumpkinForeground2\": null,\n    \"--colorPalettePumpkinBorderActive\": null,\n    \"--colorPalettePeachBackground2\": null,\n    \"--colorPalettePeachForeground2\": null,\n    \"--colorPalettePeachBorderActive\": null,\n    \"--colorPaletteGoldBackground2\": null,\n    \"--colorPaletteGoldForeground2\": null,\n    \"--colorPaletteGoldBorderActive\": null,\n    \"--colorPaletteBrassBackground2\": null,\n    \"--colorPaletteBrassForeground2\": null,\n    \"--colorPaletteBrassBorderActive\": null,\n    \"--colorPaletteBrownBackground2\": null,\n    \"--colorPaletteBrownForeground2\": null,\n    \"--colorPaletteBrownBorderActive\": null,\n    \"--colorPaletteForestBackground2\": null,\n    \"--colorPaletteForestForeground2\": null,\n    \"--colorPaletteForestBorderActive\": null,\n    \"--colorPaletteSeafoamBackground2\": null,\n    \"--colorPaletteSeafoamForeground2\": null,\n    \"--colorPaletteSeafoamBorderActive\": null,\n    \"--colorPaletteDarkGreenBackground2\": null,\n    \"--colorPaletteDarkGreenForeground2\": null,\n    \"--colorPaletteDarkGreenBorderActive\": null,\n    \"--colorPaletteLightTealBackground2\": null,\n    \"--colorPaletteLightTealForeground2\": null,\n    \"--colorPaletteLightTealBorderActive\": null,\n    \"--colorPaletteTealBackground2\": null,\n    \"--colorPaletteTealForeground2\": null,\n    \"--colorPaletteTealBorderActive\": null,\n    \"--colorPaletteSteelBackground2\": null,\n    \"--colorPaletteSteelForeground2\": null,\n    \"--colorPaletteSteelBorderActive\": null,\n    \"--colorPaletteBlueBackground2\": null,\n    \"--colorPaletteBlueForeground2\": null,\n    \"--colorPaletteBlueBorderActive\": null,\n    \"--colorPaletteRoyalBlueBackground2\": null,\n    \"--colorPaletteRoyalBlueForeground2\": null,\n    \"--colorPaletteRoyalBlueBorderActive\": null,\n    \"--colorPaletteCornflowerBackground2\": null,\n    \"--colorPaletteCornflowerForeground2\": null,\n    \"--colorPaletteCornflowerBorderActive\": null,\n    \"--colorPaletteNavyBackground2\": null,\n    \"--colorPaletteNavyForeground2\": null,\n    \"--colorPaletteNavyBorderActive\": null,\n    \"--colorPaletteLavenderBackground2\": null,\n    \"--colorPaletteLavenderForeground2\": null,\n    \"--colorPaletteLavenderBorderActive\": null,\n    \"--colorPalettePurpleBackground2\": null,\n    \"--colorPalettePurpleForeground2\": null,\n    \"--colorPalettePurpleBorderActive\": null,\n    \"--colorPaletteGrapeBackground2\": null,\n    \"--colorPaletteGrapeForeground2\": null,\n    \"--colorPaletteGrapeBorderActive\": null,\n    \"--colorPaletteLilacBackground2\": null,\n    \"--colorPaletteLilacForeground2\": null,\n    \"--colorPaletteLilacBorderActive\": null,\n    \"--colorPalettePinkBackground2\": null,\n    \"--colorPalettePinkForeground2\": null,\n    \"--colorPalettePinkBorderActive\": null,\n    \"--colorPaletteMagentaBackground2\": null,\n    \"--colorPaletteMagentaForeground2\": null,\n    \"--colorPaletteMagentaBorderActive\": null,\n    \"--colorPalettePlumBackground2\": null,\n    \"--colorPalettePlumForeground2\": null,\n    \"--colorPalettePlumBorderActive\": null,\n    \"--colorPaletteBeigeBackground2\": null,\n    \"--colorPaletteBeigeForeground2\": null,\n    \"--colorPaletteBeigeBorderActive\": null,\n    \"--colorPaletteMinkBackground2\": null,\n    \"--colorPaletteMinkForeground2\": null,\n    \"--colorPaletteMinkBorderActive\": null,\n    \"--colorPalettePlatinumBackground2\": null,\n    \"--colorPalettePlatinumForeground2\": null,\n    \"--colorPalettePlatinumBorderActive\": null,\n    \"--colorPaletteAnchorBackground2\": null,\n    \"--colorPaletteAnchorForeground2\": null,\n    \"--colorPaletteAnchorBorderActive\": null,\n    \"--colorStatusSuccessBackground1\": null,\n    \"--colorStatusSuccessBackground2\": null,\n    \"--colorStatusSuccessBackground3\": null,\n    \"--colorStatusSuccessForeground1\": null,\n    \"--colorStatusSuccessForeground2\": null,\n    \"--colorStatusSuccessForeground3\": null,\n    \"--colorStatusSuccessForegroundInverted\": null,\n    \"--colorStatusSuccessBorderActive\": null,\n    \"--colorStatusSuccessBorder1\": null,\n    \"--colorStatusSuccessBorder2\": null,\n    \"--colorStatusWarningBackground1\": null,\n    \"--colorStatusWarningBackground2\": null,\n    \"--colorStatusWarningBackground3\": null,\n    \"--colorStatusWarningForeground1\": null,\n    \"--colorStatusWarningForeground2\": null,\n    \"--colorStatusWarningForeground3\": null,\n    \"--colorStatusWarningForegroundInverted\": null,\n    \"--colorStatusWarningBorderActive\": null,\n    \"--colorStatusWarningBorder1\": null,\n    \"--colorStatusWarningBorder2\": null,\n    \"--colorStatusDangerBackground1\": null,\n    \"--colorStatusDangerBackground2\": null,\n    \"--colorStatusDangerBackground3\": null,\n    \"--colorStatusDangerForeground1\": null,\n    \"--colorStatusDangerForeground2\": null,\n    \"--colorStatusDangerForeground3\": null,\n    \"--colorStatusDangerForegroundInverted\": null,\n    \"--colorStatusDangerBorderActive\": null,\n    \"--colorStatusDangerBorder1\": null,\n    \"--colorStatusDangerBorder2\": null,\n    \"--colorStatusDangerBackground3Hover\": null,\n    \"--colorStatusDangerBackground3Pressed\": null,\n    \"--backgroundCanvas\": \"Top ribbon band in the 'Chat' tab\",\n    \"--colorAvatar\": null,\n    \"--colorAvatarBackground\": null,\n    \"--colorDefaultBackground7\": \"Used for left panel in chat tab\",\n    \"--colorTeamsBrand1Hover\": null,\n    \"--colorTeamsBrand1Pressed\": null,\n    \"--colorTeamsBrand1Selected\": null,\n    \"--colorTeamsNeutralStrokeSubtleAlpha\": null,\n    \"--colorPaletteRedForeground1HCBlack\": null,\n    \"--colorPaletteRedBackground3Hover\": null,\n    \"--colorPaletteRedBackground3Pressed\": null,\n    \"--colorTeamsButtonCompositeHoverShadow1\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeHoverShadow2\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeHoverShadow3\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeHoverShadow4\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeFocusShadow1\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeFocusShadow2\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeFocusShadow3\": \"Shadow color when focused\",\n    \"--colorTeamsButtonCompositeFocusShadow4\": \"Shadow color when focused\",\n    \"--colorTeamsCompositeHoverShadow1\": \"Shadow color when hovered\",\n    \"--colorTeamsCompositeHoverShadow2\": \"Shadow color when hovered\",\n    \"--colorTeamsCompositeHoverShadow3\": \"Shadow color when hovered\",\n    \"--colorTeamsCompositeHoverShadow4\": \"Shadow color when hovered\",\n    \"--colorTeamsCompositeActiveShadow1\": null,\n    \"--colorTeamsCompositeActiveShadow2\": null,\n    \"--colorTeamsCompositeActiveShadow3\": null,\n    \"--colorTeamsCompositeActiveShadow4\": null\n};\nexport const aGROUP_DESCRIPTIONS = dGROUP_DESCRIPTIONS;\n","import { DEFAULT_PIXEL_VALUES, DEFAULT_COLORS, CLASS_COLORS, DEFAULT_FONTS, DEFAULT_BACKGROUNDS, DEFAULT_EMOJIS } from \"./shared\";\nimport { DEFAULT_THEMES } from \"./contribution/defaultThemes\";\nasync function p_basicDataLoad(key) {\n    const result = (await chrome.storage.local.get([key]))[key];\n    if (result == null) {\n        console.log(\"Nothing with basic key loaded: \", key);\n        return;\n    }\n    console.log(\"loaded key\");\n    return result;\n}\nasync function p_basicDataLoad2(key) {\n    const result = (await chrome.storage.local.get([key]))[key];\n    if (result == null) {\n        console.log(\"Nothing with basic key loaded: \", key);\n        return;\n    }\n    console.log(\"loaded key\");\n    return result;\n}\nfunction p_basicDataRepair(data, defaults) {\n    //console.log(data);\n    //console.log(defaults);\n    if (data == undefined) {\n        console.warn(\"Data is undefined. Returning defaults\");\n        return defaults;\n    }\n    if (data == null) {\n        console.warn(\"Data is undefined. Returning defaults\");\n        return defaults;\n    }\n    data = JSON.parse(JSON.stringify(data));\n    if (data == undefined) {\n        console.warn(\"Data is undefined. Returning defaults\");\n        return defaults;\n    }\n    if (data == null) {\n        console.warn(\"Data is undefined. Returning defaults\");\n        return defaults;\n    }\n    console.log(\"List: \", data);\n    console.log(\"Defaults: \", defaults);\n    const result = { ...defaults };\n    for (const property in defaults) {\n        if (data[property] !== undefined) {\n            result[property] = data[property];\n        }\n        else {\n            //console.log(`Property \"${property}\" missing/undefined, using default`, data[property], \" where property is: \", property, \" and data is: \", data);\n            console.log(\"Property \", property, \" is missing\");\n        }\n    }\n    return result;\n}\nexport const ThemeKeysList = [\"colors\", \"classColors\", \"fonts\", \"pixelValues\", \"backgrounds\", \"emojis\"];\nconst DEFAULT_DATA = {\n    colors: DEFAULT_COLORS,\n    classColors: CLASS_COLORS,\n    fonts: DEFAULT_FONTS,\n    pixelValues: DEFAULT_PIXEL_VALUES,\n    backgrounds: DEFAULT_BACKGROUNDS,\n    emojis: DEFAULT_EMOJIS\n};\nexport class DataManager {\n    currentData = DEFAULT_DATA;\n    currentThemes = DEFAULT_THEMES;\n    constructor() {\n        console.log(\"Created new DataManager instance\");\n    }\n    async loadAll() {\n        await this.loadData();\n        await this.loadThemes();\n    }\n    async loadData() {\n        const data = await p_basicDataLoad(\"themeData\");\n        if (data == null) {\n            console.warn(\"No data found, returning default data\");\n            return DEFAULT_DATA;\n        }\n        console.log(data);\n        const repairedData = {\n            colors: p_basicDataRepair(data[\"colors\"], DEFAULT_COLORS),\n            classColors: p_basicDataRepair(data[\"classColors\"], CLASS_COLORS),\n            fonts: p_basicDataRepair(data[\"fonts\"], DEFAULT_FONTS),\n            pixelValues: p_basicDataRepair(data[\"pixelValues\"], DEFAULT_PIXEL_VALUES),\n            backgrounds: p_basicDataRepair(data[\"backgrounds\"], DEFAULT_BACKGROUNDS),\n            emojis: p_basicDataRepair(data[\"emojis\"], DEFAULT_EMOJIS)\n        };\n        this.currentData = repairedData;\n        console.log(\"Loaded: \", repairedData);\n        return repairedData;\n    }\n    async loadThemes() {\n        const data = await p_basicDataLoad2(\"themes\");\n        if (data != null) {\n            console.log(\"themes loaded: \", data);\n            this.currentThemes = data;\n            this.saveThemes();\n            return data;\n        }\n        console.error(\"No themes loaded: \", data);\n        return;\n    }\n    exportThemeData() {\n        let newList = {};\n        for (const propertyName of Object.keys(this.currentData)) {\n            const propertyNameTyped = propertyName;\n            const dataCurrent = this.currentData[propertyNameTyped];\n            const dataDefault = DEFAULT_DATA[propertyNameTyped];\n            newList[propertyName] = this.u_onlyExportChanged(dataCurrent, dataDefault);\n        }\n        return newList;\n    }\n    u_onlyExportChanged(currentData, defaultData) {\n        let outputData = {};\n        let numberChanged = 0;\n        console.log(\"Data: \", defaultData);\n        console.log(\"Current data: \", currentData);\n        for (const property in defaultData) {\n            const dataCurrent = currentData[property];\n            const dataDefault = defaultData[property];\n            if (dataCurrent != dataDefault) {\n                outputData[property] = dataCurrent;\n                numberChanged++;\n            }\n        }\n        console.log(\"Exporting \", numberChanged, \" attributes\");\n        return outputData;\n    }\n    saveThemes() {\n        console.log(\"Save themes: \", this.currentThemes);\n        chrome.storage.local.set({ \"themes\": this.currentThemes });\n    }\n    saveData() {\n        console.log(\"Save: \", this.currentData);\n        chrome.storage.local.set({ \"themeData\": this.currentData });\n    }\n    saveAll() {\n        this.saveData();\n    }\n}\n","import confetti from 'canvas-confetti';\nimport { p_stringToElement } from \"../utils\";\nimport { Audio } from \"./soundEngine\";\nimport { API_ENDPOINT } from '../config';\nconst BUTTON_ELEMENT_HTML = `\r\n<button id=\"gambleGameButton\">Game</button>\r\n`;\nconst GAMBLING_GAME_HTML = `\r\n        <div class=\"window\">\r\n        <img class=\"window-background\" src=\"assets/gamble_bg_normal.png\">\r\n        <div class=\"counters\">\r\n            <div class=\"counter-container\" id=\"counter0\">\r\n                <div id=\"counter\" class=\"counter\" data-counter-id=\"0\">\r\n                    <img src=\"assets/digit0.png\" alt=\"0\" class=\"digit\" data-number=\"0\">\r\n                    <img src=\"assets/digit1.png\" alt=\"1\" class=\"digit\" data-number=\"1\">\r\n                    <img src=\"assets/digit2.png\" alt=\"2\" class=\"digit\" data-number=\"2\">\r\n                    <img src=\"assets/digit3.png\" alt=\"3\" class=\"digit\" data-number=\"3\">\r\n                    <img src=\"assets/digit4.png\" alt=\"4\" class=\"digit\" data-number=\"4\">\r\n                    <img src=\"assets/digit5.png\" alt=\"5\" class=\"digit\" data-number=\"5\">\r\n                    <img src=\"assets/digit6.png\" alt=\"6\" class=\"digit\" data-number=\"6\">\r\n                    <img src=\"assets/digit7.png\" alt=\"7\" class=\"digit\" data-number=\"7\">\r\n                    <img src=\"assets/digit8.png\" alt=\"8\" class=\"digit\" data-number=\"8\">\r\n                    <img src=\"assets/digit9.png\" alt=\"9\" class=\"digit\" data-number=\"9\">\r\n                </div>\r\n            </div>\r\n            <div class=\"counter-container \"  id=\"counter1\">\r\n                <div id=\"counter \" class=\"counter \" data-counter-id=\"1\">\r\n                    <img src=\"assets/digit0.png\" alt=\"0\" class=\"digit\" data-number=\"0\">\r\n                    <img src=\"assets/digit1.png\" alt=\"1\" class=\"digit\" data-number=\"1\">\r\n                    <img src=\"assets/digit2.png\" alt=\"2\" class=\"digit\" data-number=\"2\">\r\n                    <img src=\"assets/digit3.png\" alt=\"3\" class=\"digit\" data-number=\"3\">\r\n                    <img src=\"assets/digit4.png\" alt=\"4\" class=\"digit\" data-number=\"4\">\r\n                    <img src=\"assets/digit5.png\" alt=\"5\" class=\"digit\" data-number=\"5\">\r\n                    <img src=\"assets/digit6.png\" alt=\"6\" class=\"digit\" data-number=\"6\">\r\n                    <img src=\"assets/digit7.png\" alt=\"7\" class=\"digit\" data-number=\"7\">\r\n                    <img src=\"assets/digit8.png\" alt=\"8\" class=\"digit\" data-number=\"8\">\r\n                    <img src=\"assets/digit9.png\" alt=\"9\" class=\"digit\" data-number=\"9\">\r\n                </div>\r\n            </div>\r\n            <div class=\"counter-container \"  id=\"counter2\">\r\n                <div id=\"counter \" class=\"counter \" data-counter-id=\"2\">\r\n                    <img src=\"assets/digit0.png\" alt=\"0\" class=\"digit\" data-number=\"0\">\r\n                    <img src=\"assets/digit1.png\" alt=\"1\" class=\"digit\" data-number=\"1\">\r\n                    <img src=\"assets/digit2.png\" alt=\"2\" class=\"digit\" data-number=\"2\">\r\n                    <img src=\"assets/digit3.png\" alt=\"3\" class=\"digit\" data-number=\"3\">\r\n                    <img src=\"assets/digit4.png\" alt=\"4\" class=\"digit\" data-number=\"4\">\r\n                    <img src=\"assets/digit5.png\" alt=\"5\" class=\"digit\" data-number=\"5\">\r\n                    <img src=\"assets/digit6.png\" alt=\"6\" class=\"digit\" data-number=\"6\">\r\n                    <img src=\"assets/digit7.png\" alt=\"7\" class=\"digit\" data-number=\"7\">\r\n                    <img src=\"assets/digit8.png\" alt=\"8\" class=\"digit\" data-number=\"8\">\r\n                    <img src=\"assets/digit9.png\" alt=\"9\" class=\"digit\" data-number=\"9\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button id=\"roll\">Roll</button>\r\n        <button id=\"gambling_login\">Login</button>\r\n        <img src=\"assets/gamble_handle.png\" alt=\"\" class=\"handle-img\">\r\n\r\n    </div>\r\n`;\nconst GAMBLING_CLAIM_REWARD_HTML = `\r\n    <div class=\"gamblingReward\">\r\n        <h3>You got money</h3>\r\n        <p>Click below to get your $$$</p>\r\n        <button type=\"button\" class=\"gamblingClaimReward\">Claim reward</button>\r\n    </div>\r\n`;\nconst DIGITS = [\n    \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"\n];\nconst DigitToPicture = {\n    0: \"assets/digit0.png\",\n    1: \"assets/digit1.png\",\n    2: \"assets/digit2.png\",\n    3: \"assets/digit3.png\",\n    4: \"assets/digit4.png\",\n    5: \"assets/digit5.png\",\n    6: \"assets/digit6.png\",\n    7: \"assets/digit7.png\",\n    8: \"assets/digit8.png\",\n    9: \"assets/digit9.png\",\n};\nconst BgPicture = \"assets/digitBg.png\";\nexport class GamblingGame {\n    windowElement;\n    currentDigits;\n    audio = new Audio(new AudioContext());\n    placeAudio = new Audio(new AudioContext());\n    loseAudio = new Audio(new AudioContext());\n    winAudio = new Audio(new AudioContext());\n    rolling = false;\n    windowVisible = false;\n    authProvider;\n    noRewardPopupShown = false;\n    constructor(authProvider) {\n        // Initialize the variables\n        this.currentDigits = {};\n        this.authProvider = authProvider;\n        // Create the fucking window\n        this.windowElement = p_stringToElement(GAMBLING_GAME_HTML);\n        // Put the fucking window in the fucking body\n        document.body.appendChild(this.windowElement);\n        // Hide it\n        this.windowVisiblity(this.windowVisible);\n        this.p_fixImages();\n        this.onLoad();\n        this.p_injectButton();\n        this.loginButtonRegister();\n    }\n    async p_fixImages() {\n        for (let i = 0; i < 10; i++) {\n            const selector = `[data-number=\"${i}\"]`;\n            const elements = this.windowElement.querySelectorAll(selector);\n            for (const element of elements) {\n                if (element instanceof HTMLImageElement) {\n                    const url = chrome.runtime.getURL(DigitToPicture[i]);\n                    console.log(`Fix url: ${url}`);\n                    element.src = url;\n                }\n            }\n        }\n        //Backgrounds\n        const backgrounds = this.windowElement.querySelectorAll(\".counter\");\n        for (const element of backgrounds) {\n            const url = chrome.runtime.getURL(BgPicture);\n            console.log(\"Fix background on: \", element);\n            element.style.backgroundImage = `url(${url})`;\n        }\n        // Window background\n        const img = this.windowElement.querySelector(\".window-background\");\n        const counters = this.windowElement.querySelector(\".counters\");\n        img.src = chrome.runtime.getURL(\"assets/gamble_bg_normal.png\");\n        const img2 = this.windowElement.querySelector(\".handle-img\");\n        img2.src = chrome.runtime.getURL(\"assets/gamble_handle.png\");\n    }\n    async p_injectButton() {\n        // Get the thing element and inject a poor button in it\n        /*const buttonElement = await injectTab(\"Game\", `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Icons\" viewBox=\"0 0 32 32\" xml:space=\"preserve\" width=\"24px\" height=\"24px\" fill=\"var(--colorNeutralForeground3)\">\n<style type=\"text/css\">\n    .st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n</style>\n<g>\n    <path d=\"M6,13H4c-0.6,0-1,0.4-1,1c0,0.5,0.4,0.9,0.8,1C3.3,15.9,3,16.9,3,18c0,0.6,0.4,1,1,1s1-0.4,1-1c0-1,0.4-2,1.1-2.7l0.6-0.6   C7,14.4,7.1,14,6.9,13.6C6.8,13.2,6.4,13,6,13z\"/>\n    <path d=\"M14,13h-2c-0.6,0-1,0.4-1,1c0,0.5,0.4,0.9,0.8,1c-0.5,0.9-0.8,1.9-0.8,3c0,0.6,0.4,1,1,1s1-0.4,1-1c0-1,0.4-2,1.1-2.7   l0.6-0.6c0.3-0.3,0.4-0.7,0.2-1.1C14.8,13.2,14.4,13,14,13z\"/>\n    <path d=\"M20,19c0.6,0,1-0.4,1-1c0-1,0.4-2,1.1-2.7l0.6-0.6c0.3-0.3,0.4-0.7,0.2-1.1C22.8,13.2,22.4,13,22,13h-2c-0.6,0-1,0.4-1,1   c0,0.5,0.4,0.9,0.8,1c-0.5,0.9-0.8,1.9-0.8,3C19,18.6,19.4,19,20,19z\"/>\n    <path d=\"M29,2c-1.7,0-3,1.3-3,3c0,1.3,0.8,2.4,2,2.8V18h-2v-7V9c0-3.9-3.1-7-7-7H7C3.1,2,0,5.1,0,9v2v10v8c0,0.6,0.4,1,1,1h24   c0.6,0,1-0.4,1-1v-8v-1h3c0.6,0,1-0.4,1-1V7.8c1.2-0.4,2-1.5,2-2.8C32,3.3,30.7,2,29,2z M10,12h6v8h-6V12z M2,12h6v8H2V12z M17,26   H9c-0.6,0-1-0.4-1-1s0.4-1,1-1h8c0.6,0,1,0.4,1,1S17.6,26,17,26z M24,20h-6v-8h6V20z\"/>\n</g>\n</svg>`);*/\n        const buttonElements = await window.teamsPlusAppsManager.addAppAndGetButton(\"Fun Minigame\", \"https://www.svgrepo.com/show/402695/slot-machine.svg\");\n        buttonElements.forEach((buttonElement) => {\n            buttonElement.addEventListener(\"click\", () => {\n                if (this.windowVisible == true) {\n                    this.windowVisible = false;\n                    this.windowVisiblity(false);\n                }\n                else if (this.windowVisible == false) {\n                    this.windowVisible = true;\n                    this.windowVisiblity(true);\n                }\n            });\n        });\n        console.log(\"Injected button\");\n    }\n    loginButtonRegister() {\n        const button = this.windowElement.querySelector(\"#gambling_login\");\n        if (button) {\n            if (this.authProvider.currentToken != null) {\n                button.remove();\n                return;\n            }\n            ;\n            button.addEventListener(\"click\", async () => {\n                if (this.authProvider.currentToken != null) {\n                    button.remove();\n                    return;\n                }\n                await this.authProvider.getToken();\n                button.remove();\n            });\n        }\n    }\n    loginButtonUpdate() {\n        const button = this.windowElement.querySelector(\"#gambling_login\");\n        if (button) {\n            if (this.authProvider.currentToken != null) {\n                button.remove();\n                return;\n            }\n        }\n    }\n    windowVisiblity(state) {\n        if (state == true) {\n            this.windowElement.style.display = \"block\";\n            this.windowElement.style.opacity = \"0\";\n            this.loginButtonUpdate();\n            this.windowElement.animate([\n                { opacity: \"0\", filter: \"blur(10px)\" },\n                { opacity: \"1\", filter: \"blur(0px)\" }\n            ], {\n                duration: 1000,\n                easing: \"ease-out\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n        }\n        else if (state == false) {\n            this.windowElement.animate([\n                { opacity: \"1\", filter: \"blur(0px)\" },\n                { opacity: \"0\", filter: \"blur(10px)\" }\n            ], {\n                duration: 1000,\n                easing: \"ease-in\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n            setTimeout(() => {\n                this.windowElement.style.display = \"none\";\n            }, 1000);\n        }\n        else {\n            throw new Error(`Unknown window visibility state: ${state}`);\n        }\n    }\n    hideDigits(counterElement) {\n        for (const i of DIGITS) {\n            const numberElement = counterElement.querySelector(`[data-number=\"${i}\"]`);\n            if (numberElement) {\n                numberElement.style.display = \"none\";\n            }\n            else {\n                console.error(\"Number \", i, \"not found\");\n            }\n        }\n    }\n    countUp(counterElement, digitId, DIGIT_ANIMATION_TIME, state) {\n        return new Promise((resolve) => {\n            this.currentDigits[digitId] += 1;\n            if (this.currentDigits[digitId] > DIGITS.length - 1) {\n                this.currentDigits[digitId] = 0;\n            }\n            let lastDigit = this.currentDigits[digitId] - 1;\n            if (this.currentDigits[digitId] === 0) {\n                lastDigit = DIGITS.length - 1;\n            }\n            this.hideDigits(counterElement);\n            const lastElement = counterElement.querySelector(`[data-number=\"${DIGITS[lastDigit]}\"]`);\n            const currentElement = counterElement.querySelector(`[data-number=\"${DIGITS[this.currentDigits[digitId]]}\"]`);\n            if (!currentElement || !lastElement) {\n                console.error(\"Elements not found: \", DIGITS[lastDigit], DIGITS[this.currentDigits[digitId]]);\n                console.error(lastDigit, this.currentDigits[digitId]);\n                resolve();\n                return;\n            }\n            currentElement.style.zIndex = \"1\";\n            lastElement.style.zIndex = \"0\";\n            currentElement.style.display = \"flex\";\n            lastElement.style.display = \"flex\";\n            let easingStyle = 'linear';\n            if (state == 0) {\n                console.log(\"Set ease in\");\n                easingStyle = 'ease-in';\n            }\n            else if (state == 1) {\n                console.log(\"Set ease out\");\n                easingStyle = 'ease-out';\n            }\n            console.log(\"Easing style: \", easingStyle);\n            const currentAnimation = currentElement.animate([\n                { transform: 'translateY(100%)' },\n                { transform: 'translateY(-50%)' }\n            ], {\n                duration: DIGIT_ANIMATION_TIME,\n                fill: 'forwards',\n                easing: easingStyle\n            });\n            const lastAnimation = lastElement.animate([\n                { transform: 'translateY(-50%)' },\n                { transform: 'translateY(-150%)' }\n            ], {\n                duration: DIGIT_ANIMATION_TIME,\n                fill: 'forwards',\n                easing: easingStyle\n            });\n            this.audio.playSound(.1);\n            Promise.all([currentAnimation.finished, lastAnimation.finished]).then(() => {\n                lastElement.style.display = \"none\";\n                resolve();\n            });\n        });\n    }\n    sharpEase(t) {\n        return Math.sin(t * Math.PI) ** 0.2;\n    }\n    waitTimeCalc(i, x) {\n        return Math.max((1 - this.sharpEase(x / i)), 0.06);\n    }\n    async countBy(i, digitId, counterElement) {\n        let digitAnimTime = 2000;\n        for (let x = 0; x < i; x++) {\n            let ease;\n            if (x == 0) {\n                console.log(\"Ease in\");\n                ease = 0;\n            }\n            if (x == i - 1) {\n                console.log(\"Ease out\");\n                ease = 1;\n            }\n            const animationTime = this.waitTimeCalc(i, x) * digitAnimTime;\n            console.log(\"Animation time: \", animationTime);\n            await this.countUp(counterElement, digitId, animationTime, ease);\n        }\n        this.placeAudio.playSound(0.5);\n    }\n    getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min) + min);\n    }\n    confettiFireworks() {\n        var duration = 15 * 1000;\n        var animationEnd = Date.now() + duration;\n        var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };\n        function randomInRange(min, max) {\n            return Math.random() * (max - min) + min;\n        }\n        var interval = setInterval(function () {\n            var timeLeft = animationEnd - Date.now();\n            if (timeLeft <= 0) {\n                return clearInterval(interval);\n            }\n            var particleCount = 50 * (timeLeft / duration);\n            // since particles fall down, start a bit higher than random\n            confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });\n            confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });\n        }, 250);\n    }\n    confettiSides() {\n        var end = Date.now() + (15 * 1000);\n        // go Buckeyes!\n        var colors = ['#bb0000', '#ffffff'];\n        (function frame() {\n            confetti({\n                particleCount: 2,\n                angle: 60,\n                spread: 55,\n                origin: { x: 0 },\n                colors: colors\n            });\n            confetti({\n                particleCount: 2,\n                angle: 120,\n                spread: 55,\n                origin: { x: 1 },\n                colors: colors\n            });\n            if (Date.now() < end) {\n                requestAnimationFrame(frame);\n            }\n        }());\n    }\n    shuffleArray(arr) {\n        let shuffledArray = arr.slice(); // Create a copy of the array to avoid mutating the original\n        for (let i = shuffledArray.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [shuffledArray[i], shuffledArray[j]] = [shuffledArray[j], shuffledArray[i]]; // Swap elements\n        }\n        return shuffledArray;\n    }\n    generateRandomOrder(x) {\n        const numbers = Array.from({ length: x + 1 }, (_, index) => index); // Create array [0, 1, ..., x]\n        return this.shuffleArray(numbers);\n    }\n    randomizeFunction() {\n        const shouldTryTrickChance = 50;\n        const trickChance = 70;\n        const numDigits = 3;\n        const spinOrder = this.generateRandomOrder(numDigits - 1);\n        console.log(spinOrder);\n        if (this.getRandomInt(1, 100) <= shouldTryTrickChance) {\n            if (this.getRandomInt(1, 100) <= trickChance) {\n                console.log(\"Trick\");\n                let returnValue = [];\n                const target = this.getRandomInt(1, DIGITS.length);\n                for (const i of spinOrder) {\n                    const currentDigit = this.currentDigits[i] + 1;\n                    const amountToAdd = DIGITS.length - (currentDigit - target);\n                    if (Number.isNaN(amountToAdd)) {\n                        console.error(this.currentDigits);\n                        throw new Error(`Amount to add is NaN: \r\n                        i: ${i},\r\n                        currentDigit: ${currentDigit},\r\n                        target: ${target}\r\n                            `);\n                    }\n                    console.log(\"Amount to add: \", amountToAdd);\n                    console.log(\"For: \", i);\n                    if (i == numDigits - 1) {\n                        const b = this.getRandomInt(1, 3);\n                        if (b == 1) {\n                            returnValue.push(amountToAdd + 1);\n                        }\n                        else if (b == 2) {\n                            returnValue.push(amountToAdd + -1);\n                        }\n                        else {\n                            console.error(\"Randomizer chose: \", b);\n                            returnValue.push(amountToAdd + -1);\n                        }\n                    }\n                    else {\n                        returnValue.push(amountToAdd);\n                    }\n                }\n                return {\n                    values: returnValue,\n                    order: spinOrder\n                };\n                //return returnValue;\n            }\n            else {\n                console.log(\"All three should be the same\");\n                let returnValue = [];\n                const target = this.getRandomInt(1, DIGITS.length);\n                for (const i of spinOrder) {\n                    const currentDigit = this.currentDigits[i] + 1;\n                    const amountToAdd = DIGITS.length - (currentDigit - target);\n                    console.log(\"Amount to add: \", amountToAdd);\n                    returnValue.push(amountToAdd);\n                }\n                return {\n                    values: returnValue,\n                    order: spinOrder\n                };\n            }\n        }\n        else {\n            let returnValue = [];\n            for (let i = 0; i < numDigits; i++) {\n                returnValue.push(this.getRandomInt(1, DIGITS.length));\n            }\n            return {\n                values: returnValue,\n                order: spinOrder\n            };\n        }\n    }\n    async countTo(digits, isTricked) {\n        const tasks = [];\n        const a = 70;\n        const trickedK = isTricked ? 10 : 1;\n        for (let i = 0; i < digits.length; i++) {\n            let digitDelay = digits[i][1] * 2 * trickedK;\n            if (digits[i][1] == 2) {\n                digitDelay = digits[i][1] * 4 * trickedK;\n            }\n            const offset = (digits[i][0] - (this.currentDigits[i] + (digitDelay + a))) % 10;\n            const shuffleAmount = (digitDelay + a) + offset;\n            const task = this.countBy(shuffleAmount, i, this.windowElement.querySelector(`[data-counter-id=\"${i}\"]`));\n            tasks.push(task);\n            await new Promise(resolve => setTimeout(resolve, 1000));\n        }\n        await Promise.all(tasks);\n    }\n    async shuffle() {\n        if (this.rolling == true)\n            return;\n        this.rolling = true;\n        // Get the API request\n        let token = this.authProvider.currentToken;\n        if (token == null && this.noRewardPopupShown == false) {\n            alert(\"Note: You will not receive any reward from winning when you are not logged in. This message will not show again in this session.\");\n            this.noRewardPopupShown = true;\n        }\n        const img = this.windowElement.querySelector(\".window-background\");\n        img.src = chrome.runtime.getURL(\"assets/gamble_bg_normal.png\");\n        const headers = {};\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n        const response = await fetch(`${API_ENDPOINT}/api/v1/fun_minigame/game_next`, {\n            method: 'GET',\n            headers: headers,\n        }).then(res => {\n            if (res.status != 200)\n                throw new Error(\"Response not successfull\");\n            return res.json();\n        });\n        const responseData = response.data;\n        if (!responseData)\n            throw new Error(\"Bad response\");\n        const digits = responseData.digits;\n        const winToken = responseData.winToken;\n        const isTricked = responseData.isTricked;\n        if (!digits || isTricked == null || winToken == null)\n            throw new Error(\"Bad response\");\n        await this.countTo(digits, isTricked);\n        console.log(\"All digits finished counting.\");\n        if (!(digits[0][0] == digits[1][0] && digits[1][0] == digits[2][0])) {\n            this.loseAudio.playSound(.2);\n            console.log(\"LOSE\");\n            //confetti();\n            //confettiSides();\n            //confettiFireworks();\n        }\n        else {\n            console.log(\"WIN!\");\n            const img = this.windowElement.querySelector(\".window-background\");\n            img.src = chrome.runtime.getURL(\"assets/gamble_bg_win.png\");\n            this.winAudio.playSound(1);\n            confetti();\n            this.confettiSides();\n            this.confettiFireworks();\n            // Create claim reward window\n            if (winToken != \"\") {\n                const element = p_stringToElement(GAMBLING_CLAIM_REWARD_HTML);\n                document.body.appendChild(element);\n                const claimRewardButton = element.querySelector(\"button\");\n                if (claimRewardButton) {\n                    claimRewardButton.addEventListener(\"click\", async () => {\n                        fetch(`${API_ENDPOINT}/api/v1/fun_minigame/redeem_token`, {\n                            method: 'POST',\n                            body: JSON.stringify({\n                                rewardToken: winToken\n                            }),\n                            headers: {\n                                \"Content-Type\": \"application/json\",\n                                \"Authorization\": `Bearer ${token}`\n                            }\n                        })\n                            .then(res => {\n                            if (res.status != 200)\n                                throw new Error(\"Failed to redeem token\");\n                            alert(`Successfully redeemed token!`);\n                        }).catch(err => {\n                            alert(`Failed to redeem token: ${err}`);\n                        }).finally(() => {\n                            element.remove();\n                        });\n                    });\n                }\n            }\n        }\n        this.rolling = false;\n    }\n    init() {\n        this.audio.loadSound(\"sounds/gamble/beep.wav\");\n        this.placeAudio.loadSound(\"sounds/gamble/boom.mp3\");\n        this.loseAudio.loadSound(\"sounds/gamble/lost.mp3\");\n        this.winAudio.loadSound(\"sounds/gamble/win.mp3\");\n        const numDigits = 3;\n        for (let i = 0; i < numDigits; i++) {\n            this.currentDigits[i] = 0;\n        }\n    }\n    async onLoad() {\n        this.init();\n        const btn = this.windowElement.querySelector(\"#roll\");\n        if (btn) {\n            btn.addEventListener(\"click\", async () => {\n                try {\n                    await this.shuffle();\n                }\n                catch (e) {\n                    console.error(e);\n                    alert(`An error occured while trying to connect to the server: ${e}`);\n                }\n            });\n        }\n        else {\n            throw new Error(\"Roll button is null\");\n        }\n    }\n}\n","import { p_stringToElement } from \"../utils\";\nimport { Game } from \"./snake/game\";\nconst SNAKE_GAME_HTML = `\r\n    <div class=\"snake\">\r\n        <button type=\"button\">Close</button>\r\n        <div class=\"containement\">\r\n        <canvas id=\"game\"></canvas>\r\n    <div class=\"information\" id=\"info\">\r\n        <h1>TeamsPlus <s style=\"color:rgba(255,255, 255,0.3);font-size: small;\">gambling</s> snake game - Temporary\r\n            settings menu</h1>\r\n        <p>Game size</p><button id=\"small\">SMall</button> <button id=\"medium\">Medium</button> <button\r\n            id=\"large\">Large</button> <button id=\"largest\">Largest</button>\r\n        <p>Impossible difficulty (double snakes)</p>\r\n        <p>Control one with arrow keys, control the other with WSAD.</p><input type=\"checkbox\" name=\"\"\r\n            id=\"double-snakes\"><br>\r\n        <p>Number of apples</p><input type=\"range\" name=\"\" id=\"apples\" min=\"1\" max=\"10\" value=\"1\"><br><button\r\n            id=\"begin\">Begin</button>\r\n    </div>\r\n    <div class=\"score\"><span id=\"score\">Score: 0</span></div>\r\n        </div>\r\n    </div>\r\n`;\nconst SNAKE_TAB_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"24px\" width=\"24px\" version=\"1.1\" id=\"_x32_\" viewBox=\"0 0 512 512\" xml:space=\"preserve\" fill=\"var(--colorNeutralForeground3)\">\r\n<style type=\"text/css\">\r\n\t.st0{fill:var(--colorNeutralForeground3);}\r\n</style>\r\n<g>\r\n\t<path class=\"st0\" d=\"M506.705,405.481C509.495,406.787,503.595,403.971,506.705,405.481L506.705,405.481z\"/>\r\n\t<path class=\"st0\" d=\"M506.705,405.481c-5.599-2.719-21.469,17.541-24.916,20.58c-10.414,9.197-23.086,17.63-37.393,18.465   c-33.091,1.928-45.372-33.918-54.578-58.745c-21.611-57.857-68.085-116.461-137.378-83.111   c-29.2,14.058-47.718,41.782-64.05,68.609c-10.362,16.99-26.374,54.605-49.94,56.186c-29.928,2.008-47.914-27.272-45.088-54.365   c3.199-30.701,27.333-52.828,49.086-72.164c45.675-40.591,93.161-73.026,107.592-135.716   c14.751-64.139-16.012-132.446-80.702-153.195c-23.94-7.669-63.837-28.942-102.421,14.315c-65.97,73.932-10.006,66.645,9.846,65.97   c66.734-2.275,95.08,10.281,85.696,45.506c-3.038,11.374-9.81,23.024-16.474,31.128c-4.266,5.545-22.802,22.996-31.012,30.132   c-18.714,16.27-37.676,32.354-54.898,50.224C28.033,282.525,4.307,322.761,2.761,369.972   C-0.225,460.627,96.419,548.2,184.924,496.679c41.782-24.322,56.71-71.16,79.903-110.534c9.668-16.431,27.564-37.801,47.789-21.212   c16.776,13.845,25.344,37.384,35.544,55.964c19.55,35.597,53.05,68.218,97.551,59.341c21.362-4.265,39.294-18.607,50.687-36.841   C499.277,438.777,515.538,409.613,506.705,405.481z\"/>\r\n</g>\r\n</svg>`;\nexport class SnakeGame {\n    isVisible = false;\n    snakeGame;\n    window;\n    constructor() {\n        this.window = p_stringToElement(SNAKE_GAME_HTML);\n        this.window.style.display = \"none\";\n        document.body.appendChild(this.window);\n        // Inject the bundle\n        this.asyncInit();\n    }\n    async asyncInit() {\n        try {\n            const gameEl = await (async () => { while (!document.querySelector(\"#game\"))\n                await new Promise(r => setTimeout(r, 50)); return document.querySelector(\"#game\"); })();\n            this.snakeGame = new Game();\n            this.snakeGame.setVisibility(false);\n        }\n        catch (e) {\n            console.error(\"Failed to create an instance of SnakeGame: \", e);\n        }\n        //const buttonElement = await (injectTab(\"Snake\", SNAKE_TAB_SVG)) as HTMLButtonElement;\n        const buttonElements = await window.teamsPlusAppsManager.addAppAndGetButton(\"Snake\", \"https://www.svgrepo.com/show/296787/snake.svg\");\n        buttonElements.forEach(buttonElement => {\n            buttonElement.addEventListener(\"click\", () => {\n                this.isVisible = !this.isVisible;\n                if (this.isVisible) {\n                    this.window.style.display = \"block\";\n                    this.snakeGame.setVisibility(true);\n                    const iframe = this.window.querySelector(\"iframe\");\n                    iframe.src = chrome.runtime.getURL(\"pages/snake/index.html\");\n                }\n                else {\n                    this.window.style.display = \"none\";\n                    this.snakeGame.setVisibility(false);\n                }\n            });\n        });\n    }\n}\n","export const CELL_WIDTH = 40;\nexport const CELL_HEIGHT = 40;\nexport const TURN_REJECT_THRESHOLD = 0.2;\nexport const FPS = 60;\nexport const MOVEMENT_SPEED = 0.1 * FPS;\nexport const SUBDIVISIONS = 10;\nexport const FramesPerCell = 1 / (MOVEMENT_SPEED / FPS);\n","import { CELL_HEIGHT, CELL_WIDTH, SUBDIVISIONS } from \"./config\";\nimport { Snake } from \"./snake\";\nimport { Vector2 } from \"./vec2\";\nimport foodImage from './assets/food.png';\nexport class Game {\n    doubleSnakes = false;\n    foods = [];\n    snakes = [];\n    nextGameDoubleSnakes = false;\n    numberOfFoods = 1;\n    gameStarted = false;\n    isVisible = false;\n    lastTime = Date.now();\n    deltaTime = 1 / 60;\n    canvas = document.querySelector(\"#game\");\n    areaX = this.canvas.width / CELL_WIDTH;\n    areaY = this.canvas.height / CELL_HEIGHT;\n    ctx = this.canvas.getContext(\"2d\");\n    FoodImage = new Image();\n    constructor() {\n        this.canvas.width = innerWidth;\n        this.canvas.height = innerHeight;\n        this.FoodImage.src = foodImage;\n        this.foodCallback = this.foodCallback.bind(this);\n        this.lostCallback = this.lostCallback.bind(this);\n        // FOCUS!@!\n        const enforceFocus = () => {\n            if (document.activeElement != this.canvas) {\n                this.canvas.focus();\n            }\n        };\n        this.canvas.addEventListener(\"blur\", () => {\n            if (this.gameStarted == false)\n                return;\n            setTimeout(enforceFocus, 0);\n        });\n        this.initialize();\n        this.gameStartedEvent();\n        this.resetGame();\n        this.showWindow();\n        window.onresize = () => {\n            this.canvas.width = this.canvas.clientWidth;\n            this.canvas.height = this.canvas.clientHeight;\n            this.areaX = this.canvas.width / CELL_WIDTH;\n            this.areaY = this.canvas.height / CELL_HEIGHT;\n        };\n    }\n    nextGameDoubleSnakesSet(v) {\n        this.nextGameDoubleSnakes = v;\n    }\n    createFood() {\n        while (this.foods.length < this.numberOfFoods) {\n            let valid = false;\n            let attempts = 0;\n            while (!valid) {\n                console.log(\"Attempt to place food...\");\n                const position = new Vector2(Math.floor(Math.random() * (this.areaX - 2)) + 1, Math.floor(Math.random() * (this.areaY - 2)) + 1);\n                console.log(\"Placed at: \", position);\n                const exists = this.foods.some(f => f.equals(position));\n                if (exists) {\n                    continue;\n                }\n                this.foods.push(position);\n                valid = true;\n                attempts += 1;\n                if (attempts > 100) {\n                    console.warn(\"Too many attempts exhausted; giving up\");\n                    for (const snake of this.snakes) {\n                        snake.updateFoodPositions(this.foods);\n                    }\n                    return;\n                }\n            }\n        }\n        for (const snake of this.snakes) {\n            snake.updateFoodPositions(this.foods);\n        }\n    }\n    gameStartedEvent() {\n        document.addEventListener(\"keydown\", () => {\n            const win = document.querySelector(\"#info\");\n            if (!win)\n                return;\n            if (win.style.display != \"none\")\n                return;\n            this.gameStarted = true;\n            for (const snake of this.snakes) {\n                snake.setGameStarted(true);\n            }\n        });\n    }\n    updateScore() {\n        let totalLength = 0;\n        for (const snake of this.snakes) {\n            totalLength += snake.getPoints().length / SUBDIVISIONS;\n        }\n        const a = document.querySelector(\"#score\");\n        if (!a)\n            return;\n        a.textContent = `Score: ${totalLength}`;\n    }\n    drawGrid() {\n        for (let x = 0; x < this.areaX; x++) {\n            for (let y = 0; y < this.areaY; y++) {\n                if (y % 2 == 0) {\n                    if (x % 2 == 0) {\n                        this.ctx.fillStyle = \"#E7E7E8\";\n                        this.ctx.fillRect(x * CELL_WIDTH, y * CELL_HEIGHT, CELL_WIDTH, CELL_HEIGHT);\n                    }\n                    else {\n                        this.ctx.fillStyle = \"#D4D4D4\";\n                        this.ctx.fillRect(x * CELL_WIDTH, y * CELL_HEIGHT, CELL_WIDTH, CELL_HEIGHT);\n                    }\n                }\n                else {\n                    if (x % 2 == 1) {\n                        this.ctx.fillStyle = \"#E7E7E8\";\n                        this.ctx.fillRect(x * CELL_WIDTH, y * CELL_HEIGHT, CELL_WIDTH, CELL_HEIGHT);\n                    }\n                    else {\n                        this.ctx.fillStyle = \"#D4D4D4\";\n                        this.ctx.fillRect(x * CELL_WIDTH, y * CELL_HEIGHT, CELL_WIDTH, CELL_HEIGHT);\n                    }\n                }\n            }\n        }\n    }\n    createSnakes() {\n        this.doubleSnakes = this.nextGameDoubleSnakes;\n        if (this.doubleSnakes) {\n            this.snakes = [\n                new Snake(new Vector2(Math.round(this.areaX / 2), Math.round(this.areaY / 2)), new Vector2(0, -1), 4, this.areaX, this.areaY, this.foodCallback, this.lostCallback),\n                new Snake(new Vector2(Math.round(this.areaX / 3), Math.round(this.areaY / 3)), new Vector2(0, -1), 4, this.areaX, this.areaY, this.foodCallback, this.lostCallback, 1)\n            ];\n            this.snakes[1].setUseWSAD(true);\n            if (this.doubleSnakes) {\n                this.snakes[0].updateOtherPoints(this.snakes[1].getPoints());\n                this.snakes[1].updateOtherPoints(this.snakes[0].getPoints());\n            }\n        }\n        else {\n            this.snakes = [\n                new Snake(new Vector2(Math.round(this.areaX / 2), Math.round(this.areaY / 2)), new Vector2(0, -1), 4, this.areaX, this.areaY, this.foodCallback, this.lostCallback)\n            ];\n        }\n        for (const snake of this.snakes) {\n            snake.updateFoodPositions(this.foods);\n        }\n    }\n    foodCallback(position) {\n        console.warn(\"GOT THE FOOD!!!\");\n        const idx = this.foods.findIndex(f => f.equals(position));\n        if (idx !== -1)\n            this.foods.splice(idx, 1);\n        if (this.doubleSnakes) {\n            this.snakes[0].updateOtherPoints(this.snakes[1].getPoints());\n            this.snakes[1].updateOtherPoints(this.snakes[0].getPoints());\n        }\n        this.createFood();\n        this.updateScore();\n    }\n    lostCallback(length) {\n        console.warn(\"Lost with length: \", length);\n        let totalLength = 0;\n        for (const snake of this.snakes) {\n            totalLength += snake.getPoints().length / SUBDIVISIONS;\n        }\n        alert(\"(Temporary UI) Total score of: \" + totalLength.toString());\n        this.lostFunction();\n    }\n    lostFunction() {\n        this.snakes.length = 0;\n        this.resetGame();\n        this.showWindow();\n    }\n    drawFood() {\n        this.foods.forEach((position, index) => {\n            const foodWidth = CELL_WIDTH * 0.5;\n            const foodHeight = CELL_HEIGHT * 0.5;\n            const x = position.x * CELL_WIDTH;\n            const y = position.y * CELL_HEIGHT;\n            //this.ctx.fillStyle = \"green\";\n            //this.ctx.fillRect(x + foodWidth / 2, y + foodHeight / 2, foodWidth, foodHeight);\n            this.ctx.drawImage(this.FoodImage, x, y);\n            //console.log(\"Fill at: \", x, y);\n        });\n        //console.log(foods[0]);\n    }\n    render() {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.drawGrid();\n        this.drawFood();\n        for (const snake of this.snakes) {\n            snake.render(this.ctx);\n        }\n    }\n    update(deltaTime) {\n        this.render();\n        for (const snake of this.snakes) {\n            snake.update(deltaTime);\n        }\n    }\n    renderLoop = () => {\n        this.deltaTime = (Date.now() - this.lastTime) / 1000;\n        if (this.isVisible) {\n            this.update(this.deltaTime);\n        }\n        this.lastTime = Date.now();\n        requestAnimationFrame(this.renderLoop);\n    };\n    updateCanvas() {\n        this.canvas.width = this.canvas.clientWidth;\n        this.canvas.height = this.canvas.clientHeight;\n        this.areaX = this.canvas.width / CELL_WIDTH;\n        this.areaY = this.canvas.height / CELL_HEIGHT;\n    }\n    resetGame() {\n        this.gameStarted = false;\n        this.createSnakes();\n        this.foods.length = 0;\n        this.createFood();\n        this.updateScore();\n    }\n    showWindow() {\n        const win = document.querySelector(\"#info\");\n        if (!win)\n            return;\n        win.style.display = \"block\";\n    }\n    windowHandler() {\n        const win = document.querySelector(\"#info\");\n        if (!win)\n            return;\n        const small = document.querySelector(\"#small\");\n        const medium = document.querySelector(\"#medium\");\n        const large = document.querySelector(\"#large\");\n        const largest = document.querySelector(\"#largest\");\n        small.addEventListener(\"click\", () => {\n            this.canvas.style.width = \"240px\";\n            this.canvas.style.height = \"240px\";\n            this.updateCanvas();\n            this.resetGame();\n        });\n        medium.addEventListener(\"click\", () => {\n            this.canvas.style.width = \"480px\";\n            this.canvas.style.height = \"480px\";\n            this.updateCanvas();\n            this.resetGame();\n        });\n        large.addEventListener(\"click\", () => {\n            this.canvas.style.width = \"800px\";\n            this.canvas.style.height = \"800px\";\n            this.updateCanvas();\n            this.resetGame();\n        });\n        largest.addEventListener(\"click\", () => {\n            this.canvas.style.width = \"1600px\";\n            this.canvas.style.height = \"800px\";\n            this.updateCanvas();\n            this.resetGame();\n        });\n        const hard = document.querySelector(\"#double-snakes\");\n        hard.addEventListener(\"input\", () => {\n            this.nextGameDoubleSnakesSet(hard.checked);\n            this.resetGame();\n        });\n        const apples = document.querySelector(\"#apples\");\n        apples.addEventListener(\"input\", () => {\n            this.numberOfFoods = parseInt(apples.value);\n            this.resetGame();\n        });\n        const begin = document.querySelector(\"#begin\");\n        begin.addEventListener(\"click\", () => {\n            win.style.display = \"none\";\n            this.gameStartedEvent();\n        });\n    }\n    setVisibility(value) {\n        this.isVisible = value;\n    }\n    initialize() {\n        this.windowHandler();\n        this.createSnakes();\n        this.createFood();\n        this.updateScore();\n        this.renderLoop();\n    }\n}\n","import { CELL_HEIGHT, CELL_WIDTH, FramesPerCell, MOVEMENT_SPEED, SUBDIVISIONS, TURN_REJECT_THRESHOLD } from \"./config\";\nimport { Vector2 } from \"./vec2\";\nimport headRightURL from './assets/head_right.png';\nimport headLeftURL from \"./assets/head_left.png\";\nimport headUpURL from \"./assets/head_up.png\";\nimport headDownURL from \"./assets/head_down.png\";\nconst headRightImage = new Image();\nheadRightImage.src = headRightURL;\nconst headLeftImage = new Image();\nheadLeftImage.src = headLeftURL;\nconst headUpImage = new Image();\nheadUpImage.src = headUpURL;\nconst headDownImage = new Image();\nheadDownImage.src = headDownURL;\nfunction lerpHex(hexA, hexB, t) {\n    const parse = (h) => {\n        h = h.replace(/^#/, '');\n        if (h.length === 3)\n            h = h.split('').map(c => c + c).join('');\n        return [\n            parseInt(h.substring(0, 2), 16),\n            parseInt(h.substring(2, 4), 16),\n            parseInt(h.substring(4, 6), 16)\n        ];\n    };\n    const [r1, g1, b1] = parse(hexA);\n    const [r2, g2, b2] = parse(hexB);\n    const r = Math.round(r1 + (r2 - r1) * t);\n    const g = Math.round(g1 + (g2 - g1) * t);\n    const b = Math.round(b1 + (b2 - b1) * t);\n    const toHex = (v) => {\n        let s = v.toString(16);\n        return s.length === 1 ? '0' + s : s;\n    };\n    return '#' + toHex(r) + toHex(g) + toHex(b);\n}\nfunction lerp(a, b, t) {\n    return a + (b - a) * t;\n}\nexport class Snake {\n    position;\n    direction;\n    numX;\n    numY;\n    frameCounter = 0;\n    pendingTurns = [];\n    snakePoints = [];\n    previousPoints = [];\n    foods = [];\n    foodCallback;\n    lostCallback;\n    otherPoints = [];\n    useWSADControls = false;\n    gameStarted = false;\n    lastTurningCell = new Vector2(1100, 100);\n    index = 0;\n    constructor(initialPosition, initialDirection, initialLength, numX, numY, eatenFoodCallback, lostCallback, index = 0) {\n        this.position = initialPosition;\n        this.direction = initialDirection;\n        this.foodCallback = eatenFoodCallback;\n        this.lostCallback = lostCallback;\n        this.numX = numX;\n        this.numY = numY;\n        this.index = index;\n        this.keyEvents();\n        this.generateSnake(initialLength);\n    }\n    setUseWSAD(value) {\n        this.useWSADControls = value;\n    }\n    setGameStarted(value) {\n        this.gameStarted = value;\n    }\n    generateSnake(length) {\n        const beginParts = 40;\n        this.frameCounter = FramesPerCell * beginParts;\n        for (let i = 0; i < beginParts; i++) {\n            this.snakePoints.push(this.position.sub(new Vector2(0, i)));\n        }\n        for (let i = 0; i < beginParts * FramesPerCell; i++) {\n            this.previousPoints.push({ p: this.position.sub(new Vector2(i / FramesPerCell)), c: i });\n        }\n        //console.log(this.previousPoints);\n        //console.log(this.snakePoints);\n    }\n    updateSegments() {\n        const interval = FramesPerCell / SUBDIVISIONS;\n        const bufLen = this.previousPoints.length;\n        const newest = bufLen - 1;\n        this.snakePoints.forEach((part, i) => {\n            // how many frames back this segment should trail\n            const idx = Math.round(newest - i * interval);\n            // clamp to [0, newest]\n            const clamped = Math.max(0, Math.min(idx, newest));\n            const point = this.previousPoints[clamped];\n            part.x = point.p.x;\n            part.y = point.p.y;\n        });\n    }\n    snakeUpdate(deltaTime) {\n        this.frameCounter += 1;\n        if (this.gameStarted) {\n            this.position = this.position.add(this.direction.multiplyScalar(MOVEMENT_SPEED).multiplyScalar(deltaTime));\n        }\n        //console.log(this.position);\n        // Previous points\n        this.updateSegments();\n        // Distance to previous\n        // Euler's distance squared\n        this.previousPoints.push({ p: this.position, c: this.frameCounter });\n        if (this.previousPoints.length > this.snakePoints.length * (FramesPerCell / SUBDIVISIONS) + (FramesPerCell / SUBDIVISIONS) * 3) {\n            this.previousPoints.splice(0, 1);\n        }\n        //console.log(this.previousPoints);\n        //console.log(this.position);\n    }\n    getFood() {\n        let index = 0;\n        for (const food of this.foods) {\n            const difference = Math.max(Math.abs(food.x - this.position.x), Math.abs(food.y - this.position.y));\n            if (difference < TURN_REJECT_THRESHOLD) {\n                for (let i = 0; i < SUBDIVISIONS; i++) {\n                    this.snakePoints.push(new Vector2(-10, -10)); // Add a new segment\n                }\n                this.foods.splice(index, 1);\n                this.foodCallback(food);\n            }\n            index++;\n        }\n    }\n    drawSnake(ctx) {\n        const snakeWidth = CELL_WIDTH * 0.5;\n        const snakeHeight = CELL_HEIGHT * 0.5;\n        //ctx.fillStyle = \"blue\";\n        //ctx.fillRect(this.position.x * CELL_WIDTH + snakeWidth / 2, this.position.y * CELL_HEIGHT + snakeHeight / 2, snakeWidth, snakeHeight);\n        //ctx.shadowColor = \"rgba(0, 0, 0, 0.35)\";\n        //ctx.shadowBlur = 0;\n        //ctx.shadowOffsetX = CELL_WIDTH * 0.1;\n        //ctx.shadowOffsetY = CELL_HEIGHT * 0.1;\n        const headColor = [91, 123, 249];\n        const tailColor = [57, 99, 255];\n        ctx.beginPath();\n        const shadowOffsetX = CELL_WIDTH * 0.1;\n        const shadowOffsetY = CELL_HEIGHT * 0.1;\n        const len = this.snakePoints.length;\n        const radiusBase = snakeWidth * 0.75;\n        let i = 0;\n        for (const part of this.snakePoints) {\n            const x = part.x * CELL_WIDTH + CELL_WIDTH / 2;\n            const r = (snakeWidth * 0.75) * (1 - (i / this.snakePoints.length) * 0.15);\n            const y = part.y * CELL_HEIGHT + CELL_HEIGHT / 2;\n            ctx.moveTo(x + r + shadowOffsetX, y + shadowOffsetY);\n            ctx.arc(x + shadowOffsetX, y + shadowOffsetY, r, 0, Math.PI * 2);\n            const t = i / (this.snakePoints.length - 1);\n            //const t = ;\n            //ctx.fillStyle = `rgb(${lerp(headColor[0], tailColor[0], t)}, ${lerp(headColor[1], tailColor[1], t)}, ${lerp(headColor[2], tailColor[2], t)})`;\n            //ctx.fillStyle = `rgb(${t * 255}, ${t * 255}, ${t * 255})`\n            //ctx.fill();\n            i++;\n        }\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.35)\";\n        ctx.fill();\n        // Real pass, draw segments on top of shadow\n        i = 0;\n        let nBatches = 0;\n        let previousColor = \"hahahaihiah\";\n        for (const part of this.snakePoints) {\n            const t = i / (this.snakePoints.length - 1);\n            const colorR = Math.round(lerp(headColor[0], tailColor[0], t));\n            const colorG = Math.round(lerp(headColor[1], tailColor[1], t));\n            const colorB = Math.round(lerp(headColor[2], tailColor[2], t));\n            const currentColor = `rgb(${colorR}, ${colorG}, ${colorB})`;\n            if (currentColor != previousColor) {\n                ctx.fill();\n                ctx.beginPath();\n                ctx.fillStyle = currentColor;\n                nBatches++;\n            }\n            const x = part.x * CELL_WIDTH + CELL_WIDTH / 2;\n            const r = (snakeWidth * 0.75) * (1 - (i / this.snakePoints.length) * 0.15);\n            const y = part.y * CELL_HEIGHT + CELL_HEIGHT / 2;\n            ctx.moveTo(x + r, y);\n            ctx.arc(x, y, r, 0, Math.PI * 2);\n            //const t = ;\n            ctx.fillStyle =\n                ctx.filter = `hue-rotate(${this.index * 45 + this.index * 90}deg)`;\n            //ctx.fillStyle = `rgb(${t * 255}, ${t * 255}, ${t * 255})`\n            //ctx.fill();\n            previousColor = currentColor;\n            i++;\n        }\n        //console.log(\"# Segments: \", this.snakePoints.length, \" seperated into \", nBatches, \" batches for rendering\");\n        ctx.fill();\n        ctx.shadowColor = \"transparent\";\n        // Draw the head\n        const x = this.position.x * CELL_WIDTH;\n        const y = this.position.y * CELL_HEIGHT;\n        if (this.direction.equals(new Vector2(-1, 0))) {\n            // Going left\n            ctx.drawImage(headLeftImage, x, y);\n        }\n        if (this.direction.equals(new Vector2(1, 0))) {\n            // Going right\n            ctx.drawImage(headRightImage, x, y);\n        }\n        if (this.direction.equals(new Vector2(0, -1))) {\n            // Going up\n            ctx.drawImage(headUpImage, x, y);\n        }\n        if (this.direction.equals(new Vector2(0, 1))) {\n            // Going down\n            ctx.drawImage(headDownImage, x, y);\n        }\n        ctx.filter = \"none\";\n    }\n    isWithinBorders() {\n        if (this.position.x < 0 || this.position.y < 0) {\n            return false;\n        }\n        if (this.position.x > this.numX - 1 || this.position.y > this.numY - 1) {\n            return false;\n        }\n        return true;\n    }\n    ensureTurningOnCell() {\n        const closestCellX = Math.round(this.position.x + this.direction.x * 0);\n        const closestCellY = Math.round(this.position.y + this.direction.y * 0);\n        const difference = Math.max(Math.abs(closestCellX - this.position.x), Math.abs(closestCellY - this.position.y));\n        if (difference > TURN_REJECT_THRESHOLD) {\n            return false;\n        }\n        // Teleport to cell, snap back for lower input latency\n        const newPosition = new Vector2(closestCellX, closestCellY);\n        if (this.lastTurningCell.equals(newPosition))\n            return false;\n        const differenceP = this.position.sub(newPosition);\n        // COMPLEX BACKTRACKING SYSTEM\n        // Prevent weird artifacts by deleting instances of frame positions where a closest one is found (backtracking) in order to prevent bump and flickering from snaping back.\n        const MAX_SEARCH = SUBDIVISIONS;\n        let closestDistance = Infinity;\n        let closestPoint = this.previousPoints[this.previousPoints.length - 1];\n        let closestPointIndex = -1;\n        for (let i = this.previousPoints.length - 1; i >= this.previousPoints.length - MAX_SEARCH; i--) {\n            const point = this.previousPoints[i];\n            if (!point)\n                break;\n            if (!closestPoint) {\n                throw Error(\"No closest point\");\n            }\n            const dx = point.p.x - newPosition.x;\n            const dy = point.p.y - newPosition.y;\n            const d = Math.sqrt(dx * dx + dy * dy);\n            if (d < closestDistance) {\n                closestPoint = point;\n                closestDistance = d;\n                closestPointIndex = i;\n                //console.log(\"Set closest distance to: \", d, closestDistance);\n            }\n            else {\n                //console.log(\"No distance change: \", d, closestDistance);\n            }\n        }\n        // Do not delete if frameCounter is less advanced than closestPoint somehow (or just equal)\n        // DeepSeek fix test\n        if (this.frameCounter > closestPoint.c) {\n            // FIXED: Delete newer points (c > closestPoint.c) using reverse iteration\n            this.previousPoints.splice(closestPointIndex + 1);\n            // FIXED: Also adjust snakePoints to match the backtracked state\n            this.updateSegments();\n            const diff = this.frameCounter - closestPoint.c;\n            console.log(\"Backtracked by \", diff, \" segments\");\n            this.frameCounter -= diff;\n        }\n        this.position = newPosition;\n        console.log(\"Allowing turning\");\n        return true;\n    }\n    verifyTurn(newTurn) {\n        const dirMap = {\n            up: { x: 0, y: -1 },\n            down: { x: 0, y: 1 },\n            left: { x: -1, y: 0 },\n            right: { x: 1, y: 0 }\n        };\n        const nd = dirMap[newTurn];\n        let ndt = { x: 0, y: 0 };\n        if (this.pendingTurns.length > 0) {\n            ndt = dirMap[this.pendingTurns[Math.max(0, this.pendingTurns.length - 1)]];\n        }\n        else {\n            ndt = this.direction;\n        }\n        if (nd.x == ndt.x && nd.y == ndt.y) {\n            return false;\n        }\n        if (!(nd.x === -ndt.x && nd.y === -ndt.y)) {\n            return true;\n        }\n        return false;\n    }\n    keyEvents() {\n        document.addEventListener(\"keydown\", (e) => {\n            let newTurn = null;\n            if (this.useWSADControls) {\n                if (e.key === \"w\" || e.key === \"W\")\n                    newTurn = \"up\";\n                else if (e.key === \"s\" || e.key === \"S\")\n                    newTurn = \"down\";\n                else if (e.key === \"a\" || e.key === \"A\")\n                    newTurn = \"left\";\n                else if (e.key === \"d\" || e.key === \"D\")\n                    newTurn = \"right\";\n            }\n            else {\n                if (e.key === \"ArrowUp\")\n                    newTurn = \"up\";\n                else if (e.key === \"ArrowDown\")\n                    newTurn = \"down\";\n                else if (e.key === \"ArrowLeft\")\n                    newTurn = \"left\";\n                else if (e.key === \"ArrowRight\")\n                    newTurn = \"right\";\n            }\n            if (newTurn) {\n                if (this.verifyTurn(newTurn) && this.pendingTurns.length < 2) {\n                    this.pendingTurns.push(newTurn);\n                }\n            }\n        });\n    }\n    updatePendingTurn() {\n        const pendingTurn = this.pendingTurns[0];\n        if (!pendingTurn)\n            return;\n        if (this.ensureTurningOnCell() == false) {\n            // Failed to turn, not close enough to cell center or next cell center\n            return;\n        }\n        switch (pendingTurn) {\n            case 'up':\n                if (this.direction.y != 0)\n                    break;\n                this.direction = new Vector2(0, -1);\n                break;\n            case 'down':\n                if (this.direction.y != 0)\n                    break;\n                this.direction = new Vector2(0, 1);\n                break;\n            case 'left':\n                if (this.direction.x != 0)\n                    break;\n                this.direction = new Vector2(-1, 0);\n                break;\n            case 'right':\n                if (this.direction.x != 0)\n                    break;\n                this.direction = new Vector2(1, 0);\n                break;\n            default:\n                console.warn(\"Unknown value: \", pendingTurn);\n        }\n        console.log(\"Processed pending turn: \", pendingTurn);\n        this.lastTurningCell = this.position;\n        this.pendingTurns.splice(0, 1);\n    }\n    reset() {\n        this.pendingTurns = [];\n        this.snakePoints.length = 0;\n        this.previousPoints.length = 0;\n        this.position = new Vector2(Math.round(this.numX / 2), Math.round(this.numY / 2));\n        //this.generateSnake(4);\n    }\n    rebuild() {\n        this.generateSnake(4);\n    }\n    hasCollidedWithSelf() {\n        let index = 0;\n        for (const position of this.snakePoints) {\n            //if (index < SUBDIVISIONS) continue; // Don't collide with head;\n            //Does not work\n            const actualPosition = this.position.add(this.direction.multiplyScalar(0.5));\n            const dSquared = (actualPosition.x - position.x) ** 2 + (actualPosition.y - position.y) ** 2;\n            if (dSquared < (1 / SUBDIVISIONS) ** 2) {\n                console.log(\"Collided with: \", position, \" distance squared of: \", dSquared);\n                return true;\n            }\n            index++;\n        }\n        return false;\n    }\n    hasCollidedWithOthers() {\n        for (const position of this.otherPoints) {\n            const actualPosition = this.position.add(this.direction.multiplyScalar(0.5));\n            const dSquared = (actualPosition.x - position.x) ** 2 + (actualPosition.y - position.y) ** 2;\n            if (dSquared < (1 / SUBDIVISIONS) ** 2) {\n                console.log(\"Collided with: \", position, \" distance squared of: \", dSquared);\n                return true;\n            }\n        }\n        return false;\n    }\n    update(deltaTime) {\n        this.updatePendingTurn();\n        this.snakeUpdate(deltaTime);\n        this.getFood();\n        if (this.isWithinBorders() == false) {\n            // Reset everything\n            this.lostCallback(this.snakePoints.length / SUBDIVISIONS);\n            //this.reset();\n        }\n        if (this.hasCollidedWithSelf() == true) {\n            this.lostCallback(this.snakePoints.length / SUBDIVISIONS);\n            //this.reset();\n        }\n        if (this.hasCollidedWithOthers() == true) {\n            this.lostCallback(this.snakePoints.length / SUBDIVISIONS);\n        }\n    }\n    getPoints() {\n        return this.snakePoints;\n    }\n    updateFoodPositions(foods) {\n        this.foods = foods;\n    }\n    updateOtherPoints(others) {\n        this.otherPoints = others;\n    }\n    render(ctx) {\n        this.drawSnake(ctx);\n    }\n}\n","export class Vector2 {\n    x;\n    y;\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    multiply(other) {\n        return new Vector2(this.x * other.x, this.y * other.y);\n    }\n    add(other) {\n        return new Vector2(this.x + other.x, this.y + other.y);\n    }\n    multiplyScalar(scalar) {\n        return new Vector2(this.x * scalar, this.y * scalar);\n    }\n    sub(other) {\n        return new Vector2(this.x - other.x, this.y - other.y);\n    }\n    equals(other) {\n        return (this.x == other.x && this.y == other.y);\n    }\n}\n","export class Audio {\n    audioCtx;\n    audioBuffer;\n    constructor(audioCtx) {\n        this.audioCtx = audioCtx;\n    }\n    async loadSound(url) {\n        try {\n            // Validate input\n            if (!url)\n                throw new Error('No audio file path provided');\n            // Get absolute URL for extension resource\n            const soundUrl = chrome.runtime.getURL(url);\n            console.log(\"Attempt to fetch at: \", soundUrl);\n            if (soundUrl == 'chrome-extension://invalid/') {\n                throw new Error(`Chrome runtime returned INVALID url while trying to fetch ${url}`);\n            }\n            // Fetch the audio file\n            const response = await fetch(soundUrl);\n            if (!response.ok) {\n                throw new Error(`Failed to fetch audio: ${response.status} ${response.statusText}`);\n            }\n            // Convert to array buffer\n            const arrayBuffer = await response.arrayBuffer();\n            // Decode audio data\n            this.audioBuffer = await this.audioCtx.decodeAudioData(arrayBuffer);\n        }\n        catch (error) {\n            console.error('Error loading sound:', error);\n            // Add your error handling/recovery logic here\n            throw error; // Re-throw if you want calling code to handle it\n        }\n    }\n    playSound(volume) {\n        if (this.audioBuffer == undefined) {\n            throw new Error(\"Audio buffer has not been defined yet\");\n        }\n        const source = this.audioCtx.createBufferSource();\n        source.buffer = this.audioBuffer;\n        const gainNode = this.audioCtx.createGain();\n        gainNode.gain.value = volume; // ðŸŽšï¸ Set the volume\n        source.connect(gainNode);\n        gainNode.connect(this.audioCtx.destination);\n        source.start();\n    }\n}\n","import { DEFAULT_THEMES } from \"../contribution/defaultThemes\";\nimport { DEFAULT_FONTS, DEFAULT_COLORS, DEFAULT_PIXEL_VALUES, CLASS_COLORS, DEFAULT_BACKGROUNDS, DEFAULT_EMOJIS } from \"../shared\";\nimport { ThemeKeysList } from \"../dataManagement\";\nimport { confirmation } from \"./ui\";\nimport { p_stringToElement } from \"../utils\";\n//const THEME_NECESSARY_MAIN_KEYS = {\"data\": {\"classColors\": null, \"varColors\": null, \"fonts\": {\"fontFamily\": null}, \"otherSettings\": null, \"twemojiSupport\": null}, \"version\": null, \"name\": null};\nconst THEME_VERSION_CURRENT = 2;\nconst THEME_CARD_HTML = `\r\n                <div class=\"theme\">\r\n                    <h3 class=\"theme-title\">Dark cozy blue</h3>\r\n                    <p class=\"theme-descripton\">Color and fonts theme</p>\r\n                    <div class=\"actions\">\r\n                        <button class=\"text-btn\" id=\"apply-btn\">Apply</button>\r\n                        <button class=\"text-btn\" id=\"export-theme\">\r\n                            Export\r\n                        </button>\r\n                        <button class=\"text-btn\" id=\"delete-theme\">\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n`;\nexport class ThemeManager {\n    currentThemes = DEFAULT_THEMES;\n    dataManager;\n    constructor(dataManager) {\n        this.dataManager = dataManager;\n    }\n    isStringDict(obj) {\n        return (typeof obj === \"object\" &&\n            obj !== null &&\n            !Array.isArray(obj) &&\n            Object.values(obj).every(val => typeof val === \"string\"));\n    }\n    p_syncDataManager() {\n        this.p_dataManagerExists();\n        this.dataManager.currentThemes = this.currentThemes;\n    }\n    p_syncInstanceWithDataManager() {\n        this.p_dataManagerExists();\n        this.currentThemes = this.dataManager.currentThemes;\n    }\n    p_dataManagerExists() {\n        if (this.dataManager == null) {\n            throw new Error(\"Where is data manager\");\n        }\n    }\n    p_isThemeValid_dataLegacy_parser(themeString) {\n        let themeDataParsed = JSON.parse(themeString);\n        // Check data\n        if (themeDataParsed[\"data\"] == null) {\n            console.error(\"Data field not found; failed to load theme\");\n            return;\n        }\n        let data = {\n            colors: themeDataParsed[\"data\"][\"varColors\"],\n            classColors: themeDataParsed[\"data\"][\"classColors\"],\n            fonts: themeDataParsed[\"data\"][\"fonts\"],\n            pixelValues: themeDataParsed[\"data\"]['otherSettings'],\n            backgrounds: themeDataParsed[\"data\"][\"backgrounds\"],\n            emojis: { set: themeDataParsed[\"data\"][\"twemojiSupport\"] ? \"twemoji\" : \"default\" }\n        };\n        // Fix theme if needed\n        if (themeDataParsed[\"data\"][\"classColors\"] == null) {\n            console.error(\"Field not found. Override with default.\");\n            data.classColors = CLASS_COLORS;\n        }\n        if (themeDataParsed[\"data\"][\"varColors\"] == null) {\n            console.error(\"Field not found. Override with default.\");\n            data.colors = DEFAULT_COLORS;\n        }\n        if (themeDataParsed[\"data\"][\"fonts\"] == null) {\n            console.error(\"Field not found. Override with default.\");\n            data.fonts = DEFAULT_FONTS;\n        }\n        if (themeDataParsed[\"data\"][\"otherSettings\"] == null) {\n            console.error(\"Field not found. Override with default.\");\n            data.pixelValues = DEFAULT_PIXEL_VALUES;\n        }\n        if (themeDataParsed[\"data\"][\"twemojiSupport\"] == null) {\n            console.error(\"Field not found. Override with default.\");\n            data.emojis = DEFAULT_EMOJIS;\n        }\n        ;\n        if (themeDataParsed[\"data\"][\"backgrounds\"] == null) {\n            console.error(\"Backgrounds field not found. Overriding with default.\");\n            data.backgrounds = DEFAULT_BACKGROUNDS;\n        }\n        console.log(data);\n        return {\n            data: data,\n            name: themeDataParsed[\"name\"],\n            data_version: themeDataParsed[\"data_version\"]\n        };\n    }\n    p_isThemeValid(themeString) {\n        let themeDataParsed = JSON.parse(themeString);\n        // Check data\n        if (themeDataParsed[\"data\"] == null) {\n            console.error(\"Data field not found; failed to load theme\");\n            return;\n        }\n        if (themeDataParsed[\"data_version\"] == 1) {\n            console.log(\"Using legacy parser\");\n            return this.p_isThemeValid_dataLegacy_parser(themeString);\n        }\n        // Fix theme if needed\n        for (const key of Object.keys(themeDataParsed[\"data\"])) {\n            if (ThemeKeysList.includes(key) == false) {\n                console.error(\"Error: invalid theme. Contains unrecognized theme.\");\n                return;\n            }\n            if (this.isStringDict(themeDataParsed[\"data\"][key]) == false) {\n                console.error(\"Error: Theme is not of valid type\");\n                return;\n            }\n        }\n        for (const key of ThemeKeysList) {\n            if (themeDataParsed[\"data\"][key] == null) {\n                console.warn(\"Fixing missing key: \", key);\n                themeDataParsed[\"data\"][key] = {};\n            }\n        }\n        return themeDataParsed;\n        // Check version\n    }\n    addTheme(themeName, themeData_JSON) {\n        console.log(themeName, themeData_JSON);\n        this.p_syncInstanceWithDataManager();\n        this.p_dataManagerExists();\n        console.log(\"Adding theme \", themeName, \" to current themes\");\n        this.currentThemes[themeName] = themeData_JSON;\n        this.p_syncDataManager();\n        this.dataManager.saveThemes();\n        this.dataManager.loadThemes();\n        this.p_syncDataManager();\n        console.log(\"Added theme\");\n        // this.updateThemeList()\n    }\n    async p_generateThemeData(themeName) {\n        console.log(\"GENERATE DATA\");\n        const themeDict = {\n            data: this.dataManager.exportThemeData(),\n            name: themeName,\n            data_version: THEME_VERSION_CURRENT // Change this everytime format is updated\n        };\n        console.log(\"EXPORT: \", themeDict.data.backgrounds);\n        return JSON.stringify(themeDict);\n    }\n    async applyTheme(themeName) {\n        this.p_dataManagerExists();\n        console.log(this.currentThemes);\n        const themeDataUnparsed = this.currentThemes[themeName];\n        console.log(themeDataUnparsed);\n        let themeDataParsed = this.p_isThemeValid(themeDataUnparsed);\n        if (themeDataParsed == null) {\n            throw Error(\"error\");\n        }\n        const currentDataTemp = { ...this.dataManager.currentData };\n        try {\n            this.dataManager.currentData = (themeDataParsed.data);\n            const i = document.querySelector(\"#twemojiSupport\");\n            if (i) {\n                i.checked = await this.dataManager.currentData[\"emojis\"][\"set\"] == \"twemoji\";\n                i.addEventListener(\"input\", function () {\n                    console.log(\"Save Twemoji state\");\n                    chrome.storage.local.set({ \"twemoji\": i.checked });\n                });\n            }\n            this.dataManager.saveAll();\n            console.log(\"Successfully loaded theme.\");\n        }\n        catch (error) {\n            console.error(\"Failed to apply theme \", error);\n            console.error(\"Reverting to original state.\");\n            this.dataManager.currentData = currentDataTemp;\n            console.log(\"Reverted to original state.\");\n        }\n        finally {\n            console.log(\"Successfully applied theme with no issues.\");\n        }\n    }\n    async updateThemesList() {\n        this.p_dataManagerExists();\n        console.log(\"Updating theme list\");\n        const availableThemesElement = document.querySelector(\"#availableThemes\");\n        if (availableThemesElement == null) {\n            console.error(\"Failed to update available themes: element not found\");\n            return;\n        }\n        availableThemesElement.innerHTML = \"\"; // Clear existing buttons\n        await this.dataManager.loadThemes();\n        for (const themeName in this.dataManager.currentThemes) {\n            // Create new element thing\n            const a = p_stringToElement(THEME_CARD_HTML);\n            const themeNameH3 = a.querySelector(\".theme-title\");\n            const applyButton = a.querySelector(\"#apply-btn\");\n            const exportButton = a.querySelector(\"#export-theme\");\n            const deleteButton = a.querySelector(\"#delete-theme\");\n            if (themeNameH3 == null || exportButton == null || applyButton == null || deleteButton == null)\n                return;\n            themeNameH3.textContent = `${themeName}`;\n            applyButton.textContent = \"Load\";\n            deleteButton.textContent = \"Delete\";\n            exportButton.textContent = \"Export\";\n            // Button functions\n            /*Applies the theme*/\n            applyButton.addEventListener(\"click\", async () => {\n                if (confirmation() == false) {\n                    alert(\"User has not confirmed\");\n                    return;\n                }\n                await this.dataManager.loadThemes();\n                this.currentThemes = this.dataManager.currentThemes;\n                await this.applyTheme(themeName);\n                alert(\"Successfully applied theme. Please close and reopen the popup to see changes in the advanced tab.\");\n            });\n            /*Deletes the theme*/\n            deleteButton.addEventListener(\"click\", async () => {\n                if (confirmation() == false) {\n                    alert(\"User has not confirmed\");\n                    return;\n                }\n                // Delete the thing\n                try {\n                    delete this.dataManager.currentThemes[themeName];\n                    this.dataManager.saveThemes();\n                }\n                catch (error) {\n                    console.error(\"Failed to delete: \", error);\n                    alert(\"Failed to delete theme\");\n                    return;\n                }\n                finally {\n                    await this.updateThemesList();\n                    alert(\"Successfully deleted the theme\");\n                }\n            });\n            /*Exports the theme*/\n            exportButton.addEventListener(\"click\", async () => {\n                if (this.dataManager.currentThemes[themeName] == null) {\n                    console.error(\"Current theme not found\");\n                    alert(\"Current theme not found\");\n                    return;\n                }\n                await navigator.clipboard.writeText(this.dataManager.currentThemes[themeName]);\n                alert(\"Theme copied to clipboard\");\n            });\n            // Add to final element\n            availableThemesElement.appendChild(a);\n        }\n        console.log(\"Done updating theme list\");\n    }\n}\n","function m_confirmation() {\n    return prompt(\"Confirm? Type 'y' or 'n'\") === 'y';\n}\nexport const confirmation = m_confirmation;\n","export class ImageLoadingOptimizer {\n    constructor() {\n    }\n    handleNewImage(image) {\n        image.loading = \"lazy\";\n        image.decoding = \"async\";\n    }\n    createMutationObserver() {\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                if (mutation.type == \"childList\" && mutation.addedNodes.length > 0) {\n                    mutation.addedNodes.forEach((node) => {\n                        if (node instanceof Element) {\n                            if (node.tagName == 'IMG') {\n                                this.handleNewImage(node);\n                            }\n                        }\n                    });\n                }\n            }\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(document.body, {\n            childList: true,\n            subtree: true\n        });\n    }\n    processCurrentImages() {\n        document.querySelectorAll(\"img\").forEach((img) => {\n            this.handleNewImage(img);\n        });\n    }\n    onLoad() {\n        console.log(\"Begin optimizing image loading\");\n        this.processCurrentImages();\n        this.createMutationObserver();\n    }\n}\n","export class LoadingScreen {\n    textMutationObserver = null;\n    textSlideInElement = null;\n    updateAvailableText = \"\";\n    currentVersion = \"\";\n    constructor() {\n    }\n    checkForUpdates() {\n        this.currentVersion = \"v\" + chrome.runtime.getManifest().version;\n        fetch(\"https://api.github.com/repos/CariLT01/teamsplus-extension/releases/latest\")\n            .then(response => response.json())\n            .then((data) => {\n            const tagName = data.tag_name;\n            if (tagName && tagName != this.currentVersion) {\n                this.updateAvailableText = \"Update available: \" + this.currentVersion + \" â†’ \" + tagName;\n                this.setTextContent();\n            }\n            else if (tagName == this.currentVersion) {\n                this.updateAvailableText = \"<p style='font-weight: normal; font-size: 12px'>Up to date</p>\";\n                this.setTextContent();\n            }\n        }).catch((err) => {\n            console.error(\"Failed to check for updates: \", err);\n        });\n    }\n    setTextContent() {\n        if (!this.textSlideInElement)\n            return;\n        const extensionVersion = chrome.runtime.getManifest().version;\n        this.textSlideInElement.innerHTML = \"Loading Microsoft Teams...<br><br><p style='font-weight: normal; font-size: 16px;'>TeamsPlus v\" + extensionVersion + \"</p>\" + this.updateAvailableText;\n    }\n    startMutationObserver() {\n        this.checkForUpdates();\n        this.textMutationObserver = new MutationObserver((mutations) => {\n            const textSlideIn = document.querySelector(\".text-slide-in\");\n            if (textSlideIn) {\n                this.textSlideInElement = textSlideIn;\n                this.setTextContent();\n                if (this.textMutationObserver) {\n                    this.textMutationObserver.disconnect();\n                }\n            }\n        });\n        this.textMutationObserver.observe(document.body, {\n            subtree: true,\n            childList: true,\n        });\n    }\n}\n","export class RealtimeUpdatesManager {\n    stylesRuntime;\n    dataManager;\n    constructor(dataManager, stylesRuntime) {\n        this.stylesRuntime = stylesRuntime;\n        this.dataManager = dataManager;\n    }\n    detectChange() {\n        console.log(\"start change detect\");\n        chrome.storage.onChanged.addListener(async (changes, areaName) => {\n            if (areaName === 'local') { // 'sync' refers to chrome.storage.sync\n                // Loop through the changed items\n                for (let key in changes) {\n                    if (changes.hasOwnProperty(key)) {\n                        if (key == \"themeData\") {\n                            console.log(\"Change detected!\");\n                            await this.dataManager.loadAll();\n                            this.stylesRuntime.deleteStyle();\n                            this.stylesRuntime.applyBackgrounds();\n                            this.stylesRuntime.applyColors();\n                            this.stylesRuntime.applyFonts(null);\n                        }\n                    }\n                }\n            }\n        });\n    }\n}\n","import { CLASS_PROPERTIES } from \"../shared\";\nlet USE_FULL_BACKGROUND = true;\nexport class RuntimeStyles {\n    styleElement = null;\n    emojithis = null;\n    dataManager;\n    observer = null;\n    blurBackgroundObserver = null;\n    blurElementQueue = [];\n    constructor(dataManager) {\n        this.dataManager = dataManager;\n    }\n    p_dataManagerExists() {\n        if (this.dataManager == null) {\n            throw new Error(\"Where is data manager\");\n        }\n    }\n    p_emojiThisExists() {\n        if (this.emojithis == null) {\n            throw new Error(\"where emojithis\");\n        }\n    }\n    p_addBackgroundImageToMessageBackground(target) {\n        // Get the thing\n        if (this.dataManager == null) {\n            throw new Error(\"No data manager\");\n        }\n        ;\n        const backgroundStyle = this.dataManager.currentData[\"backgrounds\"][\"channelAndChatBackground\"];\n        if (backgroundStyle == null) {\n            throw new Error(\"Data style failed to find\");\n        }\n        ;\n        if (backgroundStyle == \"none\") {\n            target.style.background = \"\";\n            console.log(\"Backgrounds: none applied\");\n            return;\n        }\n        target.style.background = backgroundStyle;\n        console.log(\"Backgrounds: applied: \", backgroundStyle);\n    }\n    p_getBackgroundRGBA(el) {\n        const bg1 = window.getComputedStyle(el);\n        const bg = bg1.backgroundColor;\n        // matches rgb(r,g,b) or rgba(r,g,b,a)\n        const match = bg.match(/rgba?\\((\\d+), (\\d+), (\\d+)(?:, ([\\d.]+))?\\)/);\n        if (!match)\n            return null;\n        return {\n            r: parseInt(match[1]),\n            g: parseInt(match[2]),\n            b: parseInt(match[3]),\n            a: match[4] !== undefined ? (Math.min(parseFloat(match[4]), parseFloat(bg1.opacity))) : 1\n        };\n    }\n    blurProcessElement(el) {\n        // Ignore apps menu\n        if (el.closest(\".apps-menu\") != null)\n            return;\n        if (el instanceof HTMLButtonElement)\n            return;\n        if (this.dataManager == null)\n            return;\n        const elementColor = this.p_getBackgroundRGBA(el);\n        if (elementColor == null)\n            return;\n        const elementTransparency = Math.min(elementColor.a, parseFloat(this.dataManager.currentData[\"backgrounds\"][\"interfaceOpacity\"]));\n        if (el.style.backgroundColor != \"\") {\n            el.style.backgroundColor = \"\";\n            console.log(\"Removing bg\");\n        }\n        el.style.backgroundColor = `rgba(${elementColor.r}, ${elementColor.g}, ${elementColor.b}, ${elementTransparency})`;\n        if (elementTransparency > 0) {\n            el.style.backdropFilter = this.dataManager.currentData[\"backgrounds\"][\"backdropFilter\"];\n        }\n    }\n    p_applyFullBackground() {\n        if (this.dataManager == null)\n            return;\n        const backgroundStyle = this.dataManager.currentData[\"backgrounds\"][\"channelAndChatBackground\"];\n        if (backgroundStyle == null) {\n            throw new Error(\"Data style failed to find\");\n        }\n        ;\n        const app = document.getElementById(\"app\");\n        if (app == null) {\n            throw new Error(\"App not found\");\n        }\n        if (backgroundStyle == \"none\") {\n            app.style.background = \"\";\n        }\n        else {\n            app.style.background = backgroundStyle;\n        }\n    }\n    p_blurQueueProcess() {\n        /*requestIdleCallback(() => {\n            console.log(\"Batch process blur\");\n            const batch = this.blurElementQueue.splice(0, 50);\n            batch.forEach((element) => this.blurProcessElement(element));\n            if (this.blurElementQueue.length > 0) this.p_blurQueueProcess();\n        }, {timeout: 50})*/\n        this.blurElementQueue.forEach(element => this.blurProcessElement(element));\n        this.blurElementQueue.length = 0;\n    }\n    p_createBlurMutationObserver() {\n        const app = document.querySelector(\"#app\");\n        app.querySelectorAll(\"*\").forEach((element) => {\n            this.blurElementQueue.push(element);\n        });\n        this.blurBackgroundObserver = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.type == \"childList\") {\n                    mutation.addedNodes.forEach((node) => {\n                        if (node.nodeType == Node.ELEMENT_NODE) {\n                            const element = node;\n                            this.blurElementQueue.push(element);\n                            element.querySelectorAll(\"*\").forEach((childElement) => {\n                                this.blurElementQueue.push(childElement);\n                                //this.blurProcessElement(childElement as HTMLElement)\n                            });\n                        }\n                    });\n                }\n            }\n            this.p_blurQueueProcess();\n        });\n        this.blurBackgroundObserver.observe(document.querySelector(\"#app\"), {\n            childList: true,\n            subtree: true,\n            attributes: true,\n            attributeFilter: [\"class\", \"style\"]\n        });\n    }\n    p_createMutationObserver() {\n        const targetSelector = '[data-tid=\"message-pane-layout\"]';\n        this.observer = new MutationObserver((mutations) => {\n            // Only need to check if the target appeared\n            const target = document.querySelector(targetSelector);\n            if (target) {\n                this.p_addBackgroundImageToMessageBackground(target);\n            }\n        });\n        this.observer.observe(document.body, {\n            childList: true,\n            subtree: true\n        });\n    }\n    getFui() {\n        let fluentProvider = \".fui-FluentProviderr0\";\n        if (window.location.hostname == \"assignments.onenote.com\") {\n            console.log(\"Detected assignments tab, set fluent provider to EDUASSIGN-r0\");\n            fluentProvider = \".fui-FluentProviderEDUASSIGN-r0\";\n        }\n        else if (window.location.hostname == \"outlook.office.com\") {\n            fluentProvider = \".fui-FluentProviderr0\";\n        }\n        else {\n            console.log(\"Detected main Teams interface, set fluent provider to r0\");\n        }\n        return fluentProvider;\n    }\n    applyColors() {\n        this.p_dataManagerExists();\n        console.log(\"applying\");\n        const EMOJI_STYLE = `\r\n        \r\n        .emoji{\r\n            width: 1em;\r\n            height: 1em;\r\n            margin-right: 2px;\r\n            vertical-align: middle;\r\n        }\r\n        `;\n        this.styleElement = document.createElement(\"style\");\n        this.styleElement.type = \"text/css\";\n        let cssContent = \"\";\n        for (const property in this.dataManager.currentData[\"colors\"]) {\n            console.log(\"co: applying \", property);\n            cssContent += `${property}: ${this.dataManager.currentData[\"colors\"][property]} !important;\\n`;\n        }\n        for (const property in this.dataManager.currentData[\"pixelValues\"]) {\n            console.log(\"px: applying \", property);\n            cssContent += `${property}: ${this.dataManager.currentData[\"pixelValues\"][property]} !important; \\n`;\n        }\n        let classCSSContent = \"\";\n        for (const property in this.dataManager.currentData[\"classColors\"]) {\n            const propertyName = CLASS_PROPERTIES[property];\n            classCSSContent += `.${property}{${propertyName}: ${this.dataManager.currentData[\"classColors\"][property]} !important;}\\n`;\n        }\n        // Inject the CSS content into the <style> element\n        this.styleElement.innerHTML = `${this.getFui()} {\\n${cssContent}\\n} ${classCSSContent}\\n${EMOJI_STYLE}`;\n        console.log(this.styleElement.innerHTML);\n        document.head.appendChild(this.styleElement);\n    }\n    applyBackgrounds() {\n        if (this.dataManager == null)\n            return;\n        this.p_applyFullBackground();\n        const isFullBackgroundExperienceEnabled = this.dataManager.currentData[\"backgrounds\"][\"fullBackgroundExperience\"] === \"true\";\n        if (this.observer == null && isFullBackgroundExperienceEnabled == false) {\n            console.log(\"INITIALIZE MUTATION OBSERVER\");\n            this.p_createMutationObserver();\n            const chatBoxes = document.querySelectorAll('[data-tid=\"message-pane-layout\"]');\n            chatBoxes.forEach((v) => {\n                this.p_addBackgroundImageToMessageBackground(v);\n            });\n        }\n        if (this.blurBackgroundObserver == null && isFullBackgroundExperienceEnabled == true) {\n            console.log(\"INITIALIZE BLUR MUTATION OBSERVER\");\n            this.p_createBlurMutationObserver();\n        }\n    }\n    applyFonts(parent) {\n        this.p_dataManagerExists();\n        this.emojithis = document.createElement(\"style\");\n        this.emojithis.type = \"text/css\";\n        this.p_emojiThisExists();\n        if (this.dataManager.currentData[\"fonts\"] == null) {\n            return;\n        }\n        this.emojithis = document.createElement(\"style\");\n        this.emojithis.type = \"text/css\";\n        let cssContent = `--fontFamilyBase: ${this.dataManager.currentData[\"fonts\"][\"fontFamily\"]} !important;}`;\n        let additionalImports = this.dataManager.currentData[\"fonts\"][\"imports\"];\n        let fuiContent = `${this.getFui()} {\\n${cssContent}\\n}`;\n        let bodyContent = `* {\\n${cssContent}\\n}`;\n        this.emojithis.innerHTML = `${additionalImports}\\n${bodyContent}\\n${fuiContent}`;\n        console.log(this.emojithis.innerHTML);\n        if (parent == null) {\n            document.head.appendChild(this.emojithis);\n            return this.emojithis;\n        }\n        else {\n            parent.appendChild(this.emojithis);\n            return this.emojithis;\n        }\n    }\n    deleteFontsStyle() {\n        if (this.emojithis == null)\n            return;\n        this.emojithis.remove();\n        this.emojithis = null;\n    }\n    deleteStyle() {\n        if (this.styleElement == null)\n            return;\n        this.styleElement.remove();\n        this.styleElement = null;\n    }\n}\n","import twemoji from \"twemoji\";\nconst onNewEmojiWrapper = (element) => {\n    if (element.getAttribute(\"twemoji-processed\") == \"true\")\n        return; // Avoid twemoji.parse()\n    //console.log(\"New emoji IMG warpper detected, parsing twemoji\");\n    try {\n        const parent = element.parentElement;\n        if (parent == null)\n            return;\n        const originalParent = parent.parentNode;\n        if (originalParent == null) {\n            console.log(parent);\n            throw new Error(\"No original parent\");\n        }\n        const unicode = element.getAttribute(\"alt\");\n        const originalRect = element.getBoundingClientRect();\n        if (unicode == null) {\n            console.error(`Unicode not found`);\n        }\n        else {\n            if (element.querySelector(\".fui-ChatMyMessage\") == null) {\n                parent.outerHTML = `${unicode}`;\n            }\n            else {\n                parent.innerHTML = `${unicode}`;\n            }\n            const parsedImg = twemoji.parse(originalParent, {\n                base: \"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/\",\n                folder: \"svg\", // or \"svg\" for vector format\n                ext: \".svg\" // or \".svg\"\n            });\n            parsedImg.style.width = `${originalRect.width}px !important`;\n            parsedImg.style.height = `${originalRect.height}px !important`;\n        }\n    }\n    catch (err) {\n        console.error(\"Failed to convert emoji img to chr\", err);\n    }\n    finally {\n        //console.log(\"Convert img to char success\");\n        element.setAttribute(\"twemoji-processed\", \"true\");\n    }\n};\nexport class TwemojiRuntime {\n    dataManager;\n    nodeProcessQueueEmoji = [];\n    nodeProcessQueueMessages = [];\n    constructor(dataManager) {\n        this.dataManager = dataManager;\n    }\n    p_dataManagerExists() {\n        if (this.dataManager == null) {\n            throw new Error(\"Where is data manager\");\n        }\n    }\n    async applyTwemoji() {\n        this.p_dataManagerExists();\n        const twemojiEnabled = await this.dataManager.currentData.emojis[\"set\"] == \"twemoji\";\n        if (twemojiEnabled == false) {\n            console.error(\"Twemoji is not enabled.Skipping Twemoji\");\n            return;\n        }\n        this.detectNewMessages();\n    }\n    processQueueEmojis() {\n        requestIdleCallback(() => {\n            const batch = this.nodeProcessQueueEmoji.splice(0, 50);\n            batch.forEach((element) => onNewEmojiWrapper(element));\n            if (this.nodeProcessQueueEmoji.length > 0)\n                this.processQueueEmojis();\n        }, { timeout: 500 });\n    }\n    processQueueMessages() {\n        requestIdleCallback(() => {\n            const batch = this.nodeProcessQueueMessages.splice(0, 50);\n            batch.forEach((element) => onNewEmojiWrapper(element));\n            if (this.nodeProcessQueueMessages.length > 0)\n                this.processQueueMessages();\n        }, { timeout: 500 });\n    }\n    emojiPrebatchProcess(element) {\n        if (element instanceof HTMLImageElement) {\n            element.removeAttribute(\"src\"); // stops the browser from fetching the image\n            element.style.display = \"none\";\n        }\n    }\n    detectNewMessages() {\n        // Target the parent container where messages are added (e.g., a chat container)\n        const targetNode = document.body; // Replace with a specific parent if possible\n        // Observer configuration\n        const config = {\n            childList: true, // Watch for direct child additions/removals\n            subtree: true, // Watch all descendants (not just direct children)\n        };\n        // Callback when mutations are detected\n        const callback = (mutationsList, observer) => {\n            for (const mutation of mutationsList) {\n                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n                    // Check each added node for the target element\n                    mutation.addedNodes.forEach((node) => {\n                        if (!(node instanceof HTMLElement || node instanceof DocumentFragment))\n                            return;\n                        // Handle direct matches (if the node itself is the wrapper)\n                        if (node instanceof HTMLElement && node.dataset.testid === 'message-wrapper') {\n                            this.emojiPrebatchProcess(node);\n                            this.nodeProcessQueueEmoji.push(node);\n                        }\n                        if (node instanceof HTMLElement && node.dataset.tid === 'chat-pane-compose-message-footer') {\n                            this.emojiPrebatchProcess(node);\n                            this.nodeProcessQueueEmoji.push(node);\n                        }\n                        if (node instanceof HTMLElement && node.getAttribute(\"itemtype\") == \"http://schema.skype.com/Emoji\") {\n                            this.emojiPrebatchProcess(node);\n                            this.nodeProcessQueueEmoji.push(node);\n                        }\n                        if (node instanceof HTMLElement && node.dataset.inp === 'message-hover-reactions') {\n                            this.emojiPrebatchProcess(node);\n                            this.nodeProcessQueueEmoji.push(node);\n                        }\n                        if (node instanceof HTMLElement && node.dataset.tid === 'emoji-tab-category-grid') {\n                            this.emojiPrebatchProcess(node);\n                            this.nodeProcessQueueEmoji.push(node);\n                        }\n                        // Handle nested matches (if the wrapper is inside the added node)\n                        if (node instanceof HTMLElement || node instanceof DocumentFragment) {\n                            const wrappers = node.querySelectorAll('[data-testid=\"message-wrapper\"]');\n                            wrappers.forEach((wrapper, index) => this.nodeProcessQueueMessages.push(wrapper));\n                            const emojiImgs = node.querySelectorAll('[itemtype=\"http://schema.skype.com/Emoji\"]');\n                            emojiImgs.forEach((img, index) => {\n                                this.emojiPrebatchProcess(img);\n                                this.nodeProcessQueueEmoji.push(img);\n                            });\n                            const messageHoverReactions = node.querySelectorAll('[data-inp=\"message-hover-reactions\"]');\n                            messageHoverReactions.forEach((img, index) => this.nodeProcessQueueMessages.push(img));\n                            const emojiTab = node.querySelectorAll('[data-tid=\"emoji-tab-category-grid\"]');\n                            emojiTab.forEach((img, index) => this.nodeProcessQueueMessages.push(img));\n                        }\n                    });\n                }\n            }\n            if (this.nodeProcessQueueMessages.length > 0)\n                this.processQueueMessages();\n            if (this.nodeProcessQueueEmoji.length > 0)\n                this.processQueueEmojis();\n        };\n        // Return a cleanup function to disconnect later\n        const onNewMessageWrapper = (element) => {\n            console.log('New message wrapper detected:', element, \", parsing twemoji\");\n            twemoji.parse(element, {\n                base: \"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/\",\n                folder: \"72x72\", // or \"svg\" for vector format\n                ext: \".png\" // or \".svg\"\n            });\n        };\n        const observer = new MutationObserver(callback);\n        observer.observe(targetNode, config);\n    }\n}\n","/**\n * File: shared.ts\n *\n * Stores shared variables / constants between main.ts and popup.ts\n *\n */\nimport { aGROUP_DESCRIPTIONS } from \"./contribution/descriptions\";\n// CSS Variables for colors\nconst DefaultColors = {\n    \"--colorNeutralForeground1\": \"#242424\",\n    \"--colorNeutralForeground1Hover\": \"#242424\",\n    \"--colorNeutralForeground1Pressed\": \"#242424\",\n    \"--colorNeutralForeground1Selected\": \"#242424\",\n    \"--colorNeutralForeground2\": \"#424242\",\n    \"--colorNeutralForeground2Hover\": \"#242424\",\n    \"--colorNeutralForeground2Pressed\": \"#242424\",\n    \"--colorNeutralForeground2Selected\": \"#242424\",\n    \"--colorNeutralForeground2BrandHover\": \"#5b5fc7\",\n    \"--colorNeutralForeground2BrandPressed\": \"#4f52b2\",\n    \"--colorNeutralForeground2BrandSelected\": \"#5b5fc7\",\n    \"--colorNeutralForeground3\": \"#616161\",\n    \"--colorNeutralForeground3Hover\": \"#424242\",\n    \"--colorNeutralForeground3Pressed\": \"#424242\",\n    \"--colorNeutralForeground3Selected\": \"#424242\",\n    \"--colorNeutralForeground3BrandHover\": \"#5b5fc7\",\n    \"--colorNeutralForeground3BrandPressed\": \"#4f52b2\",\n    \"--colorNeutralForeground3BrandSelected\": \"#5b5fc7\",\n    \"--colorNeutralForeground4\": \"#707070\",\n    \"--colorNeutralForegroundDisabled\": \"#bdbdbd\",\n    \"--colorNeutralForegroundInvertedDisabled\": \"rgba(255, 255, 255, 0.4)\",\n    \"--colorBrandForegroundLink\": \"#4f52b2\",\n    \"--colorBrandForegroundLinkHover\": \"#444791\",\n    \"--colorBrandForegroundLinkPressed\": \"#383966\",\n    \"--colorBrandForegroundLinkSelected\": \"#4f52b2\",\n    \"--colorNeutralForeground2Link\": \"#424242\",\n    \"--colorNeutralForeground2LinkHover\": \"#242424\",\n    \"--colorNeutralForeground2LinkPressed\": \"#242424\",\n    \"--colorNeutralForeground2LinkSelected\": \"#242424\",\n    \"--colorCompoundBrandForeground1\": \"#5b5fc7\",\n    \"--colorCompoundBrandForeground1Hover\": \"#4f52b2\",\n    \"--colorCompoundBrandForeground1Pressed\": \"#444791\",\n    \"--colorBrandForeground1\": \"#5b5fc7\",\n    \"--colorBrandForeground2\": \"#4f52b2\",\n    \"--colorBrandForeground2Hover\": \"#444791\",\n    \"--colorBrandForeground2Pressed\": \"#333357\",\n    \"--colorNeutralForeground1Static\": \"#242424\",\n    \"--colorNeutralForegroundStaticInverted\": \"#ffffff\",\n    \"--colorNeutralForegroundInverted\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedHover\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedPressed\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedSelected\": \"#ffffff\",\n    \"--colorNeutralForegroundInverted2\": \"#ffffff\",\n    \"--colorNeutralForegroundOnBrand\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedLink\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedLinkHover\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedLinkPressed\": \"#ffffff\",\n    \"--colorNeutralForegroundInvertedLinkSelected\": \"#ffffff\",\n    \"--colorBrandForegroundInverted\": \"#7f85f5\",\n    \"--colorBrandForegroundInvertedHover\": \"#9299f7\",\n    \"--colorBrandForegroundInvertedPressed\": \"#7f85f5\",\n    \"--colorBrandForegroundOnLight\": \"#5b5fc7\",\n    \"--colorBrandForegroundOnLightHover\": \"#4f52b2\",\n    \"--colorBrandForegroundOnLightPressed\": \"#3d3e78\",\n    \"--colorBrandForegroundOnLightSelected\": \"#444791\",\n    \"--colorNeutralBackground1\": \"#ffffff\",\n    \"--colorNeutralBackground1Hover\": \"#f5f5f5\",\n    \"--colorNeutralBackground1Pressed\": \"#e0e0e0\",\n    \"--colorNeutralBackground1Selected\": \"#ebebeb\",\n    \"--colorNeutralBackground2\": \"#fafafa\",\n    \"--colorNeutralBackground2Hover\": \"#f0f0f0\",\n    \"--colorNeutralBackground2Pressed\": \"#dbdbdb\",\n    \"--colorNeutralBackground2Selected\": \"#e6e6e6\",\n    \"--colorNeutralBackground3\": \"#f5f5f5\",\n    \"--colorNeutralBackground3Hover\": \"#ebebeb\",\n    \"--colorNeutralBackground3Pressed\": \"#d6d6d6\",\n    \"--colorNeutralBackground3Selected\": \"#e0e0e0\",\n    \"--colorNeutralBackground4\": \"#f0f0f0\",\n    \"--colorNeutralBackground4Hover\": \"#fafafa\",\n    \"--colorNeutralBackground4Pressed\": \"#f5f5f5\",\n    \"--colorNeutralBackground4Selected\": \"#ffffff\",\n    \"--colorNeutralBackground5\": \"#ebebeb\",\n    \"--colorNeutralBackground5Hover\": \"#f5f5f5\",\n    \"--colorNeutralBackground5Pressed\": \"#f0f0f0\",\n    \"--colorNeutralBackground5Selected\": \"#fafafa\",\n    \"--colorNeutralBackground6\": \"#e6e6e6\",\n    \"--colorNeutralBackgroundInverted\": \"#292929\",\n    \"--colorNeutralBackgroundStatic\": \"#333333\",\n    \"--colorNeutralBackgroundAlpha\": \"rgba(255,255,255,0.50)\",\n    \"--colorNeutralBackgroundAlpha2\": \"rgba(255,255,255,0.80)\",\n    \"--colorSubtleBackgroundHover\": \"#f5f5f5\",\n    \"--colorSubtleBackgroundPressed\": \"#e0e0e0\",\n    \"--colorSubtleBackgroundSelected\": \"#ebebeb\",\n    \"--colorSubtleBackgroundLightAlphaHover\": \"rgba(255, 255, 255, 0.7)\",\n    \"--colorSubtleBackgroundLightAlphaPressed\": \"rgba(255, 255, 255, 0.5)\",\n    \"--colorSubtleBackgroundInvertedHover\": \"rgba(0, 0, 0, 0.1)\",\n    \"--colorSubtleBackgroundInvertedPressed\": \"rgba(0, 0, 0, 0.3)\",\n    \"--colorSubtleBackgroundInvertedSelected\": \"rgba(0, 0, 0, 0.2)\",\n    \"--colorNeutralBackgroundDisabled\": \"#f0f0f0\",\n    \"--colorNeutralBackgroundInvertedDisabled\": \"rgba(255, 255, 255, 0.1)\",\n    \"--colorNeutralStencil1\": \"#e6e6e6\",\n    \"--colorNeutralStencil2\": \"#fafafa\",\n    \"--colorNeutralStencil1Alpha\": \"rgba(0, 0, 0, 0.1)\",\n    \"--colorNeutralStencil2Alpha\": \"rgba(0, 0, 0, 0.05)\",\n    \"--colorBackgroundOverlay\": \"rgba(0, 0, 0, 0.4)\",\n    \"--colorScrollbarOverlay\": \"rgba(0, 0, 0, 0.5)\",\n    \"--colorBrandBackground\": \"#5b5fc7\",\n    \"--colorBrandBackgroundHover\": \"#4f52b2\",\n    \"--colorBrandBackgroundPressed\": \"#383966\",\n    \"--colorBrandBackgroundSelected\": \"#444791\",\n    \"--colorCompoundBrandBackground\": \"#5b5fc7\",\n    \"--colorCompoundBrandBackgroundHover\": \"#4f52b2\",\n    \"--colorCompoundBrandBackgroundPressed\": \"#444791\",\n    \"--colorBrandBackgroundStatic\": \"#5b5fc7\",\n    \"--colorBrandBackground2\": \"#E8EBFA\",\n    \"--colorBrandBackground2Hover\": \"#dce0fa\",\n    \"--colorBrandBackground2Pressed\": \"#b6bcfa\",\n    \"--colorBrandBackground3Static\": \"#444791\",\n    \"--colorBrandBackground4Static\": \"#383966\",\n    \"--colorBrandBackgroundInverted\": \"#ffffff\",\n    \"--colorBrandBackgroundInvertedHover\": \"#e8ebfa\",\n    \"--colorBrandBackgroundInvertedPressed\": \"#c5cbfa\",\n    \"--colorBrandBackgroundInvertedSelected\": \"#dce0fa\",\n    \"--colorNeutralCardBackground\": \"#fafafa\",\n    \"--colorNeutralCardBackgroundHover\": \"#ffffff\",\n    \"--colorNeutralCardBackgroundPressed\": \"#f5f5f5\",\n    \"--colorNeutralCardBackgroundSelected\": \"#ebebeb\",\n    \"--colorNeutralCardBackgroundDisabled\": \"#f0f0f0\",\n    \"--colorNeutralStrokeAccessible\": \"#616161\",\n    \"--colorNeutralStrokeAccessibleHover\": \"#575757\",\n    \"--colorNeutralStrokeAccessiblePressed\": \"#4d4d4d\",\n    \"--colorNeutralStrokeAccessibleSelected\": \"#5b5fc7\",\n    \"--colorNeutralStroke1\": \"#d1d1d1\",\n    \"--colorNeutralStroke1Hover\": \"#c7c7c7\",\n    \"--colorNeutralStroke1Pressed\": \"#b3b3b3\",\n    \"--colorNeutralStroke1Selected\": \"#bdbdbd\",\n    \"--colorNeutralStroke2\": \"#e0e0e0\",\n    \"--colorNeutralStroke3\": \"#f0f0f0\",\n    \"--colorNeutralStrokeSubtle\": \"#e0e0e0\",\n    \"--colorNeutralStrokeOnBrand\": \"#ffffff\",\n    \"--colorNeutralStrokeOnBrand2\": \"#ffffff\",\n    \"--colorNeutralStrokeOnBrand2Hover\": \"#ffffff\",\n    \"--colorNeutralStrokeOnBrand2Pressed\": \"#ffffff\",\n    \"--colorNeutralStrokeOnBrand2Selected\": \"#ffffff\",\n    \"--colorBrandStroke1\": \"#5b5fc7\",\n    \"--colorBrandStroke2\": \"#c5cbfa\",\n    \"--colorBrandStroke2Hover\": \"#aab1fa\",\n    \"--colorBrandStroke2Pressed\": \"#5b5fc7\",\n    \"--colorBrandStroke2Contrast\": \"#c5cbfa\",\n    \"--colorCompoundBrandStroke\": \"#5b5fc7\",\n    \"--colorCompoundBrandStrokeHover\": \"#4f52b2\",\n    \"--colorCompoundBrandStrokePressed\": \"#444791\",\n    \"--colorNeutralStrokeDisabled\": \"#e0e0e0\",\n    \"--colorNeutralStrokeInvertedDisabled\": \"rgba(255, 255, 255, 0.4)\",\n    \"--colorNeutralStrokeAlpha\": \"rgba(0, 0, 0, 0.05)\",\n    \"--colorNeutralStrokeAlpha2\": \"rgba(255, 255, 255, 0.2)\",\n    \"--colorStrokeFocus1\": \"#ffffff\",\n    \"--colorStrokeFocus2\": \"#000000\",\n    \"--colorNeutralShadowAmbient\": \"rgba(0,0,0,0.12)\",\n    \"--colorNeutralShadowKey\": \"rgba(0,0,0,0.14)\",\n    \"--colorNeutralShadowAmbientLighter\": \"rgba(0,0,0,0.06)\",\n    \"--colorNeutralShadowKeyLighter\": \"rgba(0,0,0,0.07)\",\n    \"--colorNeutralShadowAmbientDarker\": \"rgba(0,0,0,0.20)\",\n    \"--colorNeutralShadowKeyDarker\": \"rgba(0,0,0,0.24)\",\n    \"--colorBrandShadowAmbient\": \"rgba(0,0,0,0.30)\",\n    \"--colorBrandShadowKey\": \"rgba(0,0,0,0.25)\",\n    \"--colorPaletteRedBackground1\": \"#fdf6f6\",\n    \"--colorPaletteRedBackground2\": \"#f1bbbc\",\n    \"--colorPaletteRedBackground3\": \"#d13438\",\n    \"--colorPaletteRedForeground1\": \"#bc2f32\",\n    \"--colorPaletteRedForeground2\": \"#751d1f\",\n    \"--colorPaletteRedForeground3\": \"#d13438\",\n    \"--colorPaletteRedBorderActive\": \"#d13438\",\n    \"--colorPaletteRedBorder1\": \"#f1bbbc\",\n    \"--colorPaletteRedBorder2\": \"#d13438\",\n    \"--colorPaletteGreenBackground1\": \"#f1faf1\",\n    \"--colorPaletteGreenBackground2\": \"#9fd89f\",\n    \"--colorPaletteGreenBackground3\": \"#107c10\",\n    \"--colorPaletteGreenForeground1\": \"#0e700e\",\n    \"--colorPaletteGreenForeground2\": \"#094509\",\n    \"--colorPaletteGreenForeground3\": \"#107c10\",\n    \"--colorPaletteGreenBorderActive\": \"#107c10\",\n    \"--colorPaletteGreenBorder1\": \"#9fd89f\",\n    \"--colorPaletteGreenBorder2\": \"#107c10\",\n    \"--colorPaletteDarkOrangeBackground1\": \"#fdf6f3\",\n    \"--colorPaletteDarkOrangeBackground2\": \"#f4bfab\",\n    \"--colorPaletteDarkOrangeBackground3\": \"#da3b01\",\n    \"--colorPaletteDarkOrangeForeground1\": \"#c43501\",\n    \"--colorPaletteDarkOrangeForeground2\": \"#7a2101\",\n    \"--colorPaletteDarkOrangeForeground3\": \"#da3b01\",\n    \"--colorPaletteDarkOrangeBorderActive\": \"#da3b01\",\n    \"--colorPaletteDarkOrangeBorder1\": \"#f4bfab\",\n    \"--colorPaletteDarkOrangeBorder2\": \"#da3b01\",\n    \"--colorPaletteYellowBackground1\": \"#fffef5\",\n    \"--colorPaletteYellowBackground2\": \"#fef7b2\",\n    \"--colorPaletteYellowBackground3\": \"#fde300\",\n    \"--colorPaletteYellowForeground1\": \"#817400\",\n    \"--colorPaletteYellowForeground2\": \"#817400\",\n    \"--colorPaletteYellowForeground3\": \"#fde300\",\n    \"--colorPaletteYellowBorderActive\": \"#fde300\",\n    \"--colorPaletteYellowBorder1\": \"#fef7b2\",\n    \"--colorPaletteYellowBorder2\": \"#fde300\",\n    \"--colorPaletteBerryBackground1\": \"#fdf5fc\",\n    \"--colorPaletteBerryBackground2\": \"#edbbe7\",\n    \"--colorPaletteBerryBackground3\": \"#c239b3\",\n    \"--colorPaletteBerryForeground1\": \"#af33a1\",\n    \"--colorPaletteBerryForeground2\": \"#6d2064\",\n    \"--colorPaletteBerryForeground3\": \"#c239b3\",\n    \"--colorPaletteBerryBorderActive\": \"#c239b3\",\n    \"--colorPaletteBerryBorder1\": \"#edbbe7\",\n    \"--colorPaletteBerryBorder2\": \"#c239b3\",\n    \"--colorPaletteLightGreenBackground1\": \"#f2fbf2\",\n    \"--colorPaletteLightGreenBackground2\": \"#a7e3a5\",\n    \"--colorPaletteLightGreenBackground3\": \"#13a10e\",\n    \"--colorPaletteLightGreenForeground1\": \"#11910d\",\n    \"--colorPaletteLightGreenForeground2\": \"#0b5a08\",\n    \"--colorPaletteLightGreenForeground3\": \"#13a10e\",\n    \"--colorPaletteLightGreenBorderActive\": \"#13a10e\",\n    \"--colorPaletteLightGreenBorder1\": \"#a7e3a5\",\n    \"--colorPaletteLightGreenBorder2\": \"#13a10e\",\n    \"--colorPaletteMarigoldBackground1\": \"#fefbf4\",\n    \"--colorPaletteMarigoldBackground2\": \"#f9e2ae\",\n    \"--colorPaletteMarigoldBackground3\": \"#eaa300\",\n    \"--colorPaletteMarigoldForeground1\": \"#d39300\",\n    \"--colorPaletteMarigoldForeground2\": \"#835b00\",\n    \"--colorPaletteMarigoldForeground3\": \"#eaa300\",\n    \"--colorPaletteMarigoldBorderActive\": \"#eaa300\",\n    \"--colorPaletteMarigoldBorder1\": \"#f9e2ae\",\n    \"--colorPaletteMarigoldBorder2\": \"#eaa300\",\n    \"--colorPaletteRedForegroundInverted\": \"#dc5e62\",\n    \"--colorPaletteGreenForegroundInverted\": \"#359b35\",\n    \"--colorPaletteYellowForegroundInverted\": \"#fef7b2\",\n    \"--colorPaletteDarkRedBackground2\": \"#d69ca5\",\n    \"--colorPaletteDarkRedForeground2\": \"#420610\",\n    \"--colorPaletteDarkRedBorderActive\": \"#750b1c\",\n    \"--colorPaletteCranberryBackground2\": \"#eeacb2\",\n    \"--colorPaletteCranberryForeground2\": \"#6e0811\",\n    \"--colorPaletteCranberryBorderActive\": \"#c50f1f\",\n    \"--colorPalettePumpkinBackground2\": \"#efc4ad\",\n    \"--colorPalettePumpkinForeground2\": \"#712d09\",\n    \"--colorPalettePumpkinBorderActive\": \"#ca5010\",\n    \"--colorPalettePeachBackground2\": \"#ffddb3\",\n    \"--colorPalettePeachForeground2\": \"#8f4e00\",\n    \"--colorPalettePeachBorderActive\": \"#ff8c00\",\n    \"--colorPaletteGoldBackground2\": \"#ecdfa5\",\n    \"--colorPaletteGoldForeground2\": \"#6c5700\",\n    \"--colorPaletteGoldBorderActive\": \"#c19c00\",\n    \"--colorPaletteBrassBackground2\": \"#e0cea2\",\n    \"--colorPaletteBrassForeground2\": \"#553e06\",\n    \"--colorPaletteBrassBorderActive\": \"#986f0b\",\n    \"--colorPaletteBrownBackground2\": \"#ddc3b0\",\n    \"--colorPaletteBrownForeground2\": \"#50301a\",\n    \"--colorPaletteBrownBorderActive\": \"#8e562e\",\n    \"--colorPaletteForestBackground2\": \"#bdd99b\",\n    \"--colorPaletteForestForeground2\": \"#294903\",\n    \"--colorPaletteForestBorderActive\": \"#498205\",\n    \"--colorPaletteSeafoamBackground2\": \"#a8f0cd\",\n    \"--colorPaletteSeafoamForeground2\": \"#00723b\",\n    \"--colorPaletteSeafoamBorderActive\": \"#00cc6a\",\n    \"--colorPaletteDarkGreenBackground2\": \"#9ad29a\",\n    \"--colorPaletteDarkGreenForeground2\": \"#063b06\",\n    \"--colorPaletteDarkGreenBorderActive\": \"#0b6a0b\",\n    \"--colorPaletteLightTealBackground2\": \"#a6e9ed\",\n    \"--colorPaletteLightTealForeground2\": \"#00666d\",\n    \"--colorPaletteLightTealBorderActive\": \"#00b7c3\",\n    \"--colorPaletteTealBackground2\": \"#9bd9db\",\n    \"--colorPaletteTealForeground2\": \"#02494c\",\n    \"--colorPaletteTealBorderActive\": \"#038387\",\n    \"--colorPaletteSteelBackground2\": \"#94c8d4\",\n    \"--colorPaletteSteelForeground2\": \"#00333f\",\n    \"--colorPaletteSteelBorderActive\": \"#005b70\",\n    \"--colorPaletteBlueBackground2\": \"#a9d3f2\",\n    \"--colorPaletteBlueForeground2\": \"#004377\",\n    \"--colorPaletteBlueBorderActive\": \"#0078d4\",\n    \"--colorPaletteRoyalBlueBackground2\": \"#9abfdc\",\n    \"--colorPaletteRoyalBlueForeground2\": \"#002c4e\",\n    \"--colorPaletteRoyalBlueBorderActive\": \"#004e8c\",\n    \"--colorPaletteCornflowerBackground2\": \"#c8d1fa\",\n    \"--colorPaletteCornflowerForeground2\": \"#2c3c85\",\n    \"--colorPaletteCornflowerBorderActive\": \"#4f6bed\",\n    \"--colorPaletteNavyBackground2\": \"#a3b2e8\",\n    \"--colorPaletteNavyForeground2\": \"#001665\",\n    \"--colorPaletteNavyBorderActive\": \"#0027b4\",\n    \"--colorPaletteLavenderBackground2\": \"#d2ccf8\",\n    \"--colorPaletteLavenderForeground2\": \"#3f3682\",\n    \"--colorPaletteLavenderBorderActive\": \"#7160e8\",\n    \"--colorPalettePurpleBackground2\": \"#c6b1de\",\n    \"--colorPalettePurpleForeground2\": \"#341a51\",\n    \"--colorPalettePurpleBorderActive\": \"#5c2e91\",\n    \"--colorPaletteGrapeBackground2\": \"#d9a7e0\",\n    \"--colorPaletteGrapeForeground2\": \"#4c0d55\",\n    \"--colorPaletteGrapeBorderActive\": \"#881798\",\n    \"--colorPaletteLilacBackground2\": \"#e6bfed\",\n    \"--colorPaletteLilacForeground2\": \"#63276d\",\n    \"--colorPaletteLilacBorderActive\": \"#b146c2\",\n    \"--colorPalettePinkBackground2\": \"#f7c0e3\",\n    \"--colorPalettePinkForeground2\": \"#80215d\",\n    \"--colorPalettePinkBorderActive\": \"#e43ba6\",\n    \"--colorPaletteMagentaBackground2\": \"#eca5d1\",\n    \"--colorPaletteMagentaForeground2\": \"#6b0043\",\n    \"--colorPaletteMagentaBorderActive\": \"#bf0077\",\n    \"--colorPalettePlumBackground2\": \"#d696c0\",\n    \"--colorPalettePlumForeground2\": \"#43002b\",\n    \"--colorPalettePlumBorderActive\": \"#77004d\",\n    \"--colorPaletteBeigeBackground2\": \"#d7d4d4\",\n    \"--colorPaletteBeigeForeground2\": \"#444241\",\n    \"--colorPaletteBeigeBorderActive\": \"#7a7574\",\n    \"--colorPaletteMinkBackground2\": \"#cecccb\",\n    \"--colorPaletteMinkForeground2\": \"#343231\",\n    \"--colorPaletteMinkBorderActive\": \"#5d5a58\",\n    \"--colorPalettePlatinumBackground2\": \"#cdd6d8\",\n    \"--colorPalettePlatinumForeground2\": \"#3b4447\",\n    \"--colorPalettePlatinumBorderActive\": \"#69797e\",\n    \"--colorPaletteAnchorBackground2\": \"#bcc3c7\",\n    \"--colorPaletteAnchorForeground2\": \"#202427\",\n    \"--colorPaletteAnchorBorderActive\": \"#394146\",\n    \"--colorStatusSuccessBackground1\": \"#f1faf1\",\n    \"--colorStatusSuccessBackground2\": \"#9fd89f\",\n    \"--colorStatusSuccessBackground3\": \"#107c10\",\n    \"--colorStatusSuccessForeground1\": \"#0e700e\",\n    \"--colorStatusSuccessForeground2\": \"#094509\",\n    \"--colorStatusSuccessForeground3\": \"#107c10\",\n    \"--colorStatusSuccessForegroundInverted\": \"#54b054\",\n    \"--colorStatusSuccessBorderActive\": \"#107c10\",\n    \"--colorStatusSuccessBorder1\": \"#9fd89f\",\n    \"--colorStatusSuccessBorder2\": \"#107c10\",\n    \"--colorStatusWarningBackground1\": \"#fff9f5\",\n    \"--colorStatusWarningBackground2\": \"#fdcfb4\",\n    \"--colorStatusWarningBackground3\": \"#f7630c\",\n    \"--colorStatusWarningForeground1\": \"#bc4b09\",\n    \"--colorStatusWarningForeground2\": \"#8a3707\",\n    \"--colorStatusWarningForeground3\": \"#bc4b09\",\n    \"--colorStatusWarningForegroundInverted\": \"#faa06b\",\n    \"--colorStatusWarningBorderActive\": \"#f7630c\",\n    \"--colorStatusWarningBorder1\": \"#fdcfb4\",\n    \"--colorStatusWarningBorder2\": \"#bc4b09\",\n    \"--colorStatusDangerBackground1\": \"#fdf3f4\",\n    \"--colorStatusDangerBackground2\": \"#eeacb2\",\n    \"--colorStatusDangerBackground3\": \"#c50f1f\",\n    \"--colorStatusDangerForeground1\": \"#b10e1c\",\n    \"--colorStatusDangerForeground2\": \"#6e0811\",\n    \"--colorStatusDangerForeground3\": \"#c50f1f\",\n    \"--colorStatusDangerForegroundInverted\": \"#dc626d\",\n    \"--colorStatusDangerBorderActive\": \"#c50f1f\",\n    \"--colorStatusDangerBorder1\": \"#eeacb2\",\n    \"--colorStatusDangerBorder2\": \"#c50f1f\",\n    \"--colorStatusDangerBackground3Hover\": \"#b10e1c\",\n    \"--colorStatusDangerBackground3Pressed\": \"#960b18\",\n    \"--backgroundCanvas\": \"#fff\",\n    \"--colorAvatar\": \"#5b5fc7\",\n    \"--colorAvatarBackground\": \"#c5cbfa\",\n    \"--colorDefaultBackground7\": \"#F5F5F5\",\n    \"--colorTeamsBrand1Hover\": \"#4f52b2\",\n    \"--colorTeamsBrand1Pressed\": \"#444791\",\n    \"--colorTeamsBrand1Selected\": \"#444791\",\n    \"--colorTeamsNeutralStrokeSubtleAlpha\": \"rgba(0,0,0,.95)\",\n    \"--colorPaletteRedForeground1HCBlack\": \"#bc2f32\",\n    \"--colorPaletteRedBackground3Hover\": \"#BC2E2E\",\n    \"--colorPaletteRedBackground3Pressed\": \"#9F282B\",\n    \"--colorTeamsButtonCompositeHoverShadow1\": \"rgba(93, 91, 212, 0.05)\",\n    \"--colorTeamsButtonCompositeHoverShadow2\": \"rgba(159, 162, 252, 0.08)\",\n    \"--colorTeamsButtonCompositeHoverShadow3\": \"rgba(251, 174, 164, 0.08)\",\n    \"--colorTeamsButtonCompositeHoverShadow4\": \"rgba(121, 207, 255, 0.08)\",\n    \"--colorTeamsButtonCompositeFocusShadow1\": \"rgba(93, 91, 212, 0.1)\",\n    \"--colorTeamsButtonCompositeFocusShadow2\": \"rgba(159, 162, 252, 0.15)\",\n    \"--colorTeamsButtonCompositeFocusShadow3\": \"rgba(251, 174, 164, 0.1)\",\n    \"--colorTeamsButtonCompositeFocusShadow4\": \"rgba(121, 207, 255, 0.1)\",\n    \"--colorTeamsCompositeHoverShadow1\": \"rgba(93, 91, 212, 0.1)\",\n    \"--colorTeamsCompositeHoverShadow2\": \"rgba(159, 162, 252, 0.06)\",\n    \"--colorTeamsCompositeHoverShadow3\": \"rgba(251, 174, 164, 0.1)\",\n    \"--colorTeamsCompositeHoverShadow4\": \"rgba(121, 207, 255, 0.05)\",\n    \"--colorTeamsCompositeActiveShadow1\": \"rgba(93, 91, 212, 0.2)\",\n    \"--colorTeamsCompositeActiveShadow2\": \"rgba(159, 162, 252, 0.12)\",\n    \"--colorTeamsCompositeActiveShadow3\": \"rgba(251, 174, 164, 0.2)\",\n    \"--colorTeamsCompositeActiveShadow4\": \"rgba(121, 207, 255, 0.2)\"\n};\n// CSS Variables for other settings\nconst aDEFAULT_PIXEL_VALUES = {\n    \"--borderRadiusNone\": \"0\",\n    \"--borderRadiusSmall\": \"2px\",\n    \"--borderRadiusMedium\": \"4px\",\n    \"--borderRadiusLarge\": \"6px\",\n    \"--borderRadiusXLarge\": \"8px\",\n    \"--borderRadiusCircular\": \"10000px\",\n    \"--fontSizeBase100\": \"10px\",\n    \"--fontSizeBase200\": \"12px\",\n    \"--fontSizeBase300\": \"14px\",\n    \"--fontSizeBase400\": \"16px\",\n    \"--fontSizeBase500\": \"20px\",\n    \"--fontSizeBase600\": \"24px\",\n    \"--fontSizeHero700\": \"28px\",\n    \"--fontSizeHero800\": \"32px\",\n    \"--fontSizeHero900\": \"40px\",\n    \"--fontSizeHero1000\": \"68px\",\n    \"--lineHeightBase100\": \"14px\",\n    \"--lineHeightBase200\": \"16px\",\n    \"--lineHeightBase300\": \"20px\",\n    \"--lineHeightBase400\": \"22px\",\n    \"--lineHeightBase500\": \"28px\",\n    \"--lineHeightBase600\": \"32px\",\n    \"--lineHeightHero700\": \"36px\",\n    \"--lineHeightHero800\": \"40px\",\n    \"--lineHeightHero900\": \"52px\",\n    \"--lineHeightHero1000\": \"92px\",\n    \"--fontWeightRegular\": \"400\",\n    \"--fontWeightMedium\": \"500\",\n    \"--fontWeightSemibold\": \"600\",\n    \"--fontWeightBold\": \"700\",\n    \"--strokeWidthThin\": \"1px\",\n    \"--strokeWidthThick\": \"2px\",\n    \"--strokeWidthThicker\": \"3px\",\n    \"--strokeWidthThickest\": \"4px\",\n    \"--spacingHorizontalNone\": \"0\",\n    \"--spacingHorizontalXXS\": \"2px\",\n    \"--spacingHorizontalXS\": \"4px\",\n    \"--spacingHorizontalSNudge\": \"6px\",\n    \"--spacingHorizontalS\": \"8px\",\n    \"--spacingHorizontalMNudge\": \"10px\",\n    \"--spacingHorizontalM\": \"12px\",\n    \"--spacingHorizontalL\": \"16px\",\n    \"--spacingHorizontalXL\": \"20px\",\n    \"--spacingHorizontalXXL\": \"24px\",\n    \"--spacingHorizontalXXXL\": \"32px\",\n    \"--spacingVerticalNone\": \"0\",\n    \"--spacingVerticalXXS\": \"2px\",\n    \"--spacingVerticalXS\": \"4px\",\n    \"--spacingVerticalSNudge\": \"6px\",\n    \"--spacingVerticalS\": \"8px\",\n    \"--spacingVerticalMNudge\": \"10px\",\n    \"--spacingVerticalM\": \"12px\",\n    \"--spacingVerticalL\": \"16px\",\n    \"--spacingVerticalXL\": \"20px\",\n    \"--spacingVerticalXXL\": \"24px\",\n    \"--spacingVerticalXXXL\": \"32px\",\n    \"--shadow2\": \"0 0 2px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.14)\",\n    \"--shadow4\": \"0 0 2px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.14)\",\n    \"--shadow8\": \"0 0 2px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.14)\",\n    \"--shadow16\": \"0 0 2px rgba(0,0,0,0.12), 0 8px 16px rgba(0,0,0,0.14)\",\n    \"--shadow28\": \"0 0 8px rgba(0,0,0,0.12), 0 14px 28px rgba(0,0,0,0.14)\",\n    \"--shadow64\": \"0 0 8px rgba(0,0,0,0.12), 0 32px 64px rgba(0,0,0,0.14)\",\n    \"--shadow2Brand\": \"0 0 2px rgba(0,0,0,0.30), 0 1px 2px rgba(0,0,0,0.25)\",\n    \"--shadow4Brand\": \"0 0 2px rgba(0,0,0,0.30), 0 2px 4px rgba(0,0,0,0.25)\",\n    \"--shadow8Brand\": \"0 0 2px rgba(0,0,0,0.30), 0 4px 8px rgba(0,0,0,0.25)\",\n    \"--shadow16Brand\": \"0 0 2px rgba(0,0,0,0.30), 0 8px 16px rgba(0,0,0,0.25)\",\n    \"--shadow28Brand\": \"0 0 8px rgba(0,0,0,0.30), 0 14px 28px rgba(0,0,0,0.25)\",\n    \"--shadow64Brand\": \"0 0 8px rgba(0,0,0,0.30), 0 32px 64px rgba(0,0,0,0.25)\"\n};\n// CSS Classes\n// - Some may not work due to random class gen\nconst aCLASS_COLORS = {\n    \"ff\": \"rgb(36, 36, 36)\",\n    \"oh\": \"rgb(36, 36, 36)\",\n    \"jg\": \"rgb(250, 250, 250)\",\n    \"ui-toolbar__item\": \"rgb(36, 36, 36)\",\n    \"oi\": \"rgb(36, 36, 36)\",\n    \"fui-StyledText\": \"rgb(36, 36, 36)\",\n    \"ui-popup__content__content\": \"#F5F5F5\",\n    \"ui-list__item:hover\": \"rgb(245, 245, 245)\"\n};\n// Fonts\nconst aDEFAULT_FONTS = {\n    \"fontFamily\": '-apple-system, BlinkMacSystemFont, \"Segoe UI\", system-ui, \"Apple Color Emoji\", \"Segoe UI Emoji\", sans-serif',\n    \"imports\": \"\"\n};\n// CSS Class property to change\nconst aCLASS_PROPERTIES = {\n    \"ff\": \"color\",\n    \"oh\": \"color\",\n    \"jg\": \"background\",\n    \"ui-toolbar__item\": \"color\",\n    \"oi\": \"color\",\n    \"fui-StyledText\": \"color\",\n    \"ui-popup__content__content\": \"background\",\n    \"ui-list__item:hover\": \"background\"\n};\nconst aDEFAULT_BACKGROUNDS = {\n    \"channelAndChatBackground\": \"none\",\n    \"fullBackgroundExperience\": \"false\",\n    \"backdropFilter\": \"\",\n    \"interfaceOpacity\": \"0.1\"\n};\nconst aDEFAULT_EMOJIS = {\n    \"set\": \"default\"\n};\n////////// EXPORTS //////////\nexport const DEFAULT_COLORS = DefaultColors;\nexport const DEFAULT_PIXEL_VALUES = aDEFAULT_PIXEL_VALUES;\nexport const DEFAULT_FONTS = aDEFAULT_FONTS;\nexport const CLASS_COLORS = aCLASS_COLORS;\nexport const GROUP_DESCRIPTIONS = aGROUP_DESCRIPTIONS;\nexport const CLASS_PROPERTIES = aCLASS_PROPERTIES;\nexport const DEFAULT_BACKGROUNDS = aDEFAULT_BACKGROUNDS;\nexport const DEFAULT_EMOJIS = aDEFAULT_EMOJIS;\n","import { p_stringToElement } from \"../utils\";\nimport { injectTab } from \"./tabInject\";\nconst APP_LIST_APP_ELEMENT_HTML = `\r\n<span class=\"apps-list-app\">\r\n    <span class=\"apps-list-app-card\" id=\"appListCard\">\r\n        <img src=\"https://cdn-icons-png.flaticon.com/512/1144/1144760.png\" alt=\"App Icon\" class=\"app-icon\" id=\"appIcon\">\r\n        <span class=\"apps-list-filler\"></span>\r\n        <span class=\"app-name\" id=\"appName\">Bob app that is really really cool</span>\r\n    </span>\r\n    <span type=\"button\" class=\"app-pin-button\" id=\"pinApp\">\r\n        <img src=\"https://www.svgrepo.com/show/501306/pin.svg\" alt=\"\" class=\"pin-icon\">\r\n    </span>\r\n</span>\r\n`;\nconst APP_MENU_ELEMENT_HTML = `\r\n<span class=\"apps-menu\" id=\"appsMenu\">\r\n    <span class=\"apps-menu-header\">\r\n        <h3 class=\"apps-menu-title\">TeamsPlus apps</h3>\r\n    </span>\r\n    <span class=\"apps-list\" id=\"appList\">\r\n\r\n\r\n    </span>\r\n</span>\r\n`;\nconst APP_MENU_ICON_SVG = `\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\r\n<svg width=\"800px\" height=\"800px\" viewBox=\"0 0 512 512\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n    <title>apps</title>\r\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n        <g id=\"icon\" fill=\"var(--colorNeutralForeground3)\" transform=\"translate(64.000000, 64.000000)\">\r\n            <path d=\"M64,32 C64,49.664 49.664,64 32,64 C14.336,64 -4.26325641e-14,49.664 -4.26325641e-14,32 C-4.26325641e-14,14.336 14.336,-4.26325641e-14 32,-4.26325641e-14 C49.664,-4.26325641e-14 64,14.336 64,32 Z M224,32 C224,49.664 209.664,64 192,64 C174.336,64 160,49.664 160,32 C160,14.336 174.336,-4.26325641e-14 192,-4.26325641e-14 C209.664,-4.26325641e-14 224,14.336 224,32 Z M64,352 C64,369.664 49.664,384 32,384 C14.336,384 -4.26325641e-14,369.664 -4.26325641e-14,352 C-4.26325641e-14,334.336 14.336,320 32,320 C49.664,320 64,334.336 64,352 Z M224,352 C224,369.664 209.664,384 192,384 C174.336,384 160,369.664 160,352 C160,334.336 174.336,320 192,320 C209.664,320 224,334.336 224,352 Z M64,192 C64,209.664 49.664,224 32,224 C14.336,224 -4.26325641e-14,209.664 -4.26325641e-14,192 C-4.26325641e-14,174.336 14.336,160 32,160 C49.664,160 64,174.336 64,192 Z M224,192 C224,209.664 209.664,224 192,224 C174.336,224 160,209.664 160,192 C160,174.336 174.336,160 192,160 C209.664,160 224,174.336 224,192 Z M384,32 C384,49.664 369.664,64 352,64 C334.336,64 320,49.664 320,32 C320,14.336 334.336,-4.26325641e-14 352,-4.26325641e-14 C369.664,-4.26325641e-14 384,14.336 384,32 Z M384,352 C384,369.664 369.664,384 352,384 C334.336,384 320,369.664 320,352 C320,334.336 334.336,320 352,320 C369.664,320 384,334.336 384,352 Z M384,192 C384,209.664 369.664,224 352,224 C334.336,224 320,209.664 320,192 C320,174.336 334.336,160 352,160 C369.664,160 384,174.336 384,192 Z\" id=\"Combined-Shape\">\r\n\r\n</path>\r\n        </g>\r\n    </g>\r\n</svg>\r\n`;\nconst ANIMATION_DURATION = 250;\nexport class AppsMenuManager {\n    appMenuElement;\n    appMenuButton;\n    appMenuCreated = false;\n    constructor() {\n        this.initializeAppMenu();\n        window.teamsPlusAppsManager = this;\n    }\n    async initializeAppMenu() {\n        await this.createAppMenu();\n        this.createButtonListeners();\n        this.appMenuCreated = true;\n    }\n    async isApplicationPinned(name) {\n        const result = await chrome.storage.local.get([\"pinnedApplications\"]);\n        if (!result.pinnedApplications) {\n            return false;\n        }\n        if (!result.pinnedApplications[name]) {\n            return false;\n        }\n        return true;\n    }\n    async createAppMenu() {\n        this.appMenuElement = p_stringToElement(APP_MENU_ELEMENT_HTML);\n        this.appMenuButton = await injectTab(\"TeamsPlus\", APP_MENU_ICON_SVG);\n        if (this.appMenuButton == null) {\n            throw new Error(\"Failed to inject app menu tab\");\n        }\n        document.body.appendChild(this.appMenuElement);\n    }\n    animateVisibility(visibility) {\n        if (visibility) {\n            this.appMenuElement.animate([\n                { transform: \"translateY(-5%)\", opacity: 0 },\n                { transform: \"translateY(0%)\", opacity: 1 }\n            ], {\n                duration: ANIMATION_DURATION,\n                easing: \"ease-out\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n        }\n        else {\n            this.appMenuElement.animate([\n                { transform: \"translateY(0%)\", opacity: 1 },\n                { transform: \"translateY(-5%)\", opacity: 0 }\n            ], {\n                duration: ANIMATION_DURATION,\n                easing: \"ease-in\",\n                iterations: 1,\n                fill: \"forwards\"\n            });\n        }\n    }\n    toggleVisibility() {\n        //this.appMenuElement.classList.toggle(\"active\");\n        if (this.appMenuElement.classList.contains(\"active\")) {\n            this.setVisiblity(false);\n        }\n        else {\n            this.setVisiblity(true);\n        }\n    }\n    setVisiblity(visibility) {\n        if (visibility == false && this.appMenuElement.classList.contains(\"active\") == true) {\n            this.animateVisibility(false);\n            setTimeout(() => {\n                this.appMenuElement.classList.remove(\"active\");\n            }, ANIMATION_DURATION);\n        }\n        else {\n            if (this.appMenuElement.classList.contains(\"active\") == false && visibility == true) {\n                this.appMenuElement.classList.add(\"active\");\n                // Set position\n                const left = this.appMenuButton.clientLeft + this.appMenuButton.clientWidth;\n                const top = this.appMenuButton.clientTop + this.appMenuButton.clientHeight;\n                this.appMenuElement.style.left = `${left}px`;\n                this.appMenuElement.style.top = `${top}px`;\n                this.animateVisibility(true);\n            }\n        }\n    }\n    createButtonListeners() {\n        this.appMenuButton.addEventListener(\"click\", (event) => {\n            this.toggleVisibility();\n            if (event.target !== event.currentTarget && this.appMenuElement.contains(event.target)) {\n                // click was inside the menu -> ignore\n                return;\n            }\n            event.stopPropagation();\n        });\n        document.addEventListener(\"click\", (event) => this.handleDocumentClick(event));\n        this.appMenuElement.addEventListener(\"click\", (event) => {\n            event.stopPropagation();\n        });\n    }\n    handleDocumentClick(event) {\n        if (this.appMenuButton.classList.contains(\"active\") == false)\n            return;\n        // check if the click is outside the menu and the button\n        if (!this.appMenuElement.contains(event.target) &&\n            !this.appMenuButton.contains(event.target)) {\n            this.setVisiblity(false);\n        }\n    }\n    async addAppAndGetButton(appName, imageSource, svgSource) {\n        await new Promise(resolve => { const check = () => (this.appMenuCreated ? resolve(undefined) : setTimeout(check, 50)); check(); });\n        if (this.appMenuCreated == false) {\n            throw new Error(\"Attempt to create and add app before app menu initialization!\");\n        }\n        const buttons = [];\n        /// Create app thing\n        const appElement = p_stringToElement(APP_LIST_APP_ELEMENT_HTML);\n        const appIconElement = appElement.querySelector(\"#appIcon\");\n        const appNameElement = appElement.querySelector(\"#appName\");\n        appNameElement.textContent = appName;\n        appIconElement.src = imageSource;\n        const appMenuAppList = this.appMenuElement.querySelector(\"#appList\");\n        appMenuAppList.appendChild(appElement);\n        console.log(\"Successfully added app in app menu\");\n        const cardButton = appElement.querySelector(\"#appListCard\");\n        cardButton.addEventListener(\"click\", () => {\n            this.setVisiblity(false);\n        });\n        const pinButton = appElement.querySelector(\"#pinApp\");\n        if (await this.isApplicationPinned(appName)) {\n            pinButton.style.backgroundColor = \"#655bffff\";\n        }\n        pinButton.addEventListener(\"click\", async () => {\n            const r = await chrome.storage.local.get([\"pinnedApplications\"]);\n            let pinnedApplications = r.pinnedApplications || {};\n            pinnedApplications[appName] = !(pinnedApplications[appName] || false);\n            if (pinnedApplications[appName] == true) {\n                pinButton.style.backgroundColor = \"#655bffff\";\n            }\n            else {\n                pinButton.style.backgroundColor = \"transparent\";\n            }\n            chrome.storage.local.set({ pinnedApplications });\n        });\n        buttons.push(cardButton);\n        // If pinned, the tab button\n        if (await this.isApplicationPinned(appName)) {\n            const tabButton = await injectTab(appName, svgSource || `<img src=\"${imageSource}\" alt=\"Icon\">`);\n            buttons.push(tabButton);\n        }\n        return buttons;\n    }\n}\n","import { p_stringToElement } from \"../utils\";\nconst code = `\r\n    <div class=\"password-popup\" id=\"pwd-popup\">\r\n        <h3>Enter password</h3>\r\n        <p>Enter password to encryption key</p>\r\n\r\n        <input type=\"text\" name=\"popup-pwd\" id=\"popup-pwd-input\" class=\"popup-pwd\" autocomplete=\"off\">\r\n\r\n        <button type=\"button\" id=\"ok-btn\">OK</button>\r\n    </div>`;\nexport async function promptAndWait() {\n    const popupElement = p_stringToElement(code);\n    document.body.appendChild(popupElement);\n    const input = popupElement.querySelector('input.popup-pwd');\n    const okBtn = popupElement.querySelector('button');\n    input.focus();\n    return new Promise((resolve) => {\n        const cleanup = () => {\n            okBtn.removeEventListener('click', onOk);\n            input.removeEventListener('keyup', onKeyUp);\n            if (popupElement.parentNode) {\n                popupElement.parentNode.removeChild(popupElement);\n            }\n        };\n        const onOk = () => {\n            resolve(input.value);\n            cleanup();\n        };\n        const onKeyUp = (e) => {\n            if (e.key === 'Enter') {\n                onOk();\n            }\n        };\n        okBtn.addEventListener('click', onOk);\n        input.addEventListener('keyup', onKeyUp);\n    });\n}\n","import { p_stringToElement, waitForElement } from \"../utils\";\nconst TAB_HTML = `\r\n\r\n\r\n<div>\r\n    <div class=\"injected-parent-div\">\r\n        <button type=\"button\" class=\"injected-parent-button\">\r\n            <span class=\"injected-tab-upper-span\">\r\n              <div class=\".injected-tab-div2\">\r\n                <div class=\"injected-tab-upper-div\"></div>\r\n                <span class=\"injected-tab-span\">Delayed Send</span>\r\n              </div>\r\n            </span>\r\n        </button>\r\n    </div>\r\n</div>\r\n`;\nexport async function injectTab(tabName, svgSrc) {\n    const parent = await waitForElement('[role=\"navigation\"]');\n    const newElement = p_stringToElement(TAB_HTML);\n    const span = newElement.querySelector(\".injected-tab-span\");\n    const div = newElement.querySelector(\".injected-tab-upper-div\");\n    //const img: HTMLImageElement | null = newElement.querySelector(\".injected-tab-img\");\n    const btn = newElement.querySelector(\"button\");\n    if (span == null || btn == null || div == null) {\n        throw new Error(\"Span or img or btn not found in injected tab\");\n    }\n    const svg = p_stringToElement(svgSrc);\n    svg.classList.add(\"injected-tab-img\");\n    div.prepend(svg);\n    span.textContent = tabName;\n    parent.appendChild(newElement);\n    return btn;\n}\n","const parser = new DOMParser();\nexport function waitForElement(selector) {\n    return new Promise((resolve, reject) => {\n        const observer = new MutationObserver((mutations) => {\n            const element = document.querySelector(selector);\n            if (element) {\n                observer.disconnect(); // Stop observing once the element is found\n                resolve(element);\n            }\n        });\n        observer.observe(document.body, {\n            childList: true, // Observe direct children being added or removed\n            subtree: true, // Observe all descendants\n        });\n        // Optional: Set a timeout to reject the promise if the element doesn't appear\n        setTimeout(() => {\n            observer.disconnect();\n            reject(new Error('Element not found within time limit'));\n        }, 20000); // 20 seconds timeout\n    });\n}\nexport function p_stringToElement(str) {\n    return parser.parseFromString(str, \"text/html\").body.firstElementChild;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * File: main.ts\n *\n * Applies styles during runtime.\n */\n///////// IMPORTS //////////\nimport { DataManager } from \"./dataManagement\";\nimport { TwemojiRuntime } from \"./runtime/twemoji\";\nimport { RuntimeStyles } from \"./runtime/styles\";\nimport { RealtimeUpdatesManager } from \"./runtime/realtimeUpdates\";\nimport { waitForElement } from \"./utils\";\nimport { ThemesShopHandler } from \"./api/themesShop\";\nimport { ThemeManager } from \"./popup/themes\";\nimport { GamblingGame } from \"./games/gamble\";\nimport { EncryptionProvider } from \"./api/encryptionProvider\";\nimport { AuthProvider } from \"./api/authorizationProvider\";\nimport { SnakeGame } from \"./games/snake\";\nimport { LoadingScreen } from \"./runtime/loadingScreen\";\nimport { AppsMenuManager } from \"./ui/appsMenuManager\";\nimport { ImageLoadingOptimizer } from \"./runtime/imageLoadingOptimizer\";\n// Important objects\nconst appsMenuManager = new AppsMenuManager();\nconst dataManager = new DataManager();\nconst twemojiRuntime = new TwemojiRuntime(dataManager);\nconst stylesRuntime = new RuntimeStyles(dataManager);\nconst realtimeUpdatesRuntime = new RealtimeUpdatesManager(dataManager, stylesRuntime);\nconst loadingScreenRuntime = new LoadingScreen();\nconst imageLoadingOptimizer = new ImageLoadingOptimizer();\nconst authProvider = new AuthProvider();\nif (window.self === window.top) { // Don't initialize in iframes!\n    const themesShopHandler = new ThemesShopHandler(new ThemeManager(dataManager), appsMenuManager, authProvider);\n    const gamblingGame = new GamblingGame(authProvider);\n    const encryptionProvider = new EncryptionProvider(authProvider);\n    const snakeGame = new SnakeGame();\n}\n/////// Utility functions ////////\n//////// On window load functions //////////\nasync function onWindowLoad() {\n    console.log(\"window loaded, wait for main\");\n    imageLoadingOptimizer.onLoad();\n    loadingScreenRuntime.startMutationObserver();\n    if (window.self !== window.top) {\n        throw new Error(\"Reject loading in iframe, feature not stable\");\n    }\n    if (window.self === window.top) {\n        await waitForElement('[data-tid=\"app-layout-area--main\"]');\n    }\n    else {\n        console.log(\"Skip wait in iframe\");\n    }\n    console.log(\"window found main\");\n    await dataManager.loadAll();\n    stylesRuntime.applyFonts(null);\n    console.log(\"Apply colors on win load\");\n    realtimeUpdatesRuntime.detectChange();\n    twemojiRuntime.applyTwemoji();\n    stylesRuntime.applyColors();\n    stylesRuntime.applyBackgrounds();\n}\n// Detects when contents in storage changed. Used for live updates. //\n/////// Init ////////\nwindow.onload = onWindowLoad;\nconsole.log(\"Hello\");\n"],"names":[],"sourceRoot":""}