(()=>{"use strict";const t=40,e=40;class s{constructor(t=0,e=0){this.x=t,this.y=e}multiply(t){return new s(this.x*t.x,this.y*t.y)}add(t){return new s(this.x+t.x,this.y+t.y)}multiplyScalar(t){return new s(this.x*t,this.y*t)}sub(t){return new s(this.x-t.x,this.y-t.y)}equals(t){return this.x==t.x&&this.y==t.y}}const i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACUUlEQVRYhe2Zv2/TQBSAv4TIJQhBMyBAQgLGLPyaCkJqxNQRWMkfwIBEYMUDg/emEgPsFiN0zNggBFkogaUrlZAoQihUoJqE0qAXOcGxHN/VuSYe8klWdI59/vLsO997yXS7XVSU7U4FuAecBXL+4bvAJvDEdayqspOExAqW7Y4INYBTiu63gAXXsTYnJujLbQB5zb48oGhaMhfzXSMol5+DxSt73Cr97bVfrh2ivp7Faw+Oz/vnnDYpGBlB/5lb7rdPFLo4d3cjO7Cf5vjWygR3PTD5TGbuPGrHjhKJXPXhn6F9O7/3eLW+0/s8cjhLrVEIRjKObaAJrMrmOtansQWXrv6/rX2Wn3/n3YY3aJ85WaD1c17LMEQdqLiO1Rx1QFbVQ1hOCMoJn7+2ksgJi8D7st2plu1O5C9UCk6I+8BalKRSUEZrmOK5uaE9cosNcDFKMtEgEWpvfiUZJDp8AEquY/1AJ4JyYZlKwixdO8rtG8d4/XHepBx+JB/3G8oI9tGYqE1zWUZ33JtkCBGpvc32tgkhk31JO4JT4nxapplR3JwJjsmltAseT7tgat7FI5kJjsl22gWbaRdcnQmOQV2SKu3VzBSWW5L66q0H95kXm2DFdayeoDKCErmwXDAvvn7hQJb8gxW1UlBua5hnL1qhvDiD106UF0fJDfIRUpAXx8ppCU6IlSg5LcEDzovrfnJUiZJjCnnx/otHqS+/xVRYvwRLv5oT9ZbrWEYLmHHTzEKwBKyRF3v+OUYZeTW/1lz0C+Qq5Bjj9Wkh3X9DAP8AE6su5f4dqmsAAAAASUVORK5CYII=";const n=new Image;n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACeUlEQVRYhe2ZP2/TQBiHfwnBxQhESlUBE6xZoJQlQpXaMWxlBX8ABiTSGQ8MnqFIDHwAz9CxU5VKqO1S/i0doRISRR1iECLUSmP0lnM4p2ffOTm3V4lHymD7nHt8vntz75tSFEUoCscNmwAeArgKoMK66QLYBvDC96xFWdeFCDpuSEIbAC5Lmu4AqPuetX1kgkxuC4CteEsHQC1NsiI6OSIbvJw9BsxO93B3bv/g+HXrFFbfltHZ63dis3uuiLrVOoJszj2LjyfHI3gPusK27ssKdtsl/tSCaE4qCTpueA3APPtMAbggu8cei9CoB/j1u4ezZ8po3D53qE3z6Wl+JIVkCjpuSDL0VLPSpxhg/HyAL9/a/ZO3ajYW7k0kGtHrXl4vZ36PcA46blgF8ATAo7xiMbwcsbnVwW7QxWT1X5c0L3MLMrkWgBvDyqXBy6mS0Ncpd2kiOU3pFQ9Cr1hG/5F0j9x+7yKcO6XMRULhRlmQzTltr5VW55uP1cwwI1vBiFcxW63vdMnxKARqJcHWMKHkKCjdf7xHQfiTiXJgq3jeAI9UToTglAEeqZRVfviPE3mk/C+YzYkQ/G6ARyok+N5QtwNIcMkAj1TMF/Q96zNtzQxwERLvB5tGb7fwd0e9OEqSJCJnXiyEj4O0o/6gS47y4pnrAV6t/MDy2s9D10mcRldGIi/WmZfoyosTV33PCgDM6RjJtLyYJ56XyoIDks9HlRxk5Lw4hiR9z6KVfXPYEKQrLy6weAQ06u1ii0d5ObbyWx4cN/zKl34VA/WO71nCAmYRFdY6XwImEQolGeGkw+4Ron3DymrNNVYgl0FtUuvThNl/QwD4AwphHynh/q+DAAAAAElFTkSuQmCC";const o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVRYhe2YPU/bQBjH/3mRSxBSiSoEkSqFjpnCy1J14G3qmFadkD8AAxJhrTxk8A5IDHwAz20/QRUmmHhbWJBopqYDFUEqBCuQ6nHvUsexY/suxq2Uv2QlFz/3f34+393jONFutyEiVTOnAZTYMQPgucOmAeAEwBc6DF35JpInNKCqmQSzDWAxZK59AGVDV04iAVQ1cxxABcBGSDCndsjH0JXrgQEyuCqAoiQc1ymApSCQyRjgwLyqzLuv+gJGBBcK0m8EKxHBcRVZDk95zkG2Wo8jhLNr1mt19xvB7cixAuRyHUG2CV9GTeXQK7fN3GsES09J1i/nfws4Ey1L8JxegM7C/xRyzelbSeLWEFBWQ0BZ9QCqmlmOC8Ytd6fUqZqZB3AIYCoOOJvqAF4bulLrADK4cwCZmOG47gAUCDLNfji0w2WeAankT/y4aljtl5NZNM1x3N0PJnsA/wxjyqUuWh/pvn/gZyaybazMX+PgrNGJvvnVxPtl4OpmBLfNhBRcCP+xT18fGrRI1u1Xpq+1cNt87DGu1U3rHMWISsB/nQDzvLU496fj6Ejv7pOfUrpiRCTgn6dIPg/xbunB+lyYG8V84e96oe9v34x1xYhIwD+ddstDV7i5+kIYxE9h/GkEW7zxuZry7RAkRqavI6ZFgDXe2j/yr3xBYmT6OmJq1NrlLdqHtD3Xu26JzsnshQL+u7ySfLeXOFrqtJr4hKVhpysb5EYdwL9u6Eruny911g1nhbnACnXcqnM4uP1xZ488WzFBbhq60vWWwevNgth7YUkZutJT6IeP/LIaAkoJwG/mlAbwfxLuDwAAAABJRU5ErkJggg==";const h=new Image;h.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVRYhe2YP0/bQBiHf4HowHQgqKoKUqV0zYbowkY+QrsWfwAGBjLjoYM700gMXbp5h7EjLIgFVKasRKpEKoaAWtXEonX1mjtzjXPmcraxkPJIGe5P3veJc3fvJZUwDDGM7QTJzkfAc1llOMtUGSLjMBHMytMTtJ1gqxyV0bnjXWw7QR3AMYDFMuQkegBWPZd1Y0Eu1wFglSwn8AE0SLLKO45lOWsGWFv5i3fNP1F772Aah6dT8Af5ZNeIb3Gnpcr69oC+9x0x8mIhhLtxOzKw87mKy37iLB2LMeO3aJNsyp9M9WaCxmiOKQbxN0mwLlr02B9CZ44Kg/h1EhTrMF4TaejMUWEQv1pVTfz45RKd87tV+6ZhofX+ubFYlvj0BONFQbuJ+Hr0K34zcdLxoz55jgkG8W9JsCtatNWJ3zfJtdLtBf/NMcEgfpdau6JF5xBt9bnZpER9kUVjWc5Cg/i7opJcyCXOmgkxy67x/Uc/ar96uYCboJbjQa0Vv+e5bElsklW51PmDCvxBDc/matFg/2c+YgKN+D53urvN8MLc4IW6bHqiDkO+zQj4lWenJMmW57JPcsfkR1NWJoJZmQhmRSV4XYLLyJwqwW/FuujnVAnuF+uin/NpCnouO6erWeFK9xzynAnSdvFj/gWizKUU9FxGi7ZdmNI9bZ5rJA+dgx8AnBUod8ZzKEkV9Fx2BaBZkCTFbPIcZoIoTlJLDrqlTpLMY022deWgurCmYTvBMgC69a6NKUbH1lbahshFUGA7wWsAb/mLpOeHplBtJRk6gPdV51wqAP4Bq4oVsts6YbQAAAAASUVORK5CYII=";class a{constructor(t,e,s,i,n,o,h){this.frameCounter=0,this.pendingTurn="none",this.snakePoints=[],this.previousPoints=[],this.foods=[],this.otherPoints=[],this.useWSADControls=!1,this.gameStarted=!1,this.position=t,this.direction=e,this.foodCallback=o,this.lostCallback=h,this.numX=i,this.numY=n,this.keyEvents(),this.generateSnake(s)}setUseWSAD(t){this.useWSADControls=t}setGameStarted(t){this.gameStarted=t}generateSnake(t){this.frameCounter=200;for(let t=0;t<20;t++)this.snakePoints.push(this.position.sub(new s(0,t)));for(let t=0;t<200;t++)this.previousPoints.push({p:this.position.sub(new s(t/10)),c:t})}snakeUpdate(){this.frameCounter+=1,this.gameStarted&&(this.position=this.position.add(this.direction.multiplyScalar(.1)));const t=this.previousPoints.length-1;this.snakePoints.forEach(((e,s)=>{const i=Math.round(t-2*s),n=Math.max(0,Math.min(i,t)),o=this.previousPoints[n];e.x=o.p.x,e.y=o.p.y})),this.previousPoints.push({p:this.position,c:this.frameCounter}),this.previousPoints.length>2*this.snakePoints.length+6&&this.previousPoints.splice(0,1)}getFood(){let t=0;for(const e of this.foods){if(Math.max(Math.abs(e.x-this.position.x),Math.abs(e.y-this.position.y))<.2){for(let t=0;t<5;t++)this.snakePoints.push(new s(-10,-10));this.foods.splice(t,1),this.foodCallback(e)}t++}}drawSnake(a){a.beginPath();let r=0;for(const s of this.snakePoints){const i=s.x*t+20,n=15*(1-r/this.snakePoints.length*.15),o=s.y*e+20;a.moveTo(i+n,o),a.arc(i,o,n,0,2*Math.PI),r++}a.fillStyle="#5b7bf9",a.fill();const l=this.position.x*t,d=this.position.y*e;this.direction.equals(new s(-1,0))&&a.drawImage(n,l,d),this.direction.equals(new s(1,0))&&a.drawImage(i,l,d),this.direction.equals(new s(0,-1))&&a.drawImage(o,l,d),this.direction.equals(new s(0,1))&&a.drawImage(h,l,d)}isWithinBorders(){return!(this.position.x<0||this.position.y<0||this.position.x>this.numX-1||this.position.y>this.numY-1)}ensureTurningOnCell(){const t=Math.round(this.position.x+.5*this.direction.x),e=Math.round(this.position.y+.5*this.direction.y);return!(Math.max(Math.abs(t-this.position.x),Math.abs(e-this.position.y))>.2||(this.position=new s(t,e),0))}keyEvents(){document.addEventListener("keydown",(t=>{this.useWSADControls?"w"===t.key||"W"===t.key?this.pendingTurn="up":"s"===t.key||"S"===t.key?this.pendingTurn="down":"a"===t.key||"A"===t.key?this.pendingTurn="left":"d"!==t.key&&"D"!==t.key||(this.pendingTurn="right"):"ArrowUp"===t.key?this.pendingTurn="up":"ArrowDown"===t.key?this.pendingTurn="down":"ArrowLeft"===t.key?this.pendingTurn="left":"ArrowRight"===t.key&&(this.pendingTurn="right")}))}updatePendingTurn(){if("none"!==this.pendingTurn)if(0!=this.ensureTurningOnCell()){switch(this.pendingTurn){case"up":if(0!=this.direction.y)break;this.direction=new s(0,-1);break;case"down":if(0!=this.direction.y)break;this.direction=new s(0,1);break;case"left":if(0!=this.direction.x)break;this.direction=new s(-1,0);break;case"right":if(0!=this.direction.x)break;this.direction=new s(1,0);break;default:console.warn("Unknown value: ",this.pendingTurn)}this.pendingTurn="none"}else console.log("Rejected turn")}reset(){this.pendingTurn="none",this.snakePoints.length=0,this.previousPoints.length=0,this.position=new s(Math.round(this.numX/2),Math.round(this.numY/2))}rebuild(){this.generateSnake(4)}hasCollidedWithSelf(){for(const t of this.snakePoints){const e=this.position.add(this.direction.multiplyScalar(.5)),s=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);if(s<Math.pow(.2,2))return console.log("Collided with: ",t," distance squared of: ",s),!0}return!1}hasCollidedWithOthers(){for(const t of this.otherPoints){const e=this.position.add(this.direction.multiplyScalar(.5)),s=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);if(s<Math.pow(.2,2))return console.log("Collided with: ",t," distance squared of: ",s),!0}return!1}update(){this.snakeUpdate(),this.updatePendingTurn(),this.getFood(),0==this.isWithinBorders()&&this.lostCallback(this.snakePoints.length/5),1==this.hasCollidedWithSelf()&&this.lostCallback(this.snakePoints.length/5),1==this.hasCollidedWithOthers()&&this.lostCallback(this.snakePoints.length/5)}getPoints(){return this.snakePoints}updateFoodPositions(t){this.foods=t}updateOtherPoints(t){this.otherPoints=t}render(t){this.drawSnake(t)}}const r=document.querySelector("#game");r.width=innerWidth,r.height=innerHeight;let l=r.width/t,d=r.height/e;window.onresize=function(){r.width=r.clientWidth,r.height=r.clientHeight,l=r.width/t,d=r.height/e};const A=r.getContext("2d"),c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAACKklEQVRYhe2YMU/bQBTH/25JhbrYDIwII+SZILp0ilkSMgGfAPINInWP+AiBLwD5AKhsljzB2qVEYiIgLMGCYLhMlQqVqysPYUzsO/vuRFTlLznDvcu7X967e/ccK45jjLM+jDXdBFCDjAJ2GvZRp2FXVXwYA+w0bB/AOoCfnYa9kbY7oVt1QtcR+ZkyBcgZ3gyE7jYAnx4uYXRNAj4vPtz7NoO90I0AzCfsq6weMZETk4Au/7if/XgG4HvKtsvq0bGME5OH5B/gj6/Ty6nxPqtHbVknShEcNB0O8byvaklbBcCvihVfeJ8+J4Z3AewUWaMUIIHxhbay5jwAuFqsWLXLB6zcPOLL9eOhd/en6wVMuO+SKnwXD5oOLxkHAOysObcxEMYxfMvCnPXKNATQ9gJ2YARw0HR4OvdF834DuI6BRStzSksWUhqQIpc+jSra9AJ2pAWQ9txpXlpLiKe76gUsyvuqbJnZ0QwH8ic80cIIUvSudJKltJAXRZkIbpsiI+UWbRlAX2KOinL9ywDWJOaoaEkV8F01FoCDppOZ5rEA9AKW2Xr9Fyk+MczQzzPKAJ7qYxmp3M5aBrBrjk3sXwhI11BPK9KLejqbhaFGMJA/YbMgBUi/Uved3BZFD0XKDDWXLWWsJ0l31IXqIDltKaR7WAQOZQo1Oa+WODg96qCl4VDmrS4pambb1DKN6kr6VOe6MvttpDigzud8zfZ1+pv8R62qCaCSAPwF+ckaGyeX8ZQAAAAASUVORK5CYII=",new class{constructor(){this.doubleSnakes=!1,this.foods=[],this.snakes=[],this.nextGameDoubleSnakes=!1,this.numberOfFoods=1,this.renderLoop=()=>{this.render();for(const t of this.snakes)t.update();requestAnimationFrame(this.renderLoop)},this.foodCallback=this.foodCallback.bind(this),this.lostCallback=this.lostCallback.bind(this),this.initialize(),this.gameStartedEvent()}nextGameDoubleSnakesSet(t){this.nextGameDoubleSnakes=t}createFood(){for(;this.foods.length<this.numberOfFoods;){let t=!1;for(;!t;){console.log("Attempt to place food...");const e=new s(Math.floor(Math.random()*(l-2))+1,Math.floor(Math.random()*(d-2))+1);console.log("Placed at: ",e),this.foods.some((t=>t.equals(e)))||(this.foods.push(e),t=!0)}}for(const t of this.snakes)t.updateFoodPositions(this.foods)}gameStartedEvent(){document.addEventListener("keydown",(()=>{for(const t of this.snakes)t.setGameStarted(!0)}))}updateScore(){let t=0;for(const e of this.snakes)t+=e.getPoints().length/5;const e=document.querySelector("#score");e&&(e.textContent=`Score: ${t}`)}drawGrid(){for(let s=0;s<l;s++)for(let i=0;i<d;i++)i%2==0?s%2==0?(A.fillStyle="#1a1a1a",A.fillRect(s*t,i*e,t,e)):(A.fillStyle="#111111",A.fillRect(s*t,i*e,t,e)):s%2==1?(A.fillStyle="#1a1a1a",A.fillRect(s*t,i*e,t,e)):(A.fillStyle="#111111",A.fillRect(s*t,i*e,t,e))}createSnakes(){this.doubleSnakes=this.nextGameDoubleSnakes,this.doubleSnakes?(this.snakes=[new a(new s(Math.round(l/2),Math.round(d/2)),new s(0,-1),4,l,d,this.foodCallback,this.lostCallback),new a(new s(Math.round(l/3),Math.round(d/3)),new s(0,-1),4,l,d,this.foodCallback,this.lostCallback)],this.snakes[1].setUseWSAD(!0),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints()))):this.snakes=[new a(new s(Math.round(l/2),Math.round(d/2)),new s(0,-1),4,l,d,this.foodCallback,this.lostCallback)];for(const t of this.snakes)t.updateFoodPositions(this.foods)}foodCallback(t){console.warn("GOT THE FOOD!!!");const e=this.foods.findIndex((e=>e.equals(t)));-1!==e&&this.foods.splice(e,1),this.doubleSnakes&&(this.snakes[0].updateOtherPoints(this.snakes[1].getPoints()),this.snakes[1].updateOtherPoints(this.snakes[0].getPoints())),this.createFood(),this.updateScore()}lostCallback(t){console.warn("Lost with length: ",t);let e=0;for(const t of this.snakes)e+=t.getPoints().length/5;alert("(Temporary UI) Total score of: "+e.toString()),this.lostFunction()}lostFunction(){this.snakes.length=0,this.resetGame(),this.showWindow()}drawFood(){this.foods.forEach(((s,i)=>{const n=s.x*t,o=s.y*e;A.drawImage(c,n,o)}))}render(){A.clearRect(0,0,r.width,r.height),this.drawGrid(),this.drawFood();for(const t of this.snakes)t.render(A)}updateCanvas(){r.width=r.clientWidth,r.height=r.clientHeight,l=r.width/t,d=r.height/e}resetGame(){this.createSnakes(),this.foods.length=0,this.createFood(),this.updateScore()}showWindow(){const t=document.querySelector("#info");t&&(t.style.display="block")}windowHandler(){const t=document.querySelector("#info");if(!t)return;const e=document.querySelector("#small"),s=document.querySelector("#medium"),i=document.querySelector("#large"),n=document.querySelector("#largest");e.addEventListener("click",(()=>{r.style.width="300px",r.style.height="300px",this.updateCanvas(),this.resetGame()})),s.addEventListener("click",(()=>{r.style.width="400px",r.style.height="400px",this.updateCanvas(),this.resetGame()})),i.addEventListener("click",(()=>{r.style.width="600px",r.style.height="100%",this.updateCanvas(),this.resetGame()})),n.addEventListener("click",(()=>{r.style.width="100%",r.style.height="100%",this.updateCanvas(),this.resetGame()}));const o=document.querySelector("#double-snakes");o.addEventListener("input",(()=>{this.nextGameDoubleSnakesSet(o.checked),this.resetGame()}));const h=document.querySelector("#apples");h.addEventListener("input",(()=>{this.numberOfFoods=parseInt(h.value),this.resetGame()})),document.querySelector("#begin").addEventListener("click",(()=>{t.style.display="none"}))}initialize(){this.windowHandler(),this.createSnakes(),this.createFood(),this.updateScore(),this.renderLoop()}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FDNUJvQixFQUFPaUQsTUFBTS9DLE1BQVEsUUFDckJGLEVBQU9pRCxNQUFNN0MsT0FBUyxPQUN0QnBHLEtBQUsrSSxlQUNML0ksS0FBSzJJLGVBRVRZLEVBQVEzRSxpQkFBaUIsU0FBUyxLQUM5Qm9CLEVBQU9pRCxNQUFNL0MsTUFBUSxPQUNyQkYsRUFBT2lELE1BQU03QyxPQUFTLE9BQ3RCcEcsS0FBSytJLGVBQ0wvSSxLQUFLMkksZUFFVCxNQUFNYSxFQUFPN0UsU0FBU3NCLGNBQWMsa0JBQ3BDdUQsRUFBSzVFLGlCQUFpQixTQUFTLEtBQzNCNUUsS0FBS3dILHdCQUF3QmdDLEVBQUtDLFNBQ2xDekosS0FBSzJJLGVBRVQsTUFBTWUsRUFBUy9FLFNBQVNzQixjQUFjLFdBQ3RDeUQsRUFBTzlFLGlCQUFpQixTQUFTLEtBQzdCNUUsS0FBS2lILGNBQWdCMEMsU0FBU0QsRUFBT3RILE9BQ3JDcEMsS0FBSzJJLGVBRUtoRSxTQUFTc0IsY0FBYyxVQUMvQnJCLGlCQUFpQixTQUFTLEtBQzVCb0UsRUFBSUMsTUFBTUMsUUFBVSxTQUU1QixDQUNBLFVBQUE1QixHQUNJdEgsS0FBS21KLGdCQUNMbkosS0FBS3NJLGVBQ0x0SSxLQUFLMEgsYUFDTDFILEtBQUtnSSxjQUNMaEksS0FBS2tILFlBQ1QsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NuYWtlLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9zbmFrZS8uL3NyYy92ZWMyLnRzIiwid2VicGFjazovL3NuYWtlLy4vc3JjL3NuYWtlLnRzIiwid2VicGFjazovL3NuYWtlLy4vc3JjL2dhbWUudHMiLCJ3ZWJwYWNrOi8vc25ha2UvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IENFTExfV0lEVEggPSA0MDtcbmV4cG9ydCBjb25zdCBDRUxMX0hFSUdIVCA9IDQwO1xuZXhwb3J0IGNvbnN0IE1PVkVNRU5UX1NQRUVEID0gMC4xO1xuZXhwb3J0IGNvbnN0IFRVUk5fUkVKRUNUX1RIUkVTSE9MRCA9IDAuMjtcbmV4cG9ydCBjb25zdCBGUFMgPSA2MDtcbmV4cG9ydCBjb25zdCBTVUJESVZJU0lPTlMgPSA1O1xuZXhwb3J0IGNvbnN0IEZyYW1lc1BlckNlbGwgPSAxIC8gTU9WRU1FTlRfU1BFRUQ7XG4iLCJleHBvcnQgY2xhc3MgVmVjdG9yMiB7XG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuICAgIG11bHRpcGx5KG90aGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKiBvdGhlci54LCB0aGlzLnkgKiBvdGhlci55KTtcbiAgICB9XG4gICAgYWRkKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55KTtcbiAgICB9XG4gICAgbXVsdGlwbHlTY2FsYXIoc2NhbGFyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKiBzY2FsYXIsIHRoaXMueSAqIHNjYWxhcik7XG4gICAgfVxuICAgIHN1YihvdGhlcikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54IC0gb3RoZXIueCwgdGhpcy55IC0gb3RoZXIueSk7XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMueCA9PSBvdGhlci54ICYmIHRoaXMueSA9PSBvdGhlci55KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDRUxMX0hFSUdIVCwgQ0VMTF9XSURUSCwgRnJhbWVzUGVyQ2VsbCwgTU9WRU1FTlRfU1BFRUQsIFNVQkRJVklTSU9OUywgVFVSTl9SRUpFQ1RfVEhSRVNIT0xEIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjMlwiO1xuaW1wb3J0IGhlYWRSaWdodFVSTCBmcm9tICcuLi9hc3NldHMvaGVhZF9yaWdodC5wbmcnO1xuaW1wb3J0IGhlYWRMZWZ0VVJMIGZyb20gXCIuLi9hc3NldHMvaGVhZF9sZWZ0LnBuZ1wiO1xuaW1wb3J0IGhlYWRVcFVSTCBmcm9tIFwiLi4vYXNzZXRzL2hlYWRfdXAucG5nXCI7XG5pbXBvcnQgaGVhZERvd25VUkwgZnJvbSBcIi4uL2Fzc2V0cy9oZWFkX2Rvd24ucG5nXCI7XG5jb25zdCBoZWFkUmlnaHRJbWFnZSA9IG5ldyBJbWFnZSgpO1xuaGVhZFJpZ2h0SW1hZ2Uuc3JjID0gaGVhZFJpZ2h0VVJMO1xuY29uc3QgaGVhZExlZnRJbWFnZSA9IG5ldyBJbWFnZSgpO1xuaGVhZExlZnRJbWFnZS5zcmMgPSBoZWFkTGVmdFVSTDtcbmNvbnN0IGhlYWRVcEltYWdlID0gbmV3IEltYWdlKCk7XG5oZWFkVXBJbWFnZS5zcmMgPSBoZWFkVXBVUkw7XG5jb25zdCBoZWFkRG93bkltYWdlID0gbmV3IEltYWdlKCk7XG5oZWFkRG93bkltYWdlLnNyYyA9IGhlYWREb3duVVJMO1xuZXhwb3J0IGNsYXNzIFNuYWtlIHtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsUG9zaXRpb24sIGluaXRpYWxEaXJlY3Rpb24sIGluaXRpYWxMZW5ndGgsIG51bVgsIG51bVksIGVhdGVuRm9vZENhbGxiYWNrLCBsb3N0Q2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdUdXJuID0gXCJub25lXCI7XG4gICAgICAgIHRoaXMuc25ha2VQb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmV2aW91c1BvaW50cyA9IFtdO1xuICAgICAgICB0aGlzLmZvb2RzID0gW107XG4gICAgICAgIHRoaXMub3RoZXJQb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy51c2VXU0FEQ29udHJvbHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gaW5pdGlhbFBvc2l0aW9uO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGluaXRpYWxEaXJlY3Rpb247XG4gICAgICAgIHRoaXMuZm9vZENhbGxiYWNrID0gZWF0ZW5Gb29kQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMubG9zdENhbGxiYWNrID0gbG9zdENhbGxiYWNrO1xuICAgICAgICB0aGlzLm51bVggPSBudW1YO1xuICAgICAgICB0aGlzLm51bVkgPSBudW1ZO1xuICAgICAgICB0aGlzLmtleUV2ZW50cygpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlU25ha2UoaW5pdGlhbExlbmd0aCk7XG4gICAgfVxuICAgIHNldFVzZVdTQUQodmFsdWUpIHtcbiAgICAgICAgdGhpcy51c2VXU0FEQ29udHJvbHMgPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0R2FtZVN0YXJ0ZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhcnRlZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZW5lcmF0ZVNuYWtlKGxlbmd0aCkge1xuICAgICAgICBjb25zdCBiZWdpblBhcnRzID0gMjA7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudGVyID0gRnJhbWVzUGVyQ2VsbCAqIGJlZ2luUGFydHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmVnaW5QYXJ0czsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNuYWtlUG9pbnRzLnB1c2godGhpcy5wb3NpdGlvbi5zdWIobmV3IFZlY3RvcjIoMCwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlZ2luUGFydHMgKiBGcmFtZXNQZXJDZWxsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb2ludHMucHVzaCh7IHA6IHRoaXMucG9zaXRpb24uc3ViKG5ldyBWZWN0b3IyKGkgLyBGcmFtZXNQZXJDZWxsKSksIGM6IGkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnByZXZpb3VzUG9pbnRzKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNuYWtlUG9pbnRzKTtcbiAgICB9XG4gICAgc25ha2VVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudGVyICs9IDE7XG4gICAgICAgIGlmICh0aGlzLmdhbWVTdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5hZGQodGhpcy5kaXJlY3Rpb24ubXVsdGlwbHlTY2FsYXIoTU9WRU1FTlRfU1BFRUQpKTtcbiAgICAgICAgfVxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucG9zaXRpb24pO1xuICAgICAgICAvLyBQcmV2aW91cyBwb2ludHNcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBGcmFtZXNQZXJDZWxsIC8gU1VCRElWSVNJT05TO1xuICAgICAgICBjb25zdCBidWZMZW4gPSB0aGlzLnByZXZpb3VzUG9pbnRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbmV3ZXN0ID0gYnVmTGVuIC0gMTtcbiAgICAgICAgdGhpcy5zbmFrZVBvaW50cy5mb3JFYWNoKChwYXJ0LCBpKSA9PiB7XG4gICAgICAgICAgICAvLyBob3cgbWFueSBmcmFtZXMgYmFjayB0aGlzIHNlZ21lbnQgc2hvdWxkIHRyYWlsXG4gICAgICAgICAgICBjb25zdCBpZHggPSBNYXRoLnJvdW5kKG5ld2VzdCAtIGkgKiBpbnRlcnZhbCk7XG4gICAgICAgICAgICAvLyBjbGFtcCB0byBbMCwgbmV3ZXN0XVxuICAgICAgICAgICAgY29uc3QgY2xhbXBlZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGlkeCwgbmV3ZXN0KSk7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IHRoaXMucHJldmlvdXNQb2ludHNbY2xhbXBlZF07XG4gICAgICAgICAgICBwYXJ0LnggPSBwb2ludC5wLng7XG4gICAgICAgICAgICBwYXJ0LnkgPSBwb2ludC5wLnk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBEaXN0YW5jZSB0byBwcmV2aW91c1xuICAgICAgICAvLyBFdWxlcidzIGRpc3RhbmNlIHNxdWFyZWRcbiAgICAgICAgdGhpcy5wcmV2aW91c1BvaW50cy5wdXNoKHsgcDogdGhpcy5wb3NpdGlvbiwgYzogdGhpcy5mcmFtZUNvdW50ZXIgfSk7XG4gICAgICAgIGlmICh0aGlzLnByZXZpb3VzUG9pbnRzLmxlbmd0aCA+IHRoaXMuc25ha2VQb2ludHMubGVuZ3RoICogKEZyYW1lc1BlckNlbGwgLyBTVUJESVZJU0lPTlMpICsgKEZyYW1lc1BlckNlbGwgLyBTVUJESVZJU0lPTlMpICogMykge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BvaW50cy5zcGxpY2UoMCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnByZXZpb3VzUG9pbnRzKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgZ2V0Rm9vZCgpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmb29kIG9mIHRoaXMuZm9vZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBNYXRoLm1heChNYXRoLmFicyhmb29kLnggLSB0aGlzLnBvc2l0aW9uLngpLCBNYXRoLmFicyhmb29kLnkgLSB0aGlzLnBvc2l0aW9uLnkpKTtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlIDwgVFVSTl9SRUpFQ1RfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBTVUJESVZJU0lPTlM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNuYWtlUG9pbnRzLnB1c2gobmV3IFZlY3RvcjIoLTEwLCAtMTApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb29kcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vZENhbGxiYWNrKGZvb2QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3U25ha2UoY3R4KSB7XG4gICAgICAgIGNvbnN0IHNuYWtlV2lkdGggPSBDRUxMX1dJRFRIICogMC41O1xuICAgICAgICBjb25zdCBzbmFrZUhlaWdodCA9IENFTExfSEVJR0hUICogMC41O1xuICAgICAgICAvL2N0eC5maWxsU3R5bGUgPSBcImJsdWVcIjtcbiAgICAgICAgLy9jdHguZmlsbFJlY3QodGhpcy5wb3NpdGlvbi54ICogQ0VMTF9XSURUSCArIHNuYWtlV2lkdGggLyAyLCB0aGlzLnBvc2l0aW9uLnkgKiBDRUxMX0hFSUdIVCArIHNuYWtlSGVpZ2h0IC8gMiwgc25ha2VXaWR0aCwgc25ha2VIZWlnaHQpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuc25ha2VQb2ludHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSBwYXJ0LnggKiBDRUxMX1dJRFRIICsgQ0VMTF9XSURUSCAvIDI7XG4gICAgICAgICAgICBjb25zdCByID0gKHNuYWtlV2lkdGggKiAwLjc1KSAqICgxIC0gKGkgLyB0aGlzLnNuYWtlUG9pbnRzLmxlbmd0aCkgKiAwLjE1KTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJ0LnkgKiBDRUxMX0hFSUdIVCArIENFTExfSEVJR0hUIC8gMjtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCArIHIsIHkpO1xuICAgICAgICAgICAgY3R4LmFyYyh4LCB5LCByLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzViN2JmOVwiO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAvLyBEcmF3IHRoZSBoZWFkXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLnBvc2l0aW9uLnggKiBDRUxMX1dJRFRIO1xuICAgICAgICBjb25zdCB5ID0gdGhpcy5wb3NpdGlvbi55ICogQ0VMTF9IRUlHSFQ7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5lcXVhbHMobmV3IFZlY3RvcjIoLTEsIDApKSkge1xuICAgICAgICAgICAgLy8gR29pbmcgbGVmdFxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShoZWFkTGVmdEltYWdlLCB4LCB5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24uZXF1YWxzKG5ldyBWZWN0b3IyKDEsIDApKSkge1xuICAgICAgICAgICAgLy8gR29pbmcgcmlnaHRcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaGVhZFJpZ2h0SW1hZ2UsIHgsIHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5lcXVhbHMobmV3IFZlY3RvcjIoMCwgLTEpKSkge1xuICAgICAgICAgICAgLy8gR29pbmcgdXBcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaGVhZFVwSW1hZ2UsIHgsIHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5lcXVhbHMobmV3IFZlY3RvcjIoMCwgMSkpKSB7XG4gICAgICAgICAgICAvLyBHb2luZyBkb3duXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGhlYWREb3duSW1hZ2UsIHgsIHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzV2l0aGluQm9yZGVycygpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCA8IDAgfHwgdGhpcy5wb3NpdGlvbi55IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnggPiB0aGlzLm51bVggLSAxIHx8IHRoaXMucG9zaXRpb24ueSA+IHRoaXMubnVtWSAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZW5zdXJlVHVybmluZ09uQ2VsbCgpIHtcbiAgICAgICAgY29uc3QgY2xvc2VzdENlbGxYID0gTWF0aC5yb3VuZCh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLmRpcmVjdGlvbi54ICogMC41KTtcbiAgICAgICAgY29uc3QgY2xvc2VzdENlbGxZID0gTWF0aC5yb3VuZCh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmRpcmVjdGlvbi55ICogMC41KTtcbiAgICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IE1hdGgubWF4KE1hdGguYWJzKGNsb3Nlc3RDZWxsWCAtIHRoaXMucG9zaXRpb24ueCksIE1hdGguYWJzKGNsb3Nlc3RDZWxsWSAtIHRoaXMucG9zaXRpb24ueSkpO1xuICAgICAgICBpZiAoZGlmZmVyZW5jZSA+IFRVUk5fUkVKRUNUX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRlbGVwb3J0IHRvIGNlbGxcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IyKGNsb3Nlc3RDZWxsWCwgY2xvc2VzdENlbGxZKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGtleUV2ZW50cygpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZVdTQURDb250cm9scykge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJ3XCIgfHwgZS5rZXkgPT09IFwiV1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1R1cm4gPSBcInVwXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSBcInNcIiB8fCBlLmtleSA9PT0gXCJTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nVHVybiA9IFwiZG93blwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gXCJhXCIgfHwgZS5rZXkgPT09IFwiQVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1R1cm4gPSBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09IFwiZFwiIHx8IGUua2V5ID09PSBcIkRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdUdXJuID0gXCJyaWdodFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nVHVybiA9IFwidXBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09IFwiQXJyb3dEb3duXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nVHVybiA9IFwiZG93blwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gXCJBcnJvd0xlZnRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdUdXJuID0gXCJsZWZ0XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdUdXJuID0gXCJyaWdodFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZVBlbmRpbmdUdXJuKCkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVHVybiA9PT0gXCJub25lXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZVR1cm5pbmdPbkNlbGwoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWplY3RlZCB0dXJuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIDtcbiAgICAgICAgc3dpdGNoICh0aGlzLnBlbmRpbmdUdXJuKSB7XG4gICAgICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uLnkgIT0gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMigwLCAtMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24ueSAhPSAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uLnggIT0gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMigtMSwgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uLnggIT0gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMigxLCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5rbm93biB2YWx1ZTogXCIsIHRoaXMucGVuZGluZ1R1cm4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ1R1cm4gPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1R1cm4gPSBcIm5vbmVcIjtcbiAgICAgICAgdGhpcy5zbmFrZVBvaW50cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByZXZpb3VzUG9pbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMihNYXRoLnJvdW5kKHRoaXMubnVtWCAvIDIpLCBNYXRoLnJvdW5kKHRoaXMubnVtWSAvIDIpKTtcbiAgICAgICAgLy90aGlzLmdlbmVyYXRlU25ha2UoNCk7XG4gICAgfVxuICAgIHJlYnVpbGQoKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVTbmFrZSg0KTtcbiAgICB9XG4gICAgaGFzQ29sbGlkZWRXaXRoU2VsZigpIHtcbiAgICAgICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiB0aGlzLnNuYWtlUG9pbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBhY3R1YWxQb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uYWRkKHRoaXMuZGlyZWN0aW9uLm11bHRpcGx5U2NhbGFyKDAuNSkpO1xuICAgICAgICAgICAgY29uc3QgZFNxdWFyZWQgPSBNYXRoLnBvdygoYWN0dWFsUG9zaXRpb24ueCAtIHBvc2l0aW9uLngpLCAyKSArIE1hdGgucG93KChhY3R1YWxQb3NpdGlvbi55IC0gcG9zaXRpb24ueSksIDIpO1xuICAgICAgICAgICAgaWYgKGRTcXVhcmVkIDwgTWF0aC5wb3coKDEgLyBTVUJESVZJU0lPTlMpLCAyKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29sbGlkZWQgd2l0aDogXCIsIHBvc2l0aW9uLCBcIiBkaXN0YW5jZSBzcXVhcmVkIG9mOiBcIiwgZFNxdWFyZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFzQ29sbGlkZWRXaXRoT3RoZXJzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHRoaXMub3RoZXJQb2ludHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbFBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5hZGQodGhpcy5kaXJlY3Rpb24ubXVsdGlwbHlTY2FsYXIoMC41KSk7XG4gICAgICAgICAgICBjb25zdCBkU3F1YXJlZCA9IE1hdGgucG93KChhY3R1YWxQb3NpdGlvbi54IC0gcG9zaXRpb24ueCksIDIpICsgTWF0aC5wb3coKGFjdHVhbFBvc2l0aW9uLnkgLSBwb3NpdGlvbi55KSwgMik7XG4gICAgICAgICAgICBpZiAoZFNxdWFyZWQgPCBNYXRoLnBvdygoMSAvIFNVQkRJVklTSU9OUyksIDIpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb2xsaWRlZCB3aXRoOiBcIiwgcG9zaXRpb24sIFwiIGRpc3RhbmNlIHNxdWFyZWQgb2Y6IFwiLCBkU3F1YXJlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuc25ha2VVcGRhdGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVQZW5kaW5nVHVybigpO1xuICAgICAgICB0aGlzLmdldEZvb2QoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNXaXRoaW5Cb3JkZXJzKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgIHRoaXMubG9zdENhbGxiYWNrKHRoaXMuc25ha2VQb2ludHMubGVuZ3RoIC8gU1VCRElWSVNJT05TKTtcbiAgICAgICAgICAgIC8vdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0NvbGxpZGVkV2l0aFNlbGYoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmxvc3RDYWxsYmFjayh0aGlzLnNuYWtlUG9pbnRzLmxlbmd0aCAvIFNVQkRJVklTSU9OUyk7XG4gICAgICAgICAgICAvL3RoaXMucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNDb2xsaWRlZFdpdGhPdGhlcnMoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmxvc3RDYWxsYmFjayh0aGlzLnNuYWtlUG9pbnRzLmxlbmd0aCAvIFNVQkRJVklTSU9OUyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UG9pbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbmFrZVBvaW50cztcbiAgICB9XG4gICAgdXBkYXRlRm9vZFBvc2l0aW9ucyhmb29kcykge1xuICAgICAgICB0aGlzLmZvb2RzID0gZm9vZHM7XG4gICAgfVxuICAgIHVwZGF0ZU90aGVyUG9pbnRzKG90aGVycykge1xuICAgICAgICB0aGlzLm90aGVyUG9pbnRzID0gb3RoZXJzO1xuICAgIH1cbiAgICByZW5kZXIoY3R4KSB7XG4gICAgICAgIHRoaXMuZHJhd1NuYWtlKGN0eCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ0VMTF9IRUlHSFQsIENFTExfV0lEVEgsIFNVQkRJVklTSU9OUyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xuaW1wb3J0IHsgU25ha2UgfSBmcm9tIFwiLi9zbmFrZVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlYzJcIjtcbmltcG9ydCBmb29kSW1hZ2UgZnJvbSAnLi4vYXNzZXRzL2Zvb2QucG5nJztcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2FtZVwiKTtcbmNhbnZhcy53aWR0aCA9IGlubmVyV2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gaW5uZXJIZWlnaHQ7XG5sZXQgYXJlYVggPSBjYW52YXMud2lkdGggLyBDRUxMX1dJRFRIO1xubGV0IGFyZWFZID0gY2FudmFzLmhlaWdodCAvIENFTExfSEVJR0hUO1xud2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICBhcmVhWCA9IGNhbnZhcy53aWR0aCAvIENFTExfV0lEVEg7XG4gICAgYXJlYVkgPSBjYW52YXMuaGVpZ2h0IC8gQ0VMTF9IRUlHSFQ7XG59O1xuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbmNvbnN0IEZvb2RJbWFnZSA9IG5ldyBJbWFnZSgpO1xuRm9vZEltYWdlLnNyYyA9IGZvb2RJbWFnZTtcbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kb3VibGVTbmFrZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb29kcyA9IFtdO1xuICAgICAgICB0aGlzLnNuYWtlcyA9IFtdO1xuICAgICAgICB0aGlzLm5leHRHYW1lRG91YmxlU25ha2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMubnVtYmVyT2ZGb29kcyA9IDE7XG4gICAgICAgIHRoaXMucmVuZGVyTG9vcCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNuYWtlIG9mIHRoaXMuc25ha2VzKSB7XG4gICAgICAgICAgICAgICAgc25ha2UudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXJMb29wKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb29kQ2FsbGJhY2sgPSB0aGlzLmZvb2RDYWxsYmFjay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmxvc3RDYWxsYmFjayA9IHRoaXMubG9zdENhbGxiYWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLmdhbWVTdGFydGVkRXZlbnQoKTtcbiAgICB9XG4gICAgbmV4dEdhbWVEb3VibGVTbmFrZXNTZXQodikge1xuICAgICAgICB0aGlzLm5leHRHYW1lRG91YmxlU25ha2VzID0gdjtcbiAgICB9XG4gICAgY3JlYXRlRm9vZCgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZm9vZHMubGVuZ3RoIDwgdGhpcy5udW1iZXJPZkZvb2RzKSB7XG4gICAgICAgICAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHdoaWxlICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHQgdG8gcGxhY2UgZm9vZC4uLlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChhcmVhWCAtIDIpKSArIDEsIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChhcmVhWSAtIDIpKSArIDEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxhY2VkIGF0OiBcIiwgcG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuZm9vZHMuc29tZShmID0+IGYuZXF1YWxzKHBvc2l0aW9uKSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb29kcy5wdXNoKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBzbmFrZSBvZiB0aGlzLnNuYWtlcykge1xuICAgICAgICAgICAgc25ha2UudXBkYXRlRm9vZFBvc2l0aW9ucyh0aGlzLmZvb2RzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnYW1lU3RhcnRlZEV2ZW50KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNuYWtlIG9mIHRoaXMuc25ha2VzKSB7XG4gICAgICAgICAgICAgICAgc25ha2Uuc2V0R2FtZVN0YXJ0ZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVTY29yZSgpIHtcbiAgICAgICAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBzbmFrZSBvZiB0aGlzLnNuYWtlcykge1xuICAgICAgICAgICAgdG90YWxMZW5ndGggKz0gc25ha2UuZ2V0UG9pbnRzKCkubGVuZ3RoIC8gU1VCRElWSVNJT05TO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Njb3JlXCIpO1xuICAgICAgICBpZiAoIWEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGEudGV4dENvbnRlbnQgPSBgU2NvcmU6ICR7dG90YWxMZW5ndGh9YDtcbiAgICB9XG4gICAgZHJhd0dyaWQoKSB7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgYXJlYVg7IHgrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBhcmVhWTsgeSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHkgJSAyID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggJSAyID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiMxYTFhMWFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4ICogQ0VMTF9XSURUSCwgeSAqIENFTExfSEVJR0hULCBDRUxMX1dJRFRILCBDRUxMX0hFSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjMTExMTExXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCAqIENFTExfV0lEVEgsIHkgKiBDRUxMX0hFSUdIVCwgQ0VMTF9XSURUSCwgQ0VMTF9IRUlHSFQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeCAlIDIgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzFhMWExYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggKiBDRUxMX1dJRFRILCB5ICogQ0VMTF9IRUlHSFQsIENFTExfV0lEVEgsIENFTExfSEVJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiMxMTExMTFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4ICogQ0VMTF9XSURUSCwgeSAqIENFTExfSEVJR0hULCBDRUxMX1dJRFRILCBDRUxMX0hFSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlU25ha2VzKCkge1xuICAgICAgICB0aGlzLmRvdWJsZVNuYWtlcyA9IHRoaXMubmV4dEdhbWVEb3VibGVTbmFrZXM7XG4gICAgICAgIGlmICh0aGlzLmRvdWJsZVNuYWtlcykge1xuICAgICAgICAgICAgdGhpcy5zbmFrZXMgPSBbXG4gICAgICAgICAgICAgICAgbmV3IFNuYWtlKG5ldyBWZWN0b3IyKE1hdGgucm91bmQoYXJlYVggLyAyKSwgTWF0aC5yb3VuZChhcmVhWSAvIDIpKSwgbmV3IFZlY3RvcjIoMCwgLTEpLCA0LCBhcmVhWCwgYXJlYVksIHRoaXMuZm9vZENhbGxiYWNrLCB0aGlzLmxvc3RDYWxsYmFjayksXG4gICAgICAgICAgICAgICAgbmV3IFNuYWtlKG5ldyBWZWN0b3IyKE1hdGgucm91bmQoYXJlYVggLyAzKSwgTWF0aC5yb3VuZChhcmVhWSAvIDMpKSwgbmV3IFZlY3RvcjIoMCwgLTEpLCA0LCBhcmVhWCwgYXJlYVksIHRoaXMuZm9vZENhbGxiYWNrLCB0aGlzLmxvc3RDYWxsYmFjaylcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLnNuYWtlc1sxXS5zZXRVc2VXU0FEKHRydWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG91YmxlU25ha2VzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbmFrZXNbMF0udXBkYXRlT3RoZXJQb2ludHModGhpcy5zbmFrZXNbMV0uZ2V0UG9pbnRzKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc25ha2VzWzFdLnVwZGF0ZU90aGVyUG9pbnRzKHRoaXMuc25ha2VzWzBdLmdldFBvaW50cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc25ha2VzID0gW1xuICAgICAgICAgICAgICAgIG5ldyBTbmFrZShuZXcgVmVjdG9yMihNYXRoLnJvdW5kKGFyZWFYIC8gMiksIE1hdGgucm91bmQoYXJlYVkgLyAyKSksIG5ldyBWZWN0b3IyKDAsIC0xKSwgNCwgYXJlYVgsIGFyZWFZLCB0aGlzLmZvb2RDYWxsYmFjaywgdGhpcy5sb3N0Q2FsbGJhY2spXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgc25ha2Ugb2YgdGhpcy5zbmFrZXMpIHtcbiAgICAgICAgICAgIHNuYWtlLnVwZGF0ZUZvb2RQb3NpdGlvbnModGhpcy5mb29kcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9vZENhbGxiYWNrKHBvc2l0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkdPVCBUSEUgRk9PRCEhIVwiKTtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5mb29kcy5maW5kSW5kZXgoZiA9PiBmLmVxdWFscyhwb3NpdGlvbikpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSlcbiAgICAgICAgICAgIHRoaXMuZm9vZHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIGlmICh0aGlzLmRvdWJsZVNuYWtlcykge1xuICAgICAgICAgICAgdGhpcy5zbmFrZXNbMF0udXBkYXRlT3RoZXJQb2ludHModGhpcy5zbmFrZXNbMV0uZ2V0UG9pbnRzKCkpO1xuICAgICAgICAgICAgdGhpcy5zbmFrZXNbMV0udXBkYXRlT3RoZXJQb2ludHModGhpcy5zbmFrZXNbMF0uZ2V0UG9pbnRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlRm9vZCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKCk7XG4gICAgfVxuICAgIGxvc3RDYWxsYmFjayhsZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiTG9zdCB3aXRoIGxlbmd0aDogXCIsIGxlbmd0aCk7XG4gICAgICAgIGxldCB0b3RhbExlbmd0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3Qgc25ha2Ugb2YgdGhpcy5zbmFrZXMpIHtcbiAgICAgICAgICAgIHRvdGFsTGVuZ3RoICs9IHNuYWtlLmdldFBvaW50cygpLmxlbmd0aCAvIFNVQkRJVklTSU9OUztcbiAgICAgICAgfVxuICAgICAgICBhbGVydChcIihUZW1wb3JhcnkgVUkpIFRvdGFsIHNjb3JlIG9mOiBcIiArIHRvdGFsTGVuZ3RoLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmxvc3RGdW5jdGlvbigpO1xuICAgIH1cbiAgICBsb3N0RnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc25ha2VzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucmVzZXRHYW1lKCk7XG4gICAgICAgIHRoaXMuc2hvd1dpbmRvdygpO1xuICAgIH1cbiAgICBkcmF3Rm9vZCgpIHtcbiAgICAgICAgdGhpcy5mb29kcy5mb3JFYWNoKChwb3NpdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZvb2RXaWR0aCA9IENFTExfV0lEVEggKiAwLjU7XG4gICAgICAgICAgICBjb25zdCBmb29kSGVpZ2h0ID0gQ0VMTF9IRUlHSFQgKiAwLjU7XG4gICAgICAgICAgICBjb25zdCB4ID0gcG9zaXRpb24ueCAqIENFTExfV0lEVEg7XG4gICAgICAgICAgICBjb25zdCB5ID0gcG9zaXRpb24ueSAqIENFTExfSEVJR0hUO1xuICAgICAgICAgICAgLy9jdHguZmlsbFN0eWxlID0gXCJncmVlblwiO1xuICAgICAgICAgICAgLy9jdHguZmlsbFJlY3QoeCArIGZvb2RXaWR0aCAvIDIsIHkgKyBmb29kSGVpZ2h0IC8gMiwgZm9vZFdpZHRoLCBmb29kSGVpZ2h0KTtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoRm9vZEltYWdlLCB4LCB5KTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJGaWxsIGF0OiBcIiwgeCwgeSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKGZvb2RzWzBdKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuZHJhd0dyaWQoKTtcbiAgICAgICAgdGhpcy5kcmF3Rm9vZCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHNuYWtlIG9mIHRoaXMuc25ha2VzKSB7XG4gICAgICAgICAgICBzbmFrZS5yZW5kZXIoY3R4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVDYW52YXMoKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGFyZWFYID0gY2FudmFzLndpZHRoIC8gQ0VMTF9XSURUSDtcbiAgICAgICAgYXJlYVkgPSBjYW52YXMuaGVpZ2h0IC8gQ0VMTF9IRUlHSFQ7XG4gICAgfVxuICAgIHJlc2V0R2FtZSgpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVTbmFrZXMoKTtcbiAgICAgICAgdGhpcy5mb29kcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmNyZWF0ZUZvb2QoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSgpO1xuICAgIH1cbiAgICBzaG93V2luZG93KCkge1xuICAgICAgICBjb25zdCB3aW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luZm9cIik7XG4gICAgICAgIGlmICghd2luKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB3aW4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG4gICAgd2luZG93SGFuZGxlcigpIHtcbiAgICAgICAgY29uc3Qgd2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmZvXCIpO1xuICAgICAgICBpZiAoIXdpbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgc21hbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NtYWxsXCIpO1xuICAgICAgICBjb25zdCBtZWRpdW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lZGl1bVwiKTtcbiAgICAgICAgY29uc3QgbGFyZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhcmdlXCIpO1xuICAgICAgICBjb25zdCBsYXJnZXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXJnZXN0XCIpO1xuICAgICAgICBzbWFsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gXCIzMDBweFwiO1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMzAwcHhcIjtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FudmFzKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0R2FtZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVkaXVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBcIjQwMHB4XCI7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gXCI0MDBweFwiO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRHYW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsYXJnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gXCI2MDBweFwiO1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRHYW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsYXJnZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FudmFzKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0R2FtZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaGFyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZG91YmxlLXNuYWtlc1wiKTtcbiAgICAgICAgaGFyZC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0R2FtZURvdWJsZVNuYWtlc1NldChoYXJkLmNoZWNrZWQpO1xuICAgICAgICAgICAgdGhpcy5yZXNldEdhbWUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwcGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXBwbGVzXCIpO1xuICAgICAgICBhcHBsZXMuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZGb29kcyA9IHBhcnNlSW50KGFwcGxlcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0R2FtZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmVnaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JlZ2luXCIpO1xuICAgICAgICBiZWdpbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgd2luLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMud2luZG93SGFuZGxlcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNuYWtlcygpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZvb2QoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckxvb3AoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHYW1lIH0gZnJvbSBcIi4vZ2FtZVwiO1xuY29uc3QgZyA9IG5ldyBHYW1lKCk7XG4iXSwibmFtZXMiOlsiQ0VMTF9XSURUSCIsIkNFTExfSEVJR0hUIiwiVmVjdG9yMiIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJ0aGlzIiwibXVsdGlwbHkiLCJvdGhlciIsImFkZCIsIm11bHRpcGx5U2NhbGFyIiwic2NhbGFyIiwic3ViIiwiZXF1YWxzIiwiaGVhZFJpZ2h0SW1hZ2UiLCJJbWFnZSIsInNyYyIsImhlYWRMZWZ0SW1hZ2UiLCJoZWFkVXBJbWFnZSIsImhlYWREb3duSW1hZ2UiLCJTbmFrZSIsImluaXRpYWxQb3NpdGlvbiIsImluaXRpYWxEaXJlY3Rpb24iLCJpbml0aWFsTGVuZ3RoIiwibnVtWCIsIm51bVkiLCJlYXRlbkZvb2RDYWxsYmFjayIsImxvc3RDYWxsYmFjayIsImZyYW1lQ291bnRlciIsInBlbmRpbmdUdXJuIiwic25ha2VQb2ludHMiLCJwcmV2aW91c1BvaW50cyIsImZvb2RzIiwib3RoZXJQb2ludHMiLCJ1c2VXU0FEQ29udHJvbHMiLCJnYW1lU3RhcnRlZCIsInBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZm9vZENhbGxiYWNrIiwia2V5RXZlbnRzIiwiZ2VuZXJhdGVTbmFrZSIsInNldFVzZVdTQUQiLCJ2YWx1ZSIsInNldEdhbWVTdGFydGVkIiwibGVuZ3RoIiwiRnJhbWVzUGVyQ2VsbCIsImkiLCJwdXNoIiwiYmVnaW5QYXJ0cyIsInAiLCJjIiwic25ha2VVcGRhdGUiLCJuZXdlc3QiLCJmb3JFYWNoIiwicGFydCIsImlkeCIsIk1hdGgiLCJyb3VuZCIsImNsYW1wZWQiLCJtYXgiLCJtaW4iLCJwb2ludCIsInNwbGljZSIsImdldEZvb2QiLCJpbmRleCIsImZvb2QiLCJhYnMiLCJkcmF3U25ha2UiLCJjdHgiLCJiZWdpblBhdGgiLCJyIiwibW92ZVRvIiwiYXJjIiwiUEkiLCJmaWxsU3R5bGUiLCJmaWxsIiwiZHJhd0ltYWdlIiwiaXNXaXRoaW5Cb3JkZXJzIiwiZW5zdXJlVHVybmluZ09uQ2VsbCIsImNsb3Nlc3RDZWxsWCIsImNsb3Nlc3RDZWxsWSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJ1cGRhdGVQZW5kaW5nVHVybiIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwicmVzZXQiLCJyZWJ1aWxkIiwiaGFzQ29sbGlkZWRXaXRoU2VsZiIsImFjdHVhbFBvc2l0aW9uIiwiZFNxdWFyZWQiLCJwb3ciLCJoYXNDb2xsaWRlZFdpdGhPdGhlcnMiLCJ1cGRhdGUiLCJnZXRQb2ludHMiLCJ1cGRhdGVGb29kUG9zaXRpb25zIiwidXBkYXRlT3RoZXJQb2ludHMiLCJvdGhlcnMiLCJyZW5kZXIiLCJjYW52YXMiLCJxdWVyeVNlbGVjdG9yIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJhcmVhWCIsImFyZWFZIiwid2luZG93Iiwib25yZXNpemUiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldENvbnRleHQiLCJGb29kSW1hZ2UiLCJkb3VibGVTbmFrZXMiLCJzbmFrZXMiLCJuZXh0R2FtZURvdWJsZVNuYWtlcyIsIm51bWJlck9mRm9vZHMiLCJyZW5kZXJMb29wIiwic25ha2UiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiaW5pdGlhbGl6ZSIsImdhbWVTdGFydGVkRXZlbnQiLCJuZXh0R2FtZURvdWJsZVNuYWtlc1NldCIsInYiLCJjcmVhdGVGb29kIiwidmFsaWQiLCJmbG9vciIsInJhbmRvbSIsInNvbWUiLCJmIiwidXBkYXRlU2NvcmUiLCJ0b3RhbExlbmd0aCIsImEiLCJ0ZXh0Q29udGVudCIsImRyYXdHcmlkIiwiZmlsbFJlY3QiLCJjcmVhdGVTbmFrZXMiLCJmaW5kSW5kZXgiLCJhbGVydCIsInRvU3RyaW5nIiwibG9zdEZ1bmN0aW9uIiwicmVzZXRHYW1lIiwic2hvd1dpbmRvdyIsImRyYXdGb29kIiwiY2xlYXJSZWN0IiwidXBkYXRlQ2FudmFzIiwid2luIiwic3R5bGUiLCJkaXNwbGF5Iiwid2luZG93SGFuZGxlciIsInNtYWxsIiwibWVkaXVtIiwibGFyZ2UiLCJsYXJnZXN0IiwiaGFyZCIsImNoZWNrZWQiLCJhcHBsZXMiLCJwYXJzZUludCJdLCJzb3VyY2VSb290IjoiIn0=